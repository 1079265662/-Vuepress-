(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{621:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("介绍")]),t._v(" "),a("p",[t._v("three.js 获取三维模型的节点 "),a("br")])]),t._v(" "),a("h2",{attrs:{id:"什么是三维模型的节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是三维模型的节点"}},[t._v("#")]),t._v(" 什么是三维模型的节点")]),t._v(" "),a("p",[t._v("开发一些web3d项目，比如一个小区、学校的可视化，场景中会有多个楼房模型对象，这时候程序员通过什么方式区分每一栋楼是一个问题。")]),t._v(" "),a("p",[t._v("通过获取指定模型的节点 我们可以和其建立交互效果 就跟前端的获取Dom 绑定事件是一样的")]),t._v(" "),a("h3",{attrs:{id:"三维建模软件和three-js模型名称对应"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三维建模软件和three-js模型名称对应"}},[t._v("#")]),t._v(" "),a("strong",[t._v("三维建模软件和three.js模型名称对应")])]),t._v(" "),a("ul",[a("li",[t._v("一般三维建模软件的"),a("strong",[t._v("目录树")]),t._v("都有模型的名称，three.js加载外部模型，外部模型的名称会解析为three.js对象的 "),a("code",[t._v(".name")]),t._v("属性。")]),t._v(" "),a("li",[t._v("类似以前端的Dom节点一样 我们通过"),a("code",[t._v("class")]),t._v("或者"),a("code",[t._v("id")]),t._v("给其绑定一个类名 然后通过一些选择Dom的方法 绑定其Dom节点 就可以实现一些交互效果")])]),t._v(" "),a("h3",{attrs:{id:"获取三维模型的节点-getobjectbyname"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取三维模型的节点-getobjectbyname"}},[t._v("#")]),t._v(" "),a("strong",[t._v("获取三维模型的节点 "),a("code",[t._v(".getObjectByName()")])])]),t._v(" "),a("ul",[a("li",[t._v("three.js通过基类"),a("a",{attrs:{href:"https://threejs.org/docs/index.html?q=Object3D#api/zh/core/Object3D",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object3D"),a("OutboundLink")],1),t._v("的 "),a("code",[t._v(".getObjectByName('模型节点名称name')")]),t._v("方法快速查找某个模型对象，就像普通前端绑定DOM的方法 "),a("code",[t._v("getElementById()")]),t._v("一样。\n"),a("ul",[a("li",[a("code",[t._v(".getObjectByName()")]),t._v(" 不光具备绑定模型节点操作节点 也可以进行模型节点进行筛选(类似于"),a("code",[t._v("filter")]),t._v(") 筛选符合条件的模型节点内容 找不到会返回"),a("code",[t._v("undefined")])])])]),t._v(" "),a("li",[t._v("我们可以通过给"),a("strong",[t._v("模型对象")]),t._v("添加"),a("strong",[t._v("父类")]),t._v(" 通过获取父类的三维模型的节点 实现批量修改模型对象的方式")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" model "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("THREE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Group")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//声明一个组对象，用来添加加载成功的三维场景")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" loader "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GLTFLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建一个GLTF加载器")]),t._v("\nloader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./scene/scene.gltf"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("gltf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gltf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 我有两个模型 名称为: 立方体 和 Cylinder 我们通过getObjectByName()获取其三维模型的节点 ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mesh "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gltf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjectByName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'立方体'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'立方体'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("mesh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//控制台查看返回结果")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Cylinder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gltf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjectByName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Cylinder'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//圆柱体")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'圆柱体'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Cylinder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//控制台查看返回结果")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查找符合条件的name名称")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gltf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjectByName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'粮仓'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查找符合条件的name")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 我们还可以批量修改某个模型的内容 比如以上两模型都在 Group这个父类 通过获取父类批量修改里面的子类")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" group "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gltf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjectByName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Group'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获得立方体和Cylinder的父对象Group")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 批量更改group所有后代的颜色")]),t._v("\n    group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("mesh")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        mesh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("material"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x00ffff")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"模型命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模型命名"}},[t._v("#")]),t._v(" "),a("strong",[t._v("模型命名")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("命名：中文名、英文名、汉语拼音都可以，可以根据公司规定或开发习惯命名。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("规范")]),t._v("：模型命名也可以参考编程命名规范，目前大多数公司提倡英文命名，中文命名很少见。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("相关")]),t._v("：模型名称可以尝试参考前后端API接口名称，比如前后端接口定义，"),a("strong",[t._v("P_01")]),t._v("对应"),a("strong",[t._v("1号")]),t._v("平房粮仓，"),a("strong",[t._v("P_02")]),t._v("对应"),a("strong",[t._v("2号")]),t._v("平房粮仓，那么美术和前端之间模型的名称也可以使用P_01、P_02分别表示1号平房粮仓、2号平房粮仓。毕竟前端WebGL工程师要同时和后端、美术协作，名称都一致更方便。")])])]),t._v(" "),a("h3",{attrs:{id:"命名其他问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命名其他问题"}},[t._v("#")]),t._v(" "),a("strong",[t._v("命名其他问题")])]),t._v(" "),a("ul",[a("li",[t._v("通过三维软件建模的时候，每个模型软件都会默认生成一个名字( 唯一名字 )，如果前端代码不需要查询某个模型进行特定操作，那么该模型名称随意是什么都无所谓 并不会重名 除非自己修改。")]),t._v(" "),a("li",[t._v("如果需要选中进行特定操作的模型，一般需要处于独立状态，不能和其它Mesh合在一起，比如需要获取模型世界坐标、射线拾取模型对象等。")])]),t._v(" "),a("blockquote",[a("p",[t._v("命名建议")])]),t._v(" "),a("ol",[a("li",[t._v("需要进行交互的模型 一定要独立绘制 并且名称需要唯一")]),t._v(" "),a("li",[t._v("需要交互的不同模型 建议创建父级名称进行归类")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/image-20220605155233753.png",alt:"image-20220605155233753"}})]),t._v(" "),a("h2",{attrs:{id:"参考文献"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[t._v("#")]),t._v(" 参考文献")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://www.yanhuangxueyuan.com/Three.js/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Three.js零基础入门教程(郭隆邦)"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);
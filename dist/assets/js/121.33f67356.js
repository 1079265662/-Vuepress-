(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{640:function(t,s,n){"use strict";n.r(s);var a=n(2),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("介绍")]),t._v(" "),n("p",[t._v("three.js 之 Renderer 渲染器 "),n("br")])]),t._v(" "),n("h2",{attrs:{id:"渲染器renderer的作用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#渲染器renderer的作用"}},[t._v("#")]),t._v(" 渲染器renderer的作用")]),t._v(" "),n("p",[n("code",[t._v("three.js渲染器")]),t._v(" 分为很多类型的渲染器 用到再记录")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=web#api/zh/renderers/WebGLRenderer",target:"_blank",rel:"noopener noreferrer"}},[t._v("WebGLRenderer 场景渲染器"),n("OutboundLink")],1),t._v(" 最常用的渲染器 可以渲染网格模型")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://threejs.org/docs/examples/zh/renderers/CSS2DRenderer.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS2DRenderer 2D渲染器"),n("OutboundLink")],1),t._v(" 2D渲染器可以让你的元素渲染成2D效果 CSS2对象模型是"),n("code",[t._v("CSS2DObject")]),t._v(" "),n("ul",[n("li",[t._v("CSS2DRenderer的标签本身的大小不会缩放也不会旋转，"),n("strong",[t._v("始终面对屏幕")])])])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=3d#examples/zh/renderers/CSS3DRenderer",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS3DRenderer 3D渲染器"),n("OutboundLink")],1),t._v(" 3D渲染器可以让你的元素渲染成3D效果 更具备立体感\n"),n("ul",[n("li",[t._v("CSS3对象模型 "),n("code",[t._v("CSS3DObject")]),t._v("和CSS3精灵模型 "),n("code",[t._v("CSS3DSprite")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("CSS3DObject")]),t._v("CSS3对象模型的标签 缩放的时候跟着鼠标缩放变大变小，场景旋转的时候，它会跟着场景渲染器一起旋转 "),n("strong",[t._v("但不会面对屏幕")])]),t._v(" "),n("li",[n("code",[t._v("CSS3DSprite")]),t._v("CSS3精灵对象模型的标签 和上面差不多 唯一区别是不会随着场景渲染器一起旋转 "),n("strong",[t._v("始终面对屏幕")])])])])])])]),t._v(" "),n("blockquote",[n("p",[t._v("所有渲染器")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/image-20220606142601974.png",alt:"image-20220606142601974"}})]),t._v(" "),n("h2",{attrs:{id:"webglrenderer-场景渲染器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webglrenderer-场景渲染器"}},[t._v("#")]),t._v(" WebGLRenderer 场景渲染器")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=WebGLRenderer#api/zh/renderers/WebGLRenderer",target:"_blank",rel:"noopener noreferrer"}},[t._v("WebGLRenderer"),n("OutboundLink")],1),t._v(" 进行场景渲染器的创建 详细"),n("RouterLink",{attrs:{to:"/blogs/docs/threeJS/1.1_three.js_js.html"}},[t._v("看官网")]),t._v(" "),n("ul",[n("li",[t._v("设置"),n("code",[t._v("antialias")]),t._v(" 可以开始抗锯齿")])])],1)]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" renderer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("THREE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("WebGLRenderer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  antialias"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开启抗锯齿")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nrenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("outputEncoding "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("THREE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sRGBEncoding"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 解决加载gltf格式模型纹理贴图和原图不一样问题")]),t._v("\nrenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPixelRatio")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("devicePixelRatio"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置设备像素比率,防止Canvas画布输出模糊。")]),t._v("\nrenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSize")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置渲染区域尺寸")]),t._v("\nrenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setClearColor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#ff3040'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置背景颜色 支持十六进制颜色和字符串风格css颜色 (颜色, 透明度)")]),t._v("\n")])])]),n("h3",{attrs:{id:"执行持续场景渲染"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#执行持续场景渲染"}},[t._v("#")]),t._v(" "),n("strong",[t._v("执行持续场景渲染")])]),t._v(" "),n("ul",[n("li",[t._v("通过"),n("code",[t._v("requestAnimationFrame")]),t._v("方法 可以自适应的根据刷新率 渲染页面内容")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("render")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    renderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("场景Scene"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 相机Camera"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行渲染操作")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求再次执行渲染函数render，渲染下一帧")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在元素上绘制canvas")]),t._v("\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("labelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"场景渲染器自适应"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#场景渲染器自适应"}},[t._v("#")]),t._v(" "),n("strong",[t._v("场景渲染器自适应")])]),t._v(" "),n("ul",[n("li",[t._v("有时候我们需要随着页面进行自适应操作 我们可以使用"),n("code",[t._v(".setSize")]),t._v(" 方法重新设置渲染的输出尺寸")]),t._v(" "),n("li",[n("code",[t._v("window.onresize")]),t._v("监听窗口调整大小方法建议存在一个 如果你不通过指定监听"),n("code",[t._v(".addEventListener()")]),t._v("绑定 那么一个页面只能存在一个"),n("code",[t._v("window.onresize")]),t._v("方法 其他的会被覆盖")]),t._v(" "),n("li",[t._v("不光场景渲染器需要自适应 相机也需要自适应 并且通过"),n("code",[t._v(".updateProjectionMatrix()")]),t._v("方法更新相机")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建一个CSS2渲染器CSS2DRenderer")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" renderer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("THREE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("WebGLRenderer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置渲染器的尺寸(需要和其他渲染器宽高一致)")]),t._v("\n  renderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSize")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听页面尺寸是否修改")]),t._v("\n  window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onresize")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" width "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" height "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 重置渲染器输出画布canvas尺寸")]),t._v("\n    renderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSize")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("width"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" height"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全屏情况下：设置观察范围长宽比aspect为窗口宽高比")]),t._v("\n    camera"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("aspect "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" width "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" height\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 渲染器执行render方法的时候会读取相机对象的投影矩阵属性projectionMatrix")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 但是不会每渲染一帧，就通过相机的属性计算投影矩阵(节约计算资源)")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果相机的一些属性发生了变化，需要执行updateProjectionMatrix ()方法更新相机的投影矩阵")]),t._v("\n    camera"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateProjectionMatrix")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"在vue3中执行渲染"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在vue3中执行渲染"}},[t._v("#")]),t._v(" "),n("strong",[t._v("在Vue3中执行渲染")])]),t._v(" "),n("ul",[n("li",[t._v("通过"),n("code",[t._v("ref")]),t._v("绑定元素dom 进行指定元素的渲染")])]),t._v(" "),n("div",{staticClass:"language-vue extra-class"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 渲染模板 --\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stateDom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("setup")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导入Vue组合API")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" onMounted"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" startRender "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./settings/render'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取元素的Dom")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" stateDom "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 结构渲染操作")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" renderer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("startRender")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onMounted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 进行渲染操作")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 渲染到指定的元素中")]),t._v("\n  stateDom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("renderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ToGranary'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n")])])]),n("h2",{attrs:{id:"css2drenderer-2d-css2-渲染器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#css2drenderer-2d-css2-渲染器"}},[t._v("#")]),t._v(" CSS2DRenderer 2D(CSS2)渲染器")]),t._v(" "),n("ul",[n("li",[t._v("通过three.js扩展库 "),n("code",[t._v("CSS2DObject")]),t._v("可以实现把"),n("strong",[t._v("HTML元素")]),t._v("和三维元素相结合 可以使用"),n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=Vector2#api/zh/math/Vector2",target:"_blank",rel:"noopener noreferrer"}},[t._v("二维向量（Vector2）"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=obj#api/zh/core/Object3D.position",target:"_blank",rel:"noopener noreferrer"}},[t._v(".position"),n("OutboundLink")],1),t._v("局部位置属性")]),t._v(" "),n("li",[t._v("当我们设置 "),n("code",[t._v("CSS2DObject")]),t._v("2D元素后 需要通过的"),n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=Object#examples/zh/renderers/CSS2DRenderer",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS2DRenderer"),n("OutboundLink")],1),t._v(" 2D渲染器渲染出来 否则没有效果")])]),t._v(" "),n("blockquote",[n("p",[t._v("在工程化下导入three.js 2D渲染器和2D模型")])]),t._v(" "),n("ul",[n("li",[t._v("threejs扩展库CSS2DRenderer.js提供了两个构造函数CSS2渲染器 "),n("code",[t._v("THREE.CSS2DRenderer")]),t._v("、CSS2模型对象 "),n("code",[t._v("THREE.CSS2DObject")]),t._v("。")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导入2D模型对象 和 2D模型渲染器")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" CSS2DRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CSS2DObject "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'three/examples/jsm/renderers/CSS2DRenderer.js'")]),t._v("\n")])])]),n("h3",{attrs:{id:"创建css2模型对象-css2dobject"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建css2模型对象-css2dobject"}},[t._v("#")]),t._v(" "),n("strong",[t._v("创建CSS2模型对象 "),n("code",[t._v("CSS2DObject")])])]),t._v(" "),n("ul",[n("li",[t._v("CSS2模型对象 "),n("code",[t._v("CSS2DObject")]),t._v("作用是把HTML元素设计的UI包装为一个类似threejs网格模型 "),n("code",[t._v("Mesh")]),t._v("的模型对象，可以设置 "),n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=Vector2#api/zh/math/Vector2",target:"_blank",rel:"noopener noreferrer"}},[t._v("二维向量（Vector2）"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=obj#api/zh/core/Object3D.position",target:"_blank",rel:"noopener noreferrer"}},[t._v(".position"),n("OutboundLink")],1),t._v("局部位置属性 ，具备Object3D的一些方法 可以通过 "),n("code",[t._v(".add()方法")]),t._v("插入到场景中")])]),t._v(" "),n("div",{staticClass:"language-JavaScript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建一个CSS2DObject对象")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tag")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建div元素(作为标签)")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" div "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 给元素设置一个class 方便设置样式")]),t._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tag'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//div元素包装为CSS2模型对象CSS2DObject")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" label "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CSS2DObject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pointerEvents "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'none'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//避免HTML标签遮挡三维场景的鼠标事件")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置HTML元素标签在three.js世界坐标中位置")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// label.position.set(x, y, z);")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" label"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回CSS2模型标签      ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"创建css2渲染器-css2drenderer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建css2渲染器-css2drenderer"}},[t._v("#")]),t._v(" "),n("strong",[t._v("创建CSS2渲染器 "),n("code",[t._v("CSS2DRenderer")])])]),t._v(" "),n("ul",[n("li",[t._v("CSS2渲染器 "),n("code",[t._v("THREE.CSS2DRenderer")]),t._v("和常用的WebGL渲染器 "),n("code",[t._v("WebGLRenderer")]),t._v("一样都是渲染器，只是渲染技术不同，WebGL渲染器 "),n("code",[t._v("WebGLRenderer")]),t._v("解析渲染threejs模型对象的时候会调用底层的WebGL API，CSS2渲染器 "),n("code",[t._v("THREE.CSS2DRenderer")]),t._v("功能是渲染与threejs场景中网格模型绑定的HTML元素。")]),t._v(" "),n("li",[t._v("CSS2渲染器 "),n("code",[t._v(".domElement")]),t._v("、"),n("code",[t._v(".setSize()")]),t._v("、"),n("code",[t._v(".render()")]),t._v("等方法和属性功能和WebGL渲染器相同。webgl渲染器的部分属性和方法CSS3渲染是不具备的，比如设置背景颜色的方法 "),n("code",[t._v(".setClearColor()")]),t._v("(Css渲染器没有)。")]),t._v(" "),n("li",[n("font",{attrs:{color:"#ff3040"}},[t._v("注意: 2D渲染器的"),n("code",[t._v(".setSize")]),t._v("依赖"),n("code",[t._v("WebGLRenderer")]),t._v("场景渲染器的宽度高度 需要和其保持一致 否则会出现偏移问题 无论如何 他俩的宽高应该都是一个作用域的值(相同)")])],1)]),t._v(" "),n("div",{staticClass:"language-JavaScript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建一个CSS2渲染器CSS2DRenderer")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" labelRenderer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("THREE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CSS2DRenderer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .setSize的值 应该和WebGLRenderer场景渲染器的宽度高度一致 否则会出现偏移问题")]),t._v("\nlabelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSize")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlabelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'absolute'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 避免renderer.domElement影响HTMl标签定位，设置top为0px")]),t._v("\nlabelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlabelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("left "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置.pointerEvents=none，以免模型标签HTML元素遮挡鼠标选择场景模型")]),t._v("\nlabelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pointerEvents "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'none'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在元素上绘制canvas")]),t._v("\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("labelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//渲染场景中的HTMl元素包装成的CSS2模型对象")]),t._v("\nlabelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("场景scene"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 相机camera"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("blockquote",[n("p",[t._v("渲染效果")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("CSS2DRenderer")]),t._v("的标签本身的大小不会缩放也不会旋转，始终面对屏幕")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/e06645802f2742eda25815e6d7a91628.gif",alt:"img"}})]),t._v(" "),n("h2",{attrs:{id:"css3drenderer-3d-css3-渲染器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#css3drenderer-3d-css3-渲染器"}},[t._v("#")]),t._v(" CSS3DRenderer 3D(CSS3)渲染器")]),t._v(" "),n("ul",[n("li",[t._v("他和"),n("code",[t._v("CSS2DRenderer")]),t._v("2D渲染器差不多 不过他可以使用 "),n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=Vector3#api/zh/math/Vector3",target:"_blank",rel:"noopener noreferrer"}},[t._v("三维向量（Vector3）"),n("OutboundLink")],1),n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=obj#api/zh/core/Object3D.scale",target:"_blank",rel:"noopener noreferrer"}},[t._v(".scale.set()"),n("OutboundLink")],1),t._v("局部缩放属性")])]),t._v(" "),n("blockquote",[n("p",[t._v("在工程化下导入three.js CSS3渲染器 CSS3对象模型 CSS3精灵模型")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" CSS3DRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CSS3DSprite"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CSS3DObject  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'three/examples/jsm/renderers/CSS3DRenderer.js'")]),t._v("\n")])])]),n("blockquote",[n("p",[t._v("CSS3对象模型CSS3DObject 和 CSS3精灵模型CSS3DSprite的区别")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("THREE.CSS3DRenderer")]),t._v("能够渲染的模型对象是CSS3对象模型 "),n("code",[t._v("THREE.CSS3DObject")]),t._v("、CSS3精灵模型 "),n("code",[t._v("THREE.CSS3DSprite")]),t._v("。他俩使用方法都一样 只是展示效果略微不同\n"),n("ul",[n("li",[n("code",[t._v("CSS3DObject")]),t._v("CSS3对象模型的标签 缩放的时候跟着鼠标缩放变大变小，场景旋转的时候，它会跟着场景渲染器一起旋转 "),n("strong",[t._v("但不会面对屏幕")])]),t._v(" "),n("li",[n("code",[t._v("CSS3DSprite")]),t._v("CSS3精灵对象模型的标签 和上面差不多 唯一区别是不会随着场景渲染器一起旋转 "),n("strong",[t._v("始终面对屏幕")])])])])]),t._v(" "),n("h3",{attrs:{id:"创建-css3对象模型-css3dobject"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建-css3对象模型-css3dobject"}},[t._v("#")]),t._v(" "),n("strong",[t._v("创建 CSS3对象模型 "),n("code",[t._v("CSS3DObject")])])]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=obj#api/zh/core/Object3D.scale",target:"_blank",rel:"noopener noreferrer"}},[t._v(".scale.set()"),n("OutboundLink")],1),t._v("局部缩放需要设置 生成的3D元素的尺存(px)和渲染器尺寸差距较大 通常需要设置缩放比是"),n("code",[t._v("<1")])])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建一个CSS3DObject对象")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tag")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建div元素(作为标签)")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" div "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 给元素设置一个class 方便设置样式")]),t._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tag'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//div元素包装为CSS3模型对象CSS3DObject")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" label "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CSS3DObject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//避免HTML标签遮挡三维场景的鼠标事件")]),t._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pointerEvents "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'none'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//缩放CSS3DObject模型对象")]),t._v("\n  label"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scale"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//根据相机渲染范围控制HTML 3D标签尺寸")]),t._v("\n  label"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rotateY")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PI")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//控制HTML标签CSS3对象姿态角度")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// label.rotateX(-Math.PI/2);")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" label"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回CSS3模型标签      ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("blockquote",[n("p",[t._v("渲染效果")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("CSS3DObject")]),t._v("CSS3对象模型的标签 缩放的时候跟着鼠标缩放变大变小，场景旋转的时候，它会跟着场景渲染器一起旋转 "),n("strong",[t._v("但不会面对屏幕")])])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/bd0cf6acd7414a0aafe75fb838a371e4.gif",alt:"img"}})]),t._v(" "),n("h3",{attrs:{id:"创建-css3精灵对象模型-css3dsprite"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建-css3精灵对象模型-css3dsprite"}},[t._v("#")]),t._v(" "),n("strong",[t._v("创建 CSS3精灵对象模型 "),n("code",[t._v("CSS3DSprite")])])]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=obj#api/zh/core/Object3D.scale",target:"_blank",rel:"noopener noreferrer"}},[t._v(".scale.set()"),n("OutboundLink")],1),t._v("局部缩放需要设置 生成的3D元素的尺存(px)和渲染器尺寸差距较大 通常需要设置缩放比是"),n("code",[t._v("<1")])])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建一个HTML标签")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tag")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建div元素(作为标签)")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" div "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 给元素设置一个class 方便设置样式")]),t._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tag'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//div元素包装为CSS3模型对象CSS3DSprite")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" label "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CSS3DSprite")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pointerEvents "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'none'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//避免HTML标签遮挡三维场景的鼠标事件")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//缩放CSS3DSprite模型对象")]),t._v("\n  label"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scale"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//根据相机渲染范围控制HTML 3D标签尺寸")]),t._v("\n  label"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rotateY")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PI")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//控制HTML标签CSS3对象姿态角度")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// label.rotateX(-Math.PI / 2);")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" label"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回CSS3模型标签      ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("blockquote",[n("p",[t._v("渲染效果")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("CSS3DSprite")]),t._v("CSS3精灵对象模型的标签 和上面差不多 唯一区别是不会随着场景渲染器一起旋转 "),n("strong",[t._v("始终面对屏幕")])])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/6c043673321f42d78a98d9f7d6c0da3c.gif",alt:"img"}})]),t._v(" "),n("h3",{attrs:{id:"创建-css3渲染器-css3drenderer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建-css3渲染器-css3drenderer"}},[t._v("#")]),t._v(" "),n("strong",[t._v("创建 CSS3渲染器 "),n("code",[t._v("CSS3DRenderer")])])]),t._v(" "),n("ul",[n("li",[t._v("和 "),n("code",[t._v("CSS2DRenderer")]),t._v(" CSS2渲染器差不多 不记录了 可以去"),n("a",{attrs:{href:"https://threejs.org/docs/index.html?q=CSS3DRenderer#examples/zh/renderers/CSS3DRenderer",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS3DRenderer"),n("OutboundLink")],1),t._v("文档中查看")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建一个CSS3渲染器CSS3DRenderer")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" labelRenderer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CSS3DRenderer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlabelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSize")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlabelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("position "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'absolute'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 相对标签原位置位置偏移大小")]),t._v("\nlabelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlabelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("left "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// //设置.pointerEvents=none，以免模型标签HTML元素遮挡鼠标选择场景模型")]),t._v("\nlabelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pointerEvents "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'none'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("labelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//渲染场景中的HTMl元素包装成的CSS3模型对象")]),t._v("\nlabelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("场景scene"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 相机camera"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在元素上绘制canvas")]),t._v("\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("labelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h2",{attrs:{id:"_2d、3d、3dsprite-精灵-渲染器的相关问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2d、3d、3dsprite-精灵-渲染器的相关问题"}},[t._v("#")]),t._v(" 2D、3D、3DSprite(精灵)渲染器的相关问题")]),t._v(" "),n("ul",[n("li",[t._v("2D 3D 3DSprite(精灵 )渲染器会出现的自适应 和 在虚拟Dom的问题记录")]),t._v(" "),n("li",[t._v("以下代码块 采用"),n("code",[t._v("CSS2DRenderer")]),t._v("2D渲染器 同样适用于"),n("code",[t._v("CSS3DRenderer")]),t._v(" 3D渲染器")])]),t._v(" "),n("h3",{attrs:{id:"渲染器自适应"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#渲染器自适应"}},[t._v("#")]),t._v(" "),n("strong",[t._v("渲染器自适应")])]),t._v(" "),n("ul",[n("li",[t._v("有时候我们需要随着页面进行自适应操作 我们可以使用"),n("code",[t._v(".setSize")]),t._v(" 方法重新设置渲染的输出尺寸 使用方法和场景渲染器"),n("code",[t._v("WebGLRenderer")]),t._v("自适应一样")]),t._v(" "),n("li",[t._v("相机也需要重置哦")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建一个CSS2渲染器CSS2DRenderer")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" labelRenderer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CSS2DRenderer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置渲染器的尺寸(需要和其他渲染器宽高一致)")]),t._v("\n  labelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSize")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听页面尺寸是否修改")]),t._v("\n  window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onresize")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" width "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerWidth\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" height "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 重置2D渲染器输出画布canvas尺寸")]),t._v("\n    labelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSize")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("width"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" height"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全屏情况下：设置观察范围长宽比aspect为窗口宽高比")]),t._v("\n    camera"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("aspect "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" width "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" height\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 渲染器执行render方法的时候会读取相机对象的投影矩阵属性projectionMatrix")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 但是不会每渲染一帧，就通过相机的属性计算投影矩阵(节约计算资源)")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果相机的一些属性发生了变化，需要执行updateProjectionMatrix ()方法更新相机的投影矩阵")]),t._v("\n    camera"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateProjectionMatrix")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"vue-cli中问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli中问题"}},[t._v("#")]),t._v(" "),n("strong",[t._v("Vue cli中问题")])]),t._v(" "),n("ul",[n("li",[t._v("当我们在Vue脚手架切换路由的时候 页面上的2D渲染器产生的标签并不会随着路由切换而隐藏(销毁)")]),t._v(" "),n("li",[t._v("原因是three.js的 "),n("code",[t._v("CSS2DRendeer")]),t._v("生成的标签直接就是挂在真实的DOM上，并非是Vue的虚拟DOM上，所以在页面切换的时候，这个标签并不会随着切换而消失。而是一直在页面的body上面")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/image-20220606200111409.png",alt:"image-20220606200111409"}})]),t._v(" "),n("blockquote",[n("p",[t._v("解决办法")])]),t._v(" "),n("ul",[n("li",[t._v("Vue3提供了组件销毁后的生命周期"),n("code",[t._v("onUnmounted()")]),t._v(" Vue2是"),n("code",[t._v("beforeDestroy()")]),t._v(" 我们通过原生方法:  "),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Node/removeChild",target:"_blank",rel:"noopener noreferrer"}},[t._v(".removeChild"),n("OutboundLink")],1),t._v(" 在DOM中删除(销毁)一个子节点的方法 来销毁2D渲染器产生的标签")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 假设变量labelRenderer为CSS2DRenderer创建的2D渲染器")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Vue3")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onUnmounted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 销毁CSS2DRenderer创建的2D渲染器")]),t._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("labelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Vue2")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeDestroy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 销毁CSS2DRenderer创建的2D渲染器")]),t._v("\n   document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("labelRenderer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"参考文献"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[t._v("#")]),t._v(" 参考文献")]),t._v(" "),n("p",[n("a",{attrs:{href:"http://www.yanhuangxueyuan.com/Three.js/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Three.js零基础入门教程(郭隆邦)"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/qq_37338983/article/details/106461004",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-cli + three.js 解决页面跳转时Css2dObject遗留在dom的问题"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/xyphf/article/details/125082815",target:"_blank",rel:"noopener noreferrer"}},[t._v("WebGL(threeJS)给物体打标签"),n("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);
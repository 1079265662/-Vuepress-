(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{565:function(t,s,a){"use strict";a.r(s);var e=a(2),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("介绍")]),t._v(" "),a("p",[t._v("Vue2 脚手架实现静态资源(本地)下载"),a("br")])]),t._v(" "),a("h2",{attrs:{id:"什么是vue的静态资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是vue的静态资源"}},[t._v("#")]),t._v(" 什么是Vue的静态资源")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在Vue cli脚手架中 会提供两个资源目录")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("assets")]),t._v("编译资源 他会被webpack进行编译处理 适合放一些经常要替换或者Vue模板中使用的图片等资源")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/image-20220619171155446.png",alt:"image-20220619171155446"}})]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/html-and-static-assets.html#public-%E6%96%87%E4%BB%B6%E5%A4%B9",target:"_blank",rel:"noopener noreferrer"}},[t._v("public"),a("OutboundLink")],1),t._v(" 非编译静态加载 不会被webpack进行编译处理 需要和当前Vue cli环境变量"),a("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/mode-and-env.html#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("process.env.BASE_URL"),a("OutboundLink")],1),t._v("进行绝对路径的拼接 并且不可以使用相对路径 适合放一些下载模板xls,doc等 不经常替换的资源")])])])]),t._v(" "),a("h2",{attrs:{id:"下载静态资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载静态资源"}},[t._v("#")]),t._v(" 下载静态资源")]),t._v(" "),a("ul",[a("li",[t._v("通过"),a("code",[t._v("<a>")]),t._v("标签实现下载静态资源")]),t._v(" "),a("li",[t._v("xxxxxxxxxx /** * @type {formName} String * @type {obj} any * @example 表单数据(消除表单验证提示) this.$resetForm('绑定form表单的ref', this.你要重置的数据域) * @example 普通数据 this.$resetForm('', this.你要重置的数据域) */// formName: 表单的ref属性  obj表单的数据域export default function resetForm (formName, obj) {    // 清空表单    if (this.$refs[formName]) {        this.$refs[formName].resetFields()    }    // 清空数据域    Object.keys(obj).forEach(key => {        obj[key] = ''    })}​// main.js 入口文件注册// 清空表单import resetForm from '@/utils/resrtForm'Vue.prototype.$resetForm = resetFormjs")])]),t._v(" "),a("blockquote",[a("p",[t._v("第一步 封装下载静态资源 js方法")])]),t._v(" "),a("ul",[a("li",[t._v("下载"),a("code",[t._v("public")]),t._v("静态资源 一定要和当前Vue cli环境变量"),a("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/mode-and-env.html#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("process.env.BASE_URL"),a("OutboundLink")],1),t._v("进行绝对路径的拼接 不拼接会跳转页面 而非下载")]),t._v(" "),a("li",[a("code",[t._v("png")]),t._v(", "),a("code",[t._v("jpg")]),t._v(", "),a("code",[t._v("mp4")]),t._v("或者"),a("code",[t._v("pdf")]),t._v(" 这种在浏览器可以预览("),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/open",target:"_blank",rel:"noopener noreferrer"}},[t._v("Window.open()"),a("OutboundLink")],1),t._v(")的文件 通过该方法也会取消预览 直接进行下载")]),t._v(" "),a("li",[t._v("文件名称必须携带扩展名 否则会无法下载")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @author 刘凯利\n * @function 下载本地资源文件\n * @param {Object} obj 下载全部参数\n * @param {String} obj.file `file ` 文件全称包含文件扩展名(要写扩展名!)\n * @param {String} obj.fileName `fileName` 下载下来的文件名称（自定义）\n * @param {Boolean} obj.local `local` 判断是否本地资源\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 判断当前脚手架环境")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" prefixUrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/test/'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("downloadLocalFile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("fileValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fileName "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fileValue\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 路径中'/'为根目录，即index.html所在的目录")]),t._v("\n  a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" prefixUrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'upload/'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" file\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 下载下来的文件名")]),t._v("\n  a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("download "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fileName\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加点击")]),t._v("\n  a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("blockquote",[a("p",[t._v("第二步 在入口文件main.js 进行Vue原型链注册")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册本地下载")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" uploadFile "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/utils/upload'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$upload "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uploadFile\n")])])]),a("blockquote",[a("p",[t._v("第三步 在Vue中使用")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$upload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 文件全称包含文件扩展名(要写扩展名!)")]),t._v("\n        file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'partstemplate.xlsx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 下载下来的文件名称（自定义）")]),t._v("\n        fileName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'零件模板'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue3 学习手册(博客版) | LKaiLi</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="https://pan.zealsay.com/blog/favicon.ico">
    <script language="javascript" type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="/js/mouseClick.js"></script>
    <script>var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?61498f37b83812e7b85952d5feaaab47";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();</script>
    <meta name="description" content="草 走 🤸 忽略">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.1c75615b.css" as="style"><link rel="preload" href="/assets/js/app.2e49fa50.js" as="script"><link rel="preload" href="/assets/js/5.e6fb2106.js" as="script"><link rel="preload" href="/assets/js/1.0bb3dd52.js" as="script"><link rel="preload" href="/assets/js/30.5412368d.js" as="script"><link rel="prefetch" href="/assets/js/10.988ddcf1.js"><link rel="prefetch" href="/assets/js/11.69564aa3.js"><link rel="prefetch" href="/assets/js/12.ba0b832e.js"><link rel="prefetch" href="/assets/js/13.87210a62.js"><link rel="prefetch" href="/assets/js/14.6b166614.js"><link rel="prefetch" href="/assets/js/15.a39e12f0.js"><link rel="prefetch" href="/assets/js/16.9478e3b1.js"><link rel="prefetch" href="/assets/js/17.05df34f5.js"><link rel="prefetch" href="/assets/js/18.1382fbbb.js"><link rel="prefetch" href="/assets/js/19.91ea1a03.js"><link rel="prefetch" href="/assets/js/20.9dece346.js"><link rel="prefetch" href="/assets/js/21.a069e1c8.js"><link rel="prefetch" href="/assets/js/22.3b0831b9.js"><link rel="prefetch" href="/assets/js/23.3a0a33c3.js"><link rel="prefetch" href="/assets/js/24.2ad794f8.js"><link rel="prefetch" href="/assets/js/25.481c6194.js"><link rel="prefetch" href="/assets/js/26.38c0b832.js"><link rel="prefetch" href="/assets/js/27.f23e5685.js"><link rel="prefetch" href="/assets/js/28.5761a446.js"><link rel="prefetch" href="/assets/js/29.709dafe3.js"><link rel="prefetch" href="/assets/js/3.4e5d0e6c.js"><link rel="prefetch" href="/assets/js/31.2cab55c7.js"><link rel="prefetch" href="/assets/js/32.a32631ee.js"><link rel="prefetch" href="/assets/js/33.ec9053bd.js"><link rel="prefetch" href="/assets/js/34.64b6a182.js"><link rel="prefetch" href="/assets/js/35.b03e1abd.js"><link rel="prefetch" href="/assets/js/36.538f04df.js"><link rel="prefetch" href="/assets/js/37.b96e296f.js"><link rel="prefetch" href="/assets/js/38.92316bec.js"><link rel="prefetch" href="/assets/js/39.c37e36de.js"><link rel="prefetch" href="/assets/js/4.0067ce26.js"><link rel="prefetch" href="/assets/js/40.a664e7f5.js"><link rel="prefetch" href="/assets/js/41.d79d09e7.js"><link rel="prefetch" href="/assets/js/42.670fd1a7.js"><link rel="prefetch" href="/assets/js/43.340365e7.js"><link rel="prefetch" href="/assets/js/44.e0bbabfd.js"><link rel="prefetch" href="/assets/js/45.7ae479dd.js"><link rel="prefetch" href="/assets/js/46.0e76ef03.js"><link rel="prefetch" href="/assets/js/47.bb28dd7b.js"><link rel="prefetch" href="/assets/js/48.537e7a2b.js"><link rel="prefetch" href="/assets/js/49.35153b17.js"><link rel="prefetch" href="/assets/js/50.b59ef75f.js"><link rel="prefetch" href="/assets/js/51.77a293b6.js"><link rel="prefetch" href="/assets/js/52.72840d3c.js"><link rel="prefetch" href="/assets/js/53.6cfc17c3.js"><link rel="prefetch" href="/assets/js/54.e1f03d49.js"><link rel="prefetch" href="/assets/js/55.9fa8c1a7.js"><link rel="prefetch" href="/assets/js/56.adb9fb1a.js"><link rel="prefetch" href="/assets/js/57.ad41bf28.js"><link rel="prefetch" href="/assets/js/58.dd6ec020.js"><link rel="prefetch" href="/assets/js/59.30066ff0.js"><link rel="prefetch" href="/assets/js/6.b813653c.js"><link rel="prefetch" href="/assets/js/60.044b2960.js"><link rel="prefetch" href="/assets/js/61.1a9a92e1.js"><link rel="prefetch" href="/assets/js/62.0296f5d7.js"><link rel="prefetch" href="/assets/js/63.7e327297.js"><link rel="prefetch" href="/assets/js/64.f47d4414.js"><link rel="prefetch" href="/assets/js/65.673a6494.js"><link rel="prefetch" href="/assets/js/66.53e2154c.js"><link rel="prefetch" href="/assets/js/67.e6b54d4b.js"><link rel="prefetch" href="/assets/js/68.06351386.js"><link rel="prefetch" href="/assets/js/69.9483a6d1.js"><link rel="prefetch" href="/assets/js/7.d057457a.js"><link rel="prefetch" href="/assets/js/70.3026c87a.js"><link rel="prefetch" href="/assets/js/71.57b0bfa3.js"><link rel="prefetch" href="/assets/js/72.78bd1a7d.js"><link rel="prefetch" href="/assets/js/73.72fde2fc.js"><link rel="prefetch" href="/assets/js/74.7c57bd4c.js"><link rel="prefetch" href="/assets/js/75.81231e06.js"><link rel="prefetch" href="/assets/js/76.722bac51.js"><link rel="prefetch" href="/assets/js/77.9def34e5.js"><link rel="prefetch" href="/assets/js/78.a7067d1e.js"><link rel="prefetch" href="/assets/js/79.1f4e47b9.js"><link rel="prefetch" href="/assets/js/8.b1f53c13.js"><link rel="prefetch" href="/assets/js/80.d47a6824.js"><link rel="prefetch" href="/assets/js/81.2360131d.js"><link rel="prefetch" href="/assets/js/82.83359248.js"><link rel="prefetch" href="/assets/js/83.1d43b176.js"><link rel="prefetch" href="/assets/js/84.b4e575b3.js"><link rel="prefetch" href="/assets/js/85.cb0128a4.js"><link rel="prefetch" href="/assets/js/86.a63427ce.js"><link rel="prefetch" href="/assets/js/87.43b461ee.js"><link rel="prefetch" href="/assets/js/88.683fb74e.js"><link rel="prefetch" href="/assets/js/89.193ca3e3.js"><link rel="prefetch" href="/assets/js/9.4652c675.js"><link rel="prefetch" href="/assets/js/90.8affdd5e.js"><link rel="prefetch" href="/assets/js/91.0dbbc13a.js"><link rel="prefetch" href="/assets/js/92.6c5d779e.js"><link rel="prefetch" href="/assets/js/93.151f913f.js"><link rel="prefetch" href="/assets/js/94.fac0549b.js"><link rel="prefetch" href="/assets/js/95.65ebc590.js"><link rel="prefetch" href="/assets/js/96.d3e99770.js"><link rel="prefetch" href="/assets/js/97.8523e231.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1c75615b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-ec75d12e><div data-v-ec75d12e><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-ec75d12e data-v-ec75d12e><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-89477f7e data-v-ec75d12e data-v-ec75d12e><h3 class="title" style="display:none;" data-v-89477f7e data-v-89477f7e>LKaiLi</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-89477f7e data-v-89477f7e><input type="password" value="" data-v-89477f7e> <span data-v-89477f7e>Konck! Knock!</span> <button data-v-89477f7e>OK</button></label> <div class="footer" style="display:none;" data-v-89477f7e data-v-89477f7e><span data-v-89477f7e><i class="iconfont reco-theme" data-v-89477f7e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-89477f7e>vuePress-theme-reco</a></span> <span data-v-89477f7e><i class="iconfont reco-copyright" data-v-89477f7e></i> <a data-v-89477f7e><span data-v-89477f7e>LKaiLi</span>
            
          <span data-v-89477f7e>2021  - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-ec75d12e><div data-v-ec75d12e><div id="smart" class="wrapper-page" style="background-image:url(https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/wallhaven-z8dg9y.png);background-position-x:center;background-position-y:center;background-size:cover;background-repeat-x:no-repeat;background-repeat-y:no-repeat;" data-v-ec75d12e><header class="navbar" data-v-ec75d12e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="LKaiLi" class="logo"> <span class="site-name">LKaiLi</span></a> <div class="links"><div id="dayNightSwitch" class="generalWrapper" data-v-32f44868><a class="click" data-v-32f44868><div class="onOff daySwitch" data-v-32f44868><div class="star star1" data-v-32f44868></div> <div class="star star2" data-v-32f44868></div> <div class="star star3" data-v-32f44868></div> <div class="star star4" data-v-32f44868></div> <div class="star star5" data-v-32f44868></div> <div class="star sky" data-v-32f44868></div> <div class="sunMoon" data-v-32f44868><div class="crater crater1" data-v-32f44868></div> <div class="crater crater2" data-v-32f44868></div> <div class="crater crater3" data-v-32f44868></div> <div class="cloud part1" data-v-32f44868></div> <div class="cloud part2" data-v-32f44868></div></div></div></a></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/vue-element-admin/" class="nav-link"><i class="iconfont undefined"></i>
  vue-element-admin
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue3/" class="nav-link"><i class="iconfont undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vscode/" class="nav-link"><i class="iconfont undefined"></i>
  Vscode
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue移动头条项目/" class="nav-link"><i class="iconfont undefined"></i>
  Vue移动头条项目
</a></li><li class="dropdown-item"><!----> <a href="/categories/RABC/" class="nav-link"><i class="iconfont undefined"></i>
  RABC
</a></li><li class="dropdown-item"><!----> <a href="/categories/小程序/" class="nav-link"><i class="iconfont undefined"></i>
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/categories/animation/" class="nav-link"><i class="iconfont undefined"></i>
  animation
</a></li><li class="dropdown-item"><!----> <a href="/categories/axios/" class="nav-link"><i class="iconfont undefined"></i>
  axios
</a></li><li class="dropdown-item"><!----> <a href="/categories/Css/" class="nav-link"><i class="iconfont undefined"></i>
  Css
</a></li><li class="dropdown-item"><!----> <a href="/categories/other/" class="nav-link"><i class="iconfont undefined"></i>
  other
</a></li><li class="dropdown-item"><!----> <a href="/categories/uniapp/" class="nav-link"><i class="iconfont undefined"></i>
  uniapp
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      关于播客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/" class="nav-link"><i class="iconfont reco-mail"></i>
  关于我
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link"><i class="iconfont reco-account"></i>
  联系我
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-ec75d12e></div> <aside class="sidebar" data-v-ec75d12e><div class="personal-info-wrapper" data-v-03833281 data-v-ec75d12e><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/my_cat.png" alt="author-avatar" class="personal-img" data-v-03833281> <h3 class="name" data-v-03833281>
    LKaiLi
  </h3> <div class="num" data-v-03833281><div data-v-03833281><h3 data-v-03833281>82</h3> <h6 data-v-03833281>文章</h6></div> <div data-v-03833281><h3 data-v-03833281>32</h3> <h6 data-v-03833281>标签</h6></div></div> <hr data-v-03833281></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/vue-element-admin/" class="nav-link"><i class="iconfont undefined"></i>
  vue-element-admin
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue3/" class="nav-link"><i class="iconfont undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vscode/" class="nav-link"><i class="iconfont undefined"></i>
  Vscode
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue移动头条项目/" class="nav-link"><i class="iconfont undefined"></i>
  Vue移动头条项目
</a></li><li class="dropdown-item"><!----> <a href="/categories/RABC/" class="nav-link"><i class="iconfont undefined"></i>
  RABC
</a></li><li class="dropdown-item"><!----> <a href="/categories/小程序/" class="nav-link"><i class="iconfont undefined"></i>
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/categories/animation/" class="nav-link"><i class="iconfont undefined"></i>
  animation
</a></li><li class="dropdown-item"><!----> <a href="/categories/axios/" class="nav-link"><i class="iconfont undefined"></i>
  axios
</a></li><li class="dropdown-item"><!----> <a href="/categories/Css/" class="nav-link"><i class="iconfont undefined"></i>
  Css
</a></li><li class="dropdown-item"><!----> <a href="/categories/other/" class="nav-link"><i class="iconfont undefined"></i>
  other
</a></li><li class="dropdown-item"><!----> <a href="/categories/uniapp/" class="nav-link"><i class="iconfont undefined"></i>
  uniapp
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      关于播客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/" class="nav-link"><i class="iconfont reco-mail"></i>
  关于我
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link"><i class="iconfont reco-account"></i>
  联系我
</a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue3</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blogs/docs/Vue3/1.1.1_Vue_study.html" aria-current="page" class="active sidebar-link">Vue3 学习手册(博客版)</a></li><li><a href="/blogs/docs/Vue3/1.1_Vue3_install.html" class="sidebar-link">Vue3 install插件机制</a></li><li><a href="/blogs/docs/Vue3/1.2_Vue3_scrollReveal.html" class="sidebar-link">Vue3 scrollRevea组件使用方法</a></li><li><a href="/blogs/docs/Vue3/1.3_Vue3_typewriter.html" class="sidebar-link">Vue3 打字机特效</a></li><li><a href="/blogs/docs/Vue3/9_VueUse.html" class="sidebar-link">VueUse 插件方法合集</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-89477f7e data-v-ec75d12e><h3 class="title" style="display:none;" data-v-89477f7e data-v-89477f7e>Vue3 学习手册(博客版)</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-89477f7e data-v-89477f7e><input type="password" value="" data-v-89477f7e> <span data-v-89477f7e>Konck! Knock!</span> <button data-v-89477f7e>OK</button></label> <div class="footer" style="display:none;" data-v-89477f7e data-v-89477f7e><span data-v-89477f7e><i class="iconfont reco-theme" data-v-89477f7e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-89477f7e>vuePress-theme-reco</a></span> <span data-v-89477f7e><i class="iconfont reco-copyright" data-v-89477f7e></i> <a data-v-89477f7e><span data-v-89477f7e>LKaiLi</span>
            
          <span data-v-89477f7e>2021  - </span>
          2022
        </a></span></div></div></div> <div data-v-ec75d12e><main class="page"><div class="page-title" style="display:none;"><h1 class="title">Vue3 学习手册(博客版)</h1> <div class="page-info" data-v-0efa1f05><i class="iconfont reco-account" data-v-0efa1f05><span data-v-0efa1f05>LKaiLi</span></i> <i class="iconfont reco-date" data-v-0efa1f05><span data-v-0efa1f05>2099-01-27</span></i> <i class="iconfont reco-eye" data-v-0efa1f05><span id="/blogs/docs/Vue3/1.1.1_Vue_study.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-0efa1f05><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-0efa1f05><span class="tag-item" data-v-0efa1f05>Vue3</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><div class="custom-block tip"><p class="custom-block-title">介绍</p> <p>下一个目标 全面拥抱Vue3时代 <br></p></div> <h2 id="vue3的特性"><a href="#vue3的特性" class="header-anchor">#</a> Vue3的特性</h2> <blockquote><p>目标：了解vue3现状，以及它的优点，展望它的未来</p></blockquote> <ol><li>Vue3现状：</li></ol> <ul><li><a href="https://github.com/vuejs/vue-next/" target="_blank" rel="noopener noreferrer">vue-next<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 2020年09月18日，正式发布vue3.0版本。但由于刚发布周边生态不支持，大多数开发者处于观望。</li> <li>现在主流组件库都已经发布了支持vue3.0的版本，其他生态也在不断地完善中，这是趋势。
<ul><li><a href="https://element-plus.org/#/zh-CN" target="_blank" rel="noopener noreferrer">element-plus<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>   基于 Vue 3.0 的桌面端组件库</li> <li><a href="https://vant-contrib.gitee.io/vant/v3/#/zh-CN" target="_blank" rel="noopener noreferrer">vant<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  vant3.0版本，有赞前端团队开源移动端组件库</li> <li><a href="https://2x.antdv.com/components/overview/" target="_blank" rel="noopener noreferrer">ant-design-vue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>   Ant Design Vue 2.0版本，社区根据蚂蚁 ant design 开发</li></ul></li></ul> <ol start="2"><li>Vue3优点：</li></ol> <ul><li>数据具备响应式 无需调用<code>$set</code>方法</li> <li>最火框架，它是国内最火的前端框架之一，<a href="https://v3.vuejs.org/" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://v3.cn.vuejs.org/" target="_blank" rel="noopener noreferrer">中文文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>性能提升，运行速度事vue2.x的1.5倍左右</li> <li>体积更小，按需编译体积比vue2.x要更小</li> <li>类型推断，更好的支持Ts（typescript）这个也是趋势（js的超集）</li> <li>高级给予，暴露了更底层的API和提供更先进的内置组件</li> <li><font color="#ff3040"><strong>★选项API-----组合API (composition api)</strong>  ，能够更好的组织逻辑，封装逻辑，复用逻辑</font></li></ul> <ol start="3"><li><p>Vue3展望：</p> <ul><li>这是趋势，越来越多的企业将来肯定会升级到Vue3.0</li> <li>大型项目，由于对Ts的友好越来越多大型项目可以用Vue3.0</li></ul></li> <li><p><font color="#ff3040">个人展望</font></p> <ul><li>全面拥抱Vue3 有机会学习TS语言</li></ul></li></ol> <blockquote><p><strong>总结：</strong> 为什么要学 vue3 ?</p> <p>适应市场学习流行的技术提高提升自己竞争力，给自己加薪。</p></blockquote> <h2 id="创建vue应用"><a href="#创建vue应用" class="header-anchor">#</a> 创建Vue应用</h2> <blockquote><p>目标：掌握如何创建vue3应用实例</p></blockquote> <ol><li>基于Vue脚手架创建项目</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 1. 安装脚手架</span>
<span class="token function">npm</span> i @vue/cli -g
<span class="token comment"># 2. 创建vue3项目（选项中选择v3版本，其他和之前一样）不能有大写</span>
vue create 项目名称
</code></pre></div><ol start="2"><li>项目代码结构分析</li></ol> <p>落地代码：</p> <ul><li>跟组件<code>App.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 模板中不要求有唯一的跟节点 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span> |
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>入口文件<code>main.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Vue2.0的导入方法</span>
<span class="token comment">// import Vue from 'vue'</span>

<span class="token comment">// Vue3.0的导入方法</span>
<span class="token comment">// 这种导入API的方式可以减少打包后代码的体积（按需导入）</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

<span class="token comment">// Vue3的写法</span>
<span class="token comment">// createApp(App)的返回值是 Vue实例对象</span>
<span class="token comment">// use方法用于配置插件(导入插件时候 需要这样导入)</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

<span class="token comment">// Vue2的写法</span>
<span class="token comment">// new Vue({</span>
<span class="token comment">//   router,</span>
<span class="token comment">//   store,</span>
<span class="token comment">//   render: h =&gt; h(App)</span>
<span class="token comment">// }).$mount('#app')</span>
</code></pre></div><blockquote><p><strong>总结：</strong></p> <ol><li>如何创建vue应用实例？createApp</li> <li>如何创建路由实例？createRouter</li> <li>如何创建Store实例？createStore</li></ol> <p>注意：模板中可以没有唯一的跟节点。</p></blockquote> <h2 id="选项api和组合api"><a href="#选项api和组合api" class="header-anchor">#</a> 选项API和组合API</h2> <blockquote><p>目标：理解什么是选项API写法，什么是组合API写法。</p> <ol><li>选项API，之前写代码的风格，代码都是写到组件的配置选项中（methods/props/computed....）</li> <li>组合API，代码不再完全写到选项中，而是有新的规则</li></ol></blockquote> <ul><li>选项API与组合API对比分析</li></ul> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/ztBRcGELHWXrdwy.png" alt="image-20210716210942387"></p> <p>什么是选项API写法：<code>Options ApI</code></p> <ul><li>咱们在vue2.x项目中使用的就是 <code>选项API</code> 写法
<ul><li>代码风格：data选项写数据，methods选项写函数...，一个功能逻辑的代码分散。</li> <li>优点：易于学习和使用，写代码的位置已经约定好</li> <li>缺点：代码组织性差，相似的逻辑（功能）代码不便于复用，逻辑复杂代码多了不好阅读。</li></ul></li></ul> <p>什么是组合API：Composition API</p> <ul><li>以功能为单位组织代码结构，后续重用功能更加方便。</li> <li><font color="#ff3040">Vue中导入方法 需要用 import按需加载 才可以在 <code>setup()</code>里面使用该方法</font></li></ul> <blockquote><p><strong>总结：</strong> 知道选项API和组合API的写法区别，建议大家使用组合API在vue3.0项目中。</p></blockquote> <h2 id="组合api-setup-设置组合api方法"><a href="#组合api-setup-设置组合api方法" class="header-anchor">#</a> 组合API <code>setup()</code> 设置组合api方法</h2> <blockquote><p>目标：掌握<code>setup()</code>函数的基本使用</p> <p>作用: 几乎所有的js逻辑代码都是写到setup方法里</p></blockquote> <p><font color="#ff3040">setup()是什么：</font></p> <ul><li><p><code>setup()</code> 一般只能执行一次 如果数据动态修改 需要用<code>watch</code>监听</p> <ul><li>就比如 动态获取路由数据的时候 需要重新调用路由数据 获取相应的动态路由数据
<ul><li>如果监控的一级路由 存在二级路由 需要屏蔽</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>   <span class="token comment">// 储存一级分类相关的商品数据</span>
    <span class="token keyword">const</span> goods <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// watch监听动态获取的路由数据 然后重新获取新的路由数据 </span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取路由数据</span>
      <span class="token function">findTopCategory</span><span class="token punctuation">(</span>newId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// 储存一级分类相关的商品数据</span>
        goods<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>children
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">// 页面加载时候 启动监控(相当于生命周期 打开页面调用)</span>
      immediate<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p><code>setup()</code> 是一个新的组件选项，作为组件中使用组合API的起点(把一个功能全部组合起来)</p></li> <li><p><code>setup()</code>调用的时间相当于Vue2的<code>created()</code> 执行在组件创建之前</p> <ul><li><font color="#ff3040">无法使用this 需要在结尾<code>return</code>出去</font></li> <li>这就意味着在<code>setup()</code>函数中 <code>this</code> 还不是组件实例，<code>this</code> 此时是 <code>undefined</code></li></ul></li> <li><p>在模版中需要使用的数据和函数，需要在 <code>setup()</code>中<code>return</code>出去。</p></li> <li><p><font color="#ff3040">Vue中导入方法 需要用 import按需加载 才可以在 <code>setup()</code>里面使用该方法</font></p></li> <li><p><code>setup()</code> 在同一个组件中 不可以多次调用</p></li></ul> <blockquote><p>演示代码</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 模板中不要求有唯一的根节点 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span> |
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 设置点击事件 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 差值表达式插进去 --&gt;</span>
      {{msg}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// setup函数的触发时机发生在(生命周期函数)之前 此时组件尚未创建 不可以用this</span>
    <span class="token comment">// 在该函数中是没有this的 此时Vue组件实例尚未创建成功</span>

    <span class="token comment">// setup () 该函数返回值用于给组件模板提供信息(数据和函数)</span>
    <span class="token comment">// 设置一个常量</span>
    <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">'hello'</span> <span class="token comment">// 默认定义的数据不是响应式的 需要单独设置相应式</span>
    <span class="token comment">// 设置一个方法</span>
    <span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这个是方法'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// setup ()储存的数据 方法 需要return出去使用 无需this</span>
    <span class="token comment">// 返回设置的数据 和 设置的方法</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">,</span>
      fn
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><strong>总结：</strong> <code>setup</code> 组件初始化之前执行，它返回的数据和函数可在模版使用。</p> <p>注意：该函数不可以访问this，this的值为undefined</p> <h2 id="组合api-声明周期-钩子函数"><a href="#组合api-声明周期-钩子函数" class="header-anchor">#</a> 组合API <code>声明周期(钩子函数)</code></h2> <blockquote><p>目标：掌握使用组合API写法的生命周期钩子函数</p></blockquote> <ul><li><font color="#ff3040">Vue中导入方法 需要用 import按需加载 才可以在 <code>setup()</code>里面使用该方法</font></li> <li>Vue3中也支持 Vue2里面的声明周期 但是不推荐</li> <li>Vue3声明周期都是函数 需要用箭头函数方法设置</li> <li><font color="#ff3040">Vue3中的生命周期(钩子函数)</font> <ul><li><code>onBeforeMount(()=&gt;{ })</code>  挂载DOM前 (常用)</li> <li><code>onMounted(()=&gt;{ })</code> 挂载DOM后 (常用)</li> <li><code>setup(()=&gt;{ })</code> 创建实例前 (实际上就是Vue2 的<code>created</code>)</li> <li><code>onBeforeUpdate(()=&gt;{ })</code> 更新组件前</li> <li><code>onUpdated(()=&gt;{ })</code> 更新组件后</li> <li><code>onBeforeUnmount(()=&gt;{ })</code> 卸载销毁前</li> <li><code>onUnmounted(()=&gt;{ })</code>  卸载销毁后</li></ul></li></ul> <blockquote><p>对比vue2.x  左Vue2 -&gt; 右Vue3</p></blockquote> <ul><li><code>beforeCreate</code> -&gt; <code>setup()</code></li> <li><code>created</code> -&gt;  <code>setup()</code></li> <li><code>beforeMount</code> -&gt; <code>onBeforeMount</code></li> <li><code>mounted</code> -&gt; <code>onMounted</code></li> <li><code>beforeUpdate</code> -&gt; <code>onBeforeUpdate</code></li> <li><code>updated</code> -&gt; <code>onUpdated</code></li> <li><code>beforeDestroy</code> -&gt; <code>onBeforeUnmount</code></li> <li><code>destroyed</code> -&gt; <code>onUnmounted</code></li> <li><code>errorCaptured</code> -&gt; <code>onErrorCaptured</code></li></ul> <p><font color="#ff3040">所有的声明周期方法 都可以在<code>setup()</code> 里面多次调用 (一样声明周期按js默认顺序排序)</font></p> <blockquote><p>演示代码</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    container
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 必须按需导入 Vue3组合api</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onBeforeMount<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// DOM渲染前调用onBeforeMount方法</span>
    <span class="token function">onBeforeMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">// 声明周期是函数方法</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'DOM渲染前'</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.container'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token comment">// DOM渲染后调用onMounted方法</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'DOM渲染后1'</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.container'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token comment">//  setup () 里面可以多次调用一样的声明周期方法</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'DOM渲染后2'</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.container'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong></p> <ol><li>组合API的生命周期钩子有7个，</li> <li>可以多次使用同一个钩子，</li> <li>执行顺序和书写顺序相同。</li></ol> <p>注意：</p> <ol><li>兼容Vue2的生命周期，但是不建议在Vue3的项目中使用Vue2的API</li> <li>beforeCreate和created生命周期在Vue3中被setup替代了</li> <li>Vue3的生命周期直接也是在setup中进行触发，函数名称前面都添加on</li></ol> <h3 id="组件拆分后-导入-生命周期"><a href="#组件拆分后-导入-生命周期" class="header-anchor">#</a> <strong>组件拆分后 导入 <code>生命周期</code></strong></h3> <ul><li>如果子组件设置了生命周期 那么必须在父组件引入该生命周期
<ul><li>子组件的声明生命周期 设置为常量 传给父组件让父组件的生命周期调用该变量</li></ul></li></ul> <blockquote><p>调用例子</p></blockquote> <ul><li>子组件的设置 <code>js文件</code> <ul><li>子组件的生命周期设置为常量 进行导出</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导入 Vue3的ref方法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/reactivity'</span>
<span class="token comment">// 导入 Vue3的computed方法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/runtime-core'</span>
<span class="token comment">// 设置一个常量</span>
<span class="token keyword">const</span> retx <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// 设置函数方法</span>
<span class="token keyword">const</span> <span class="token function-variable function">changeN</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  retx<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token comment">// 设置计算属性</span>
<span class="token keyword">const</span> newretx <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> retx<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//! 设置需要导出的生命周期</span>
<span class="token keyword">const</span> <span class="token function-variable function">onMounted</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">changeN</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 设置需要导出的数据内容</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  onMounted<span class="token punctuation">,</span>
  changeN<span class="token punctuation">,</span>
  newretx<span class="token punctuation">,</span>
  retx
<span class="token punctuation">}</span>

</code></pre></div><ul><li>父组件的设置 <code>vue文件</code> <ul><li>父组件接收子组件的生命周期常量 导入其自身的生命周期中</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 模板中不要求有唯一的根节点 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我的初始值{{retx}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我的更新值{{newretx}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 导入子组件</span>
<span class="token keyword">import</span> model <span class="token keyword">from</span> <span class="token string">'./views/model/demob'</span>
<span class="token comment">// 导入Vue3的生命周期</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/runtime-core'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 导入子组件设置的声明周期</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> model<span class="token punctuation">.</span>onMounted<span class="token punctuation">)</span>
    <span class="token comment">// 把子组件的所有数据 导入到父组件中用来调用(声明周期可以不直接导入)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>model <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h2 id="组合api-reactive-设置多个复杂对象响应式数据-我用"><a href="#组合api-reactive-设置多个复杂对象响应式数据-我用" class="header-anchor">#</a> 组合API <code>reactive()</code> 设置多个复杂对象响应式数据 (我用)</h2> <blockquote><p>目标：掌握使用reactive函数定义响应式数据(多个数据的对象)</p></blockquote> <ul><li><font color="#ff3040">Vue中导入方法 需要用 import按需加载 才可以在 <code>setup()</code>里面使用该方法</font></li> <li><code>reactive()</code>是一个函数，它可以定义一个复杂数据类型，成为响应式数据。
<ul><li>通常用const直接设置的值 不是响应式 数据修改时候 不会动态修改 需要设置<code>reactive()</code>方法</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 模板中不要求有唯一的根节点 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ret.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 按需导入reactive()方法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// 把设置的常量数据 变为响应式数据 这样数据更新的时候 可以及时更新到设置的数据</span>
    <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'你好'</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token string">'500'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 设置更新数据的方法</span>
    <span class="token keyword">const</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      ret<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'万岁'</span>
    <span class="token punctuation">}</span>
<span class="token comment">// 返回设置的数据 和 设置的方法</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> ret<span class="token punctuation">,</span> name <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong> 通常是用来定义响应式<strong>对象数据</strong></p> <h2 id="组合api-ref-设置单个简单的响应式数据-我不用"><a href="#组合api-ref-设置单个简单的响应式数据-我不用" class="header-anchor">#</a> 组合API <code>ref()</code> 设置单个简单的响应式数据 (我不用)</h2> <blockquote><p>目标：掌握使用ref函数定义响应式数据，一般用于简单类型数据(单个数据 单个数组)</p></blockquote> <ul><li>ref函数，常用于简单数据类型定义为响应式数据</li> <li><code>watch()</code>监听 <code>ref</code>简单数据时候初始值不能为null 可以用<code>reactive()</code>来设置null</li></ul> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/YGWyVm5riUNn83Q.png" alt="image-20210727121921553"></p> <ul><li>ref函数 可以储存 字符串 和 数组(数组中可包裹对象) (单个数据 单个数组)
<ul><li>在修改值，获取值的时候 <font color="#ff3040">需要.value</font></li> <li>在模板中使用ref申明的响应式数据 <font color="#ff3040">可以省略.value</font></li></ul></li> <li>如果ref的值 在模板<code>template</code>中进行数据修改时候 无需添加<code>.value</code> 因为能在模板中修改的值 都不需要添加<code>.value</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 在模板中使用ref申明的响应式数据，可以省略.value --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>修改数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.name数据</span>
    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'ls'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">updateName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在修改值获取值的时候，需要.value</span>
      name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'zs'</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 2.age数据</span>
    <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

    <span class="token comment">// ref常用定义简单数据类型的响应式数据</span>
    <span class="token comment">// 其实也可以定义复杂数据类型的响应式数据</span>
    <span class="token comment">// 对于数据未之的情况下 ref 是最适用的</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> updateName<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>总结</p> <ol><li>当你明确知道需要的是一个响应式数据  <em>对象</em>  那么就使用 reactive 即可 其他情况使用ref</li></ol> <h2 id="组合api-torefs-解构响应数据-我用"><a href="#组合api-torefs-解构响应数据-我用" class="header-anchor">#</a> 组合API <code>toRefs()</code> 解构响应数据 (我用)</h2> <ul><li><code>toRefs()</code>有两个场景
<ul><li>第一个是 解构<code>reactive()</code>声明的数据 可以去除命名的变量 结构方便调用场景</li> <li>第二个是 父子传值的时候 接收父组件传来的参数 自动解构 直接调用即可</li></ul></li> <li><font color="#ff3040">Vue中导入方法 需要用 import按需加载 才可以在 <code>setup()</code>里面使用该方法</font></li> <li><font color="#ff3040">结构后获取内部数据值的时候需要加.value 如果<code>return</code>不需要value</font></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 使用了解构赋值语法创建了变量myTitle</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> myTitle <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token comment">// 使用数据的时候 必须要加value</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myTitle<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
</code></pre></div><h3 id="结构方便调用场景"><a href="#结构方便调用场景" class="header-anchor">#</a> <strong>结构方便调用场景</strong></h3> <blockquote><p>目标：掌握使用<code>toRefs()</code>函数转换响应式对象中<strong>某个</strong>属性为单独响应式数据，并且值是关联的。</p> <p>使用场景：把<code>reactive()</code>里面单独的响应式数据 进行单独拆分时候使用</p></blockquote> <ul><li>单独定义响应式数据(在多个响应式中 提取单独一个的值)
<ul><li><code>toRefs()</code> 和 <code>reactive()</code> 相互关联
<ul><li><code>reactive()</code> 定义了多个响应式 如果想单独调用 需要用到<code>toRefs()</code> 单独调用出来(需要<code>return</code>返回)</li> <li>如果你没有结构 想把 <code>reactive()</code>数据全部导出 就需要扩展运算符<code>...</code></li></ul></li></ul></li></ul> <blockquote><p>演示代码</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>overall-header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 4.通过toRefs解构后可以直接调用哦 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reveal-top<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>overall-header-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>overall-header-right<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> scrollReveal <span class="token keyword">from</span> <span class="token string">'scrollreveal'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1.reactive()声明数值</span>
    <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      age<span class="token operator">:</span> <span class="token number">22</span>
      name<span class="token operator">:</span> <span class="token string">'你好'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 2.通过toRefs()结构声明的数值</span>
    <span class="token keyword">const</span> retOut <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
    <span class="token comment">// 3.记得通过扩展运算符导出</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>retOut <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="父子传值场景"><a href="#父子传值场景" class="header-anchor">#</a> <strong>父子传值场景</strong></h3> <ul><li>toRefs 用于将响应式对象转换为结果对象，其中结果对象的每个属性都是指向原始对象相应属性的ref。</li> <li>常用于es6的解构赋值操作，因为在对一个响应式对象直接解构时解构后的数据将不再有响应式，而使用toRefs可以方便解决这一问题。</li> <li>toRefs后的ref数据如果是复杂类型数据时，不是原始数据的拷贝，而是引用，改变结果数据的值也会同时改变原始数据</li> <li>作用其实和 toRef 类似，只不过 toRef 是对一个个属性手动赋值，而 toRefs 是自动解构赋值。</li></ul> <blockquote><p>演示代码</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 1. 接收父组件传来的参数</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span>title<span class="token punctuation">]</span><span class="token punctuation">,</span>
  
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 2. 使用了解构赋值语法创建了变量myTitle</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> myTitle <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token comment">// 3. 内部使用数据的时候 必须要加value</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myTitle<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token comment">// 4. return的时候 不需要带.value</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> myTitle <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><ul><li><code>toRef()</code> 就不介绍了 和上面一样</li></ul> <h2 id="响应式数据使用规范"><a href="#响应式数据使用规范" class="header-anchor">#</a> 响应式数据使用规范</h2> <ul><li>尽量不要混着用，<code>reactive</code> 和 <code>ref</code> 选一种，<code>toRef</code> 和 <code>toRefs</code> 选一种，不然代码会很乱。</li> <li>我喜欢<code>reactive</code> 和<code>toRefs</code> 搭配使用 y</li></ul> <h2 id="组合api-computed计算属性"><a href="#组合api-computed计算属性" class="header-anchor">#</a> 组合API <code>computed</code>计算属性</h2> <blockquote><p>目标：掌握使用computed函数定义计算属性</p></blockquote> <ul><li><p><font color="#ff3040">Vue中导入方法 需要用 import按需加载 才可以在 <code>setup()</code>里面使用该方法</font></p></li> <li><p>计算属性不需要设置响应式数据(<code>ref</code> <code>toref</code> 数据本身就是动态计算的)</p></li> <li><p>计算属性的原数据被修改时候 会触发计算属性 同步更新新的数据(<code>setup()</code> 只能触发一次) 相当于响应式</p></li> <li><p>计算属性不支持异步(掉接口)只支持同步 <code>async</code>和<code>promise</code></p></li> <li><p><code>computed</code>函数，是用来定义计算属性的，计算属性不能修改。</p> <ul><li>计算属性自带执行 无需放在生命周期中调用 写完即可</li></ul></li> <li><p>计算属性如果在模板中调用 需要设置判断 因为计算属性有延迟 所有需要判断 否则会报错1</p></li> <li><p>计算属性不可以修改原来的数据 比如 <code>push()</code>进去一个新数据 如果需要修改原数据 需要创建一个新的变量 接收修改后的数据</p> <ul><li>计算属性接的值 如果调用 需要 <code>变量名.value</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建一个计算属性 并且设置变量接收</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 如果想调用计算属性接收的变量 需要.value</span>
list<span class="token punctuation">.</span>value 
</code></pre></div></li></ul> <blockquote><p>演示例子</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>今年：{{age}}岁<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>后年：{{newAge}}岁<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 计算属性：当你需要依赖现有的响应式数据，根据一定逻辑得到一个新的数据。</span>
    <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
    <span class="token comment">// 得到后年的年龄</span>
    <span class="token keyword">const</span> newAge <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token comment">// 该函数的返回值就是计算属性的值</span>
      <span class="token keyword">return</span> age<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>age<span class="token punctuation">,</span> newAge<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="computed计算属性-高级使用方法"><a href="#computed计算属性-高级使用方法" class="header-anchor">#</a> <code>computed</code>计算属性 高级使用方法</h3> <ul><li>计算属性的高级写法 <code>get()</code> 和 <code>set()</code> 无需设置<code>return</code> <ul><li><code>get()</code>进行普通的计算流程</li> <li><code>set(v)</code>在<code>get()</code>处理前修改需要计算数据 v是接收其数据</li></ul></li></ul> <blockquote><p>演示例子</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 模板中不要求有唯一的根节点 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我的初始值{{ret}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我的更新值{{newRet}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 导入子组件</span>
<span class="token comment">// 导入Vue3的生命周期</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/runtime-core'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置一个要修改的常量</span>
    <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> newRet <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 计算属性的高级用法</span>
      <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// get()是普通的计算处理数据</span>
        <span class="token keyword">return</span> ret<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// set(v)在get()处理前修改需要计算数据 v是接收其数据</span>
        ret<span class="token punctuation">.</span>value <span class="token operator">=</span> v
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 点击按钮 把计算属性的数据进行修改</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeN</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      ret<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">18</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 返回数据</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> changeN<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> newRet <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>目的：让计算属性支持双向数据绑定（可以更新计算属性的值，其实就是调用set方法）</p> <p>总结：计算属性两种用法</p> <ul><li>给computed传入函数，返回值就是计算属性的值</li> <li>给computed传入对象，get获取计算属性的值，set监听计算属性改变。</li></ul> <h2 id="组合api-watch-函数方法-监听数据"><a href="#组合api-watch-函数方法-监听数据" class="header-anchor">#</a> 组合API <code>watch()</code>函数方法 监听数据</h2> <blockquote><p>目标：掌握使用watch函数定义侦听器</p></blockquote> <ul><li><font color="#ff3040">Vue中导入方法 需要用 import按需加载 才可以在 <code>setup()</code>里面使用该方法</font></li> <li><code>watch()</code>监听 <code>ref</code>简单数据时候初始值不能为null 可以用<code>reactive()</code>来设置null</li></ul> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/YGWyVm5riUNn83Q.png" alt="image-20210727121921553"></p> <ul><li>定义计算属性：
<ul><li><code>watch()</code>是函数方法，是用来定义侦听器的 监听数据是否被修改
<ul><li><code>watch()</code>有两个参数 参数1是修改后的数据 参数2是修改前的数据</li></ul></li></ul></li> <li>Vue中<code>watch()</code>里面的 四种方法和两种模式
<ul><li>监听<code>ref()</code>定义的响应式数据 (监听简单数据)
<ul><li>数组方法可以监听多个 <code>ref()</code>数据</li></ul></li> <li>监听<code>reactive()</code>定义的响应式数据 (监听复杂对象数据)
<ul><li>监听<code>reactive()</code>定义的响应式数据，某一个属性</li></ul></li> <li>函数方式监听数据
<ul><li>深度监听 <code>deep: true,</code></li> <li>默认执行 <code>immediate: true</code></li></ul></li></ul></li> <li><font color="#ff3040">组件首次加载数据时，立刻触发一次  <code>immediate: true</code></font></li></ul> <h3 id="watch-函数方式-监听数据-推荐"><a href="#watch-函数方式-监听数据-推荐" class="header-anchor">#</a> <strong><code>watch()</code>函数方式 监听数据 (推荐)</strong></h3> <ul><li>函数方法监听数据 默认不支持深度监听 需要手动设置 <code>deep: true,</code></li> <li>函数方式监听指定数据 有两个属性
<ul><li>侦听对象中的子属性 <code>deep: true,</code></li> <li>组件首次加载数据时，立刻触发一次  <code>immedate: true</code></li></ul></li></ul> <blockquote><p>演示例子</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 监听的参数   </span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      uname<span class="token operator">:</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span>
      friend<span class="token operator">:</span> <span class="token punctuation">{</span>
        info<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
        ages<span class="token operator">:</span> <span class="token number">13</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>  
<span class="token comment">// 函数方式 监听数据  watch(() =&gt; 需要监控的数据, (新的值, 旧的值) =&gt; { 进行的操作 })</span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>friend<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newD<span class="token punctuation">,</span> oleD</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 设置watch()监听简单数据</span>
    <span class="token comment">// 参数1 是监听的修改后的数据</span>
    <span class="token comment">// 参数2 是监听的修改前的数据</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newD<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      <span class="token comment">// 侦听对象中的子属性 (默认不知道是啥)</span>
      deep<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// 组件首次加载数据时，立刻触发一次(默认false)</span>
      immediate<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 组件首次加载数据时，立刻触发一次 (类似生命周期)</span>
</code></pre></div><h3 id="watch-监听ref-定义的简单数据"><a href="#watch-监听ref-定义的简单数据" class="header-anchor">#</a> <strong><code>watch()</code> 监听<code>ref()</code> 定义的简单数据</strong></h3> <ul><li>监听<code>ref()</code>定义的简单响应式数据
<ul><li>适合监听里面的数据<code>ref()</code> 的简单数据</li></ul></li> <li><code>watch(监听数据,(新数据参数,旧数据参数)=&gt;{ })</code></li> <li>组件首次加载数据时，立刻触发一次  <code>immediate: true</code></li> <li><code>watch()</code>监听 <code>ref</code>简单数据时候初始值不能为null 可以用<code>reactive()</code>来设置null</li></ul> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/DRXYBMZxnaC4fzq.png" alt="image-20210727113315454"></p> <blockquote><p>演示例子</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 模板中不要求有唯一的根节点 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我的初始值{{rets}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeRet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 导入子组件</span>
<span class="token comment">// 导入Vue3的组件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置一个简单常量</span>
    <span class="token keyword">const</span> rets <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token comment">// 设置一个自增函数方法 改变数据</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeRet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 给数据点击一次 +1</span>
      rets<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 设置watch()监听简单数据</span>
    <span class="token comment">// 参数1 是监听的修改后的数据</span>
    <span class="token comment">// 参数2 是监听的修改前的数据</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>rets<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newT<span class="token punctuation">,</span>oleT</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">,</span>oleT<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 组件首次加载数据时，立刻触发一次 (类似生命周期)</span>
    <span class="token comment">// 把数据return返回出去</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> rets<span class="token punctuation">,</span> changeRet <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="watch-监听ref-多个定义的简单数据"><a href="#watch-监听ref-多个定义的简单数据" class="header-anchor">#</a> <strong><code>watch()</code> 监听<code>ref()</code>多个定义的简单数据</strong></h3> <ul><li>数组方式监听多个<code>ref()</code> 简单数据
<ul><li>设置的数组中 只要有一个 <code>ref()</code> 设置的数据变化 就会监听到</li></ul></li> <li>组件首次加载数据时，立刻触发一次  <code>immediate: true</code></li></ul> <blockquote><p>演示例子</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 模板中不要求有唯一的根节点 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{rets}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{retx}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeRet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 导入子组件</span>
<span class="token comment">// 导入Vue3的组件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置两个简单ref()数据</span>
    <span class="token keyword">const</span> rets <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> retx <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
    <span class="token comment">// 设置一个方法 修改两个简单ref()的数据</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeRet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 修改对象里面的数据</span>
      rets<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'李四'</span>
      retx<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">18</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 设置watch()监听 使用数组的方法 监听ref()的数据</span>
    <span class="token comment">// 参数1 是监听的修改后的数据</span>
    <span class="token comment">// 参数2 是监听的修改前的数据</span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>retx<span class="token punctuation">,</span> rets<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newT<span class="token punctuation">,</span>oleT</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 监听所有的修改前 修改后的数据</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">,</span>oleT<span class="token punctuation">)</span>
      <span class="token comment">// 监听指定的修改后的数据</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oleT<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oleT<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token comment">// 监听指定的修改后的数据</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 组件首次加载数据时，立刻触发一次 (类似生命周期)</span>
    <span class="token comment">// 把数据return返回出去</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> rets<span class="token punctuation">,</span> retx<span class="token punctuation">,</span> changeRet <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="watch-监听reactive-定义的复杂对象"><a href="#watch-监听reactive-定义的复杂对象" class="header-anchor">#</a> <strong><code>watch()</code> 监听<code>reactive()</code> 定义的复杂对象</strong></h3> <ul><li>监听<code>reactive()</code>定义的复杂响应式所有数据(监听所有复杂对象数据)
<ul><li>如果监听一整个对象 那么里面所有的值只要变化 就会检测到</li></ul></li> <li>可以监听指定的数据对象中的数据</li> <li>组件首次加载数据时，立刻触发一次  <code>immediate: true</code></li></ul> <blockquote><p>演示例子</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 模板中不要求有唯一的根节点 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我的初始值{{rets.age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeRet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 导入子组件</span>
<span class="token comment">// 导入Vue3的组件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置一个对象数据</span>
    <span class="token keyword">const</span> rets <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      uname<span class="token operator">:</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      friend<span class="token operator">:</span> <span class="token punctuation">{</span>
        info<span class="token operator">:</span> <span class="token string">'hello'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 设置一个修改对象数据的方法</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeRet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 修改对象里面的数据</span>
      rets<span class="token punctuation">.</span>age <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 设置watch()监听对象里面的数据</span>
    <span class="token comment">// 参数1 是监听的修改后的数据</span>
    <span class="token comment">// 参数2 是监听的修改前的数据</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>rets<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newT<span class="token punctuation">,</span>oleT</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 可以rets.来监听指定的数据对象中的数据</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">,</span>oleT<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 组件首次加载数据时，立刻触发一次 (类似生命周期)</span>
    <span class="token comment">// 把数据return返回出去</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> rets<span class="token punctuation">,</span> changeRet <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>监听<code>reactive()</code>定义的复杂响应式的某条数据(监听一个)
<ul><li>直接在 监听的两个参数后面设置监听的指定属性值即可</li></ul></li></ul> <blockquote><p>演示例子</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span>rets<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">oleT<span class="token punctuation">,</span> newT</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 监听对象里面的所有数据</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">,</span>oleT<span class="token punctuation">)</span>
  <span class="token comment">// 监听对象里面指定的数据</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oleT<span class="token punctuation">.</span>age<span class="token punctuation">,</span> newT<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>监听对象里的对象数据
<ul><li>如果监听的对象里面 还有一层数据 可以一环套一环的监听</li></ul></li></ul> <blockquote><p>演示例子</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 模板中不要求有唯一的根节点 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我的初始值{{rets.friend.ages}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeRet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 导入子组件</span>
<span class="token comment">// 导入Vue3的组件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置一个对象数据</span>
    <span class="token keyword">const</span> rets <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      uname<span class="token operator">:</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span>
      friend<span class="token operator">:</span> <span class="token punctuation">{</span>
        info<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
        ages<span class="token operator">:</span> <span class="token number">13</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 设置一个修改对象数据的方法</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeRet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 修改对象里面的数据</span>
      rets<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>ages <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 设置watch()监听对象里面的数据</span>
    <span class="token comment">// 参数1 是监听的修改后的数据</span>
    <span class="token comment">// 参数2 是监听的修改前的数据</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>rets<span class="token punctuation">.</span>friend<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newT<span class="token punctuation">,</span>oleT</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">,</span>oleT<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 组件首次加载数据时，立刻触发一次 (类似生命周期)</span>
    <span class="token comment">// 把数据return返回出去</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> rets<span class="token punctuation">,</span> changeRet <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><strong>总结：</strong> 掌握watch的各种用法。</p> <ol><li>侦听简单类型数据</li> <li>侦听对象类型数据</li> <li>侦听多个数据的变化</li> <li>侦听某个属性的变化</li></ol> <h2 id="组合api-ref-直接操作dom节点"><a href="#组合api-ref-直接操作dom节点" class="header-anchor">#</a> 组合API <code>ref()</code> 直接操作Dom节点</h2> <blockquote><p>目标：掌握使用ref属性绑定DOM或组件</p></blockquote> <p>获取DOM或者组件实例可以使用ref属性，写法和vue2.0需要区分开</p> <ul><li><p><font color="#ff3040">ref操作单个DOM元素----Vue3的规则</font></p> <ul><li>操作Dom节点 需要设置一个变量实现绑定Dom节点</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> uname <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>必须把 设置的变量 <code>return</code>出去</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">return</span> <span class="token punctuation">{</span>uname<span class="token punctuation">}</span>
</code></pre></div></li></ul> <blockquote><p>操作Dom节点例子</p></blockquote> <ul><li>操作Dom节点 需要设置一个变量实现绑定Dom节点</li> <li>必须把 设置的变量 <code>return</code>出去</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 3、在模板中绑定ref对象 --&gt;</span>
    用户名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>uname<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>handleClick<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>点击<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- Vue3中不可以直接这样批量绑定ref --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>fruits<span class="token punctuation">'</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>index<span class="token punctuation">'</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>(item, index) in list<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>{{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1、创建一个引用对象 (获取</span>
    <span class="token keyword">const</span> uname <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 获取DOM元素的方式 uname.value</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uname<span class="token punctuation">.</span>value<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 2、把ref对象提供给模板</span>
      uname<span class="token punctuation">,</span>
      handleClick
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li><font color="#ff3040"><code>:ref</code>操作 v-for循环遍历的Dom数据(多个Dom元素)</font> <ul><li>Vue3多个操作多个ref需要动态绑定 <code>:ref</code></li> <li>设置一个空数组 储存获取到的循环遍历里面的数据 然后再单独获取
<ul><li>Vue3中批量绑定<code>:ref</code>需求提供一个方法 把获取到的多个ref数据储存起来</li> <li><code>innerHTML</code>获取<code>:ref</code>标签里面的对应数据</li></ul></li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 0、在模板中绑定ref对象 --&gt;</span>
    用户名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>uname<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>handleClick<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>点击<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- Vue3中绑定ref需要设置动态绑定 :ref --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">:ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>setDom<span class="token punctuation">'</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>index<span class="token punctuation">'</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>(item, index) in list<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>{{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> toRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 1. 声明的数组数据</span>
      list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'peach'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'list'</span><span class="token punctuation">)</span>

    <span class="token comment">// 2. Vue3中批量绑定ref需求提供一个方法 把获取到的多个ref数据储存起来</span>
    <span class="token keyword">const</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> <span class="token function-variable function">setDom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 参数el是其中一个DOM元素(其中的一个数据)</span>
      <span class="token comment">// 3. 把多个ref获取的单独数据储存到数组里</span>
      fruits<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 4. 创建一个引用对象</span>
    <span class="token keyword">const</span> uname <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 5. 获取DOM元素的方式 uname.value</span>
      <span class="token comment">// console.log(uname.value.value)</span>
      <span class="token comment">// innerHTML获取标签里面的数据(ipnut获取数据用的是value)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fruits<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 6、把ref对象提供给模板</span>
      uname<span class="token punctuation">,</span>
      list<span class="token punctuation">,</span>
      setDom<span class="token punctuation">,</span>
      handleClick
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h2 id="组合api-父子传值"><a href="#组合api-父子传值" class="header-anchor">#</a> 组合API <code>父子传值</code></h2> <blockquote><p>目标：掌握使用<code>props</code>选项和<code>emits</code>选项完成父子组件通讯</p></blockquote> <ul><li><font color="#ff3040">导入组件 依旧需要   components: { }</font></li> <li>子组件接收 <code>props</code> 父组件传来的值 需要设置 <code>toRef</code>或<code>toRefs</code> 把接收到的数据 变为响应式(不可以用<code>ref</code>)</li></ul> <h3 id="父组件-传-子组件"><a href="#父组件-传-子组件" class="header-anchor">#</a> <strong>父组件 传 子组件</strong></h3> <ul><li>父组件给子组件传递数据 子组件用<code>props</code>接收</li></ul> <blockquote><p>父组件传递数据</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>父组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{money}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name">:money</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>money<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">'./Son.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    Son
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 父组件的数据传递给子组件</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> money <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><blockquote><p>子组件接收数据</p></blockquote> <ul><li>子组件需要先用 <code>props</code>接收父组件传来的数据</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>子组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{money}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Son'</span><span class="token punctuation">,</span>
  <span class="token comment">// 子组件接收父组件数据使用props即可</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    money<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token comment">// 默认传递数据为0 </span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// props 获取父组件的数据</span>
    <span class="token comment">// context 用来调用emit 触发自定义事件的函数(这里用于 子组件向父组件传值)</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span>context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取父组件数据money</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>money<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>总结：父组件向子组件传值，类型检测和Vue2相同，模板中访问<code>props</code>中的数据也是一样的</p> <p>注意：js代码中得到父组件传递的值通过<code>setup()</code>函数的参数一<code>props</code>获取。</p> <h3 id="子组件-传-父组件"><a href="#子组件-传-父组件" class="header-anchor">#</a> <strong>子组件 传 父组件</strong></h3> <ul><li>通过<code>setup()</code>函数的参数二<code>context</code>对象中<code>emit</code>方法触发子向父传值的事件。</li></ul> <blockquote><p>子组件传递数据</p></blockquote> <ul><li>通过<code>setup()</code>函数的参数二<code>context</code> 想父组件传递数据</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;div class=&quot;container&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;h1&gt;子组件&lt;/h1&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;p&gt;{{money}}&lt;/p&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;button @click=&quot;changeMoney&quot;&gt;花50元&lt;/button&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import { onMounted } from 'vue'
export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'Son',
</span><span class="token prefix unchanged"> </span><span class="token line"> // 子组件接收父组件数据使用props即可
</span><span class="token prefix unchanged"> </span><span class="token line"> props: {
</span><span class="token prefix unchanged"> </span><span class="token line">   money: {
</span><span class="token prefix unchanged"> </span><span class="token line">     type: Number,
</span><span class="token prefix unchanged"> </span><span class="token line">     default: 0
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line">   // props 获取父组件的数据
</span><span class="token prefix unchanged"> </span><span class="token line">   // context 用来调用emit 触发自定义事件的函数(这里用于 子组件向父组件传值)
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  setup (props, context) {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // 获取父组件数据money
</span><span class="token prefix unchanged"> </span><span class="token line">   console.log(props.money)
</span><span class="token prefix unchanged"> </span><span class="token line">   // 向父组件传值
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    const changeMoney = () =&gt; {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     // 消费50元
</span><span class="token prefix unchanged"> </span><span class="token line">     // 通知父组件，money需要变成50
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      context.emit('change-money', 50)
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span><span class="token prefix inserted">+</span><span class="token line">    return {changeMoney}
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span>
</code></pre></div><blockquote><p>父组件接收数据</p></blockquote> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;div class=&quot;container&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;h1&gt;父组件&lt;/h1&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;p&gt;{{money}}&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;hr&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;Son :money=&quot;money&quot; @change-money=&quot;updateMoney&quot; /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import { ref } from 'vue'
import Son from './Son.vue'
export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'App',
</span><span class="token prefix unchanged"> </span><span class="token line"> components: {
</span><span class="token prefix unchanged"> </span><span class="token line">   Son
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> // 父组件的数据传递给子组件
</span><span class="token prefix unchanged"> </span><span class="token line"> setup () {
</span><span class="token prefix unchanged"> </span><span class="token line">   const money = ref(100)
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    const updateMoney = (newMoney) =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">      money.value = newMoney
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span><span class="token prefix inserted">+</span><span class="token line">    return { money , updateMoney}
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span>
</code></pre></div><p>总结：通过setup函数的参数二context对象中emit方法触发子向父传值的事件。</p> <h2 id="语法糖-v-model-父子组件之前相互传值"><a href="#语法糖-v-model-父子组件之前相互传值" class="header-anchor">#</a> 语法糖 <code>v-model:</code> 父子组件之前相互传值</h2> <blockquote><p>目标：掌握vue3.0的v-model语法糖原理</p></blockquote> <ul><li>在Vue3中 <code>v-model:</code>的用法 类似于Vue2中的<code>.sync</code>方法 父组件 子组件双向绑定数据 省去 <code>@</code></li> <li>在vue3中<code>v-model:</code>语法糖的拆分：<code>&lt;Son :modelValue=&quot;msg&quot; @update:modelValue=&quot;msg=$event&quot; /&gt;</code></li> <li>子组件接收 <code>props</code> 父组件传来的值 需要设置 <code>toRef</code>或<code>toRefs</code> 把接收到的数据 变为响应式(不可以用<code>ref</code>)</li> <li><font color="#4ac18b"><code>v-model:</code> 有默认值 <code>modelValue</code> 默认值绑定的话 不需要设置名称 但是子组件接收需要写  <code>modelValue</code></font></li></ul> <p><font color="#ff3040">Vue2的.sync修饰符双向绑定：</font></p> <ul><li>在vue2.x的时候 <code>.sync</code>  除去v-model实现双向数据绑定的另一种方式</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- &lt;Son :money='money' @update:money=&quot;fn&quot;  /&gt; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name">:money.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>money<span class="token punctuation">'</span></span>  <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><font color="#ff3040">Vue3的v-model双向绑定:</font></p> <ul><li>在vue3.0的时候，使用 <code>v-model:money=&quot;money&quot;</code>  即可代替Vue2的 <code>.sync</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- &lt;Son :money=&quot;money&quot; @update:money=&quot;updateMoney&quot; /&gt; --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name"><span class="token namespace">v-model:</span>money</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>money<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><blockquote><p>v-model 默认名称传值</p></blockquote> <ul><li>使用<code>v-model</code>默认名称 进行父子组传值
<ul><li>父组件向子组传递数据 并且是默认名称进行传值 <code>v-model</code></li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 复选框插件 --&gt;</span>
      <span class="token comment">&lt;!-- 通过v-model默认名称传值实现父子相互传值 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxCheckbox</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>job<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>程序员<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxCheckbox</span><span class="token punctuation">&gt;</span></span> {{job}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> SubBread <span class="token keyword">from</span> <span class="token string">'./components/sub-bread.vue'</span>
<span class="token keyword">import</span> SubFilter <span class="token keyword">from</span> <span class="token string">'./components/sub-filter.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'SubCategory'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    SubBread<span class="token punctuation">,</span>
    SubFilter
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 设置勾选框的默认状态位(选中或不选中)</span>
    <span class="token keyword">const</span> job <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> job <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>子组件 接收父组件传来的值 使用 <code>update</code>进行双向绑定
<ul><li>父组件通过<code>v-model</code>默认名称进行父子传值 所以需要设置<code>update:modelValue</code> 来向父组件传递数据</li> <li>父组件通过<code>v-model</code>默认名称进行父子传值 所有接收数据 也要通过<code>'modelValue'</code>来获取父组件传来的数据</li> <li>子组件接收 <code>props</code> 父组件传来的值 需要设置 <code>toRef</code>或<code>toRefs</code> 把接收到的数据 变为响应式(不可以用<code>ref</code>)</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 父组件将原始的状态值传递给子组件并且保证响应式能力</span>
    <span class="token comment">// 子组件接收 props 父组件传来的值 需要设置 toRef或toRefs把接收到的数据 变为响应式(不可以用ref)</span>
    <span class="token keyword">const</span> checked <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token string">'modelValue'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">toggleSelect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 向父组件传入数据 取反 实现勾选效果</span>
      context<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:modelValue'</span><span class="token punctuation">,</span> <span class="token operator">!</span>checked<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><blockquote><p>v-model 命名传值</p></blockquote> <ul><li>使用<code>v-model</code>命名 进行父子组传值
<ul><li>父组件向子组传递数据 并且是命名进行传值 <code>v-model:名称</code></li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>   
    父组件设置的值 {{ret}} {{rets}} 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>    
    <span class="token comment">&lt;!-- 给子组件传递数据 --&gt;</span>  
    <span class="token comment">&lt;!-- v-model可以双向绑定父组件子组件 类似于 .sync --&gt;</span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son</span> <span class="token attr-name"><span class="token namespace">v-model:</span>ret</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ret<span class="token punctuation">'</span></span> <span class="token attr-name"><span class="token namespace">v-model:</span>rets</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>rets<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/reactivity'</span>    <span class="token comment">// 引入子组件</span>
    <span class="token keyword">import</span> son <span class="token keyword">from</span> <span class="token string">'./views/model/son.vue'</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  
        components<span class="token operator">:</span> <span class="token punctuation">{</span>   
            <span class="token comment">// 导入子组件   </span>
            son  
        <span class="token punctuation">}</span><span class="token punctuation">,</span> 
        <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token comment">// 设置传递子组件的数据   </span>
            <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>   
            <span class="token keyword">const</span> rets <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> ret<span class="token punctuation">,</span> rets <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>子组件 接收父组件传来的值 使用 <code>update</code>进行双向绑定
<ul><li>子组件接收 <code>props</code> 父组件传来的值 需要设置 <code>toRef</code>或<code>toRefs</code> 把接收到的数据 变为响应式(不可以用<code>ref</code>)</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    子组件内容 {{ret}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeRet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击改变<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 接收父组件传来的数据</span>
    ret<span class="token operator">:</span> <span class="token punctuation">{</span>
      require<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rets<span class="token operator">:</span> <span class="token punctuation">{</span>
      require<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeRet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 向父组件传值 修改父组件的数据 update双向绑定</span>
      context<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:ret'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
      context<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:rets'</span><span class="token punctuation">,</span> <span class="token string">'大家好'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> changeRet <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><strong>总结：</strong></p> <ol><li><p>vue3.0封装组件支持v-model的时候，父传子<code>:modelValue</code> 子传父 <code>@update:modelValue</code></p></li> <li><p>Vue3中的v-model的新的用法可以替代Vue2中的sync修饰符</p></li> <li><p>v-model双向绑定组件属性的规则：</p> <ol><li>父组件的绑定  v-mode:属性名称=‘数据名称’</li> <li>子组件触发更新的动作： context.emit('update:属性名称', 要更新的数据)</li></ol></li></ol> <h2 id="组合api-provide-inject-依赖注入-相互传值类似vuex"><a href="#组合api-provide-inject-依赖注入-相互传值类似vuex" class="header-anchor">#</a> 组合API <code>provide</code> <code>inject</code> 依赖注入(相互传值类似Vuex)</h2> <blockquote><p>目标：掌握使用provide函数和inject函数完成后代组件数据通讯</p> <p>使用场景：有一个父组件，里头有子组件，有孙组件，有很多后代组件，共享父组件数据。</p></blockquote> <ul><li><font color="#ff3040">注意: 依赖注入的数据 需要用 <code>.value</code> 来读取数据</font></li> <li>依赖注入 类似以Vuex 可以父组件可以直接向其他组件传递数据 直接可以接收父组件传递的数据</li></ul> <blockquote><p>原组件设置方法 进行传递</p></blockquote> <ul><li>父组件可以直接把数据传递给 子组件 孙组件 无需父传子方法传递数据(类似Vuex)
<ul><li>可以传递数据 和 函数方法</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    传递给其他组件的数据 {{ret}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sunzi</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sunzi</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 导入Vue3的方法</span>
<span class="token keyword">import</span> sunzi <span class="token keyword">from</span> <span class="token string">'@/views/model/sunzi'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/reactivity'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> provide <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/runtime-core'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 加载其他组件</span>
    sunzi
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置要传递的数据</span>
    <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
    <span class="token comment">// 设置要传递的方法</span>
    <span class="token keyword">const</span> <span class="token function-variable function">getRet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">removeRet</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      ret<span class="token punctuation">.</span>value <span class="token operator">=</span> ret<span class="token punctuation">.</span>value <span class="token operator">-</span> removeRet
    <span class="token punctuation">}</span>
    <span class="token comment">// 传递数据给其他组件</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'ret'</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span>
    <span class="token comment">// 传递方法给其他组件</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'getRet'</span><span class="token punctuation">,</span> getRet<span class="token punctuation">)</span>
    <span class="token comment">// 返回数据</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> getRet<span class="token punctuation">,</span> ret <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><blockquote><p>子组件接收原组件传来的数据</p></blockquote> <ul><li>接收原组件传来的数据和方法
<ul><li>通过原组件传来的方法 修改原组件的数据</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    接收传来的值 并且修改{{ret}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remove<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>减少20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/runtime-core'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 接收传递的数据</span>
    <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'ret'</span><span class="token punctuation">)</span>
    <span class="token comment">// 接收传递的方法</span>
    <span class="token keyword">const</span> getRet <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'getRet'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 给接收的方法 设置子组件数据 并传回原组件进行修改</span>
      <span class="token function">getRet</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> ret<span class="token punctuation">,</span> remove <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong></p> <ol><li><code>provide</code>函数提供数据和函数给后代组件使用
<ul><li>提供的函数方法可以用来 计算传递过去的原数据 进行原数据修改</li></ul></li> <li><code>inject</code>函数给当前组件注入<code>provide</code>提供的数据和函数</li></ol> <p>注意：传递数据的目的是从上向下传递数据；传递函数的目的是为了从下向上传递数据。</p> <h2 id="创建vue3的-全局实例化"><a href="#创建vue3的-全局实例化" class="header-anchor">#</a> 创建Vue3的 <code>全局实例化</code></h2> <ul><li>Vue3脚手架换进下 在 <code>main.js</code>文件夹里面 设置全局方法
<ul><li><code>createApp(App)</code> 是Vue3的全局方法实例</li></ul></li> <li>Vue3的全局 api方法官方示例 <a href="https://cn.vuejs.org/v2/api/#%E5%85%A8%E5%B1%80-API" target="_blank" rel="noopener noreferrer">官方Vue全局方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>Vue2的全局方法 Vue3也可以用 但是需要从<code>createApp(App)</code> 调用</li></ul></li> <li>全局实例化 通常被用于实例化 插件 和 自定义方法</li></ul> <blockquote><p>main.js 设置全局方法</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 这种导入api的方法可以减少打包后的体积(按需导入)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

<span class="token comment">// 设置Vue3的全局方法实例</span>
<span class="token comment">// 代替了Vue2的 Vue.的全局方法</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

<span class="token comment">// 全局过滤器方法</span>
app<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 全局混入mixin(Vue3 只推荐全局)</span>
app<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Vue3的挂载实例化对象的方法 .use()方法用于配置插件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="vue3自定义插件机制-install"><a href="#vue3自定义插件机制-install" class="header-anchor">#</a> Vue3自定义插件机制 <code>install</code></h2> <p><a href="https://v3.cn.vuejs.org/guide/plugins.html#%E6%8F%92%E4%BB%B6" target="_blank" rel="noopener noreferrer">Vue3插件机制官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>目标：熟悉Vue的插件机制（针对Vue核心规则的一种扩展机制）</p></blockquote> <ul><li>Vue3配置全局插件是 app. (Vue2是 Vue.)</li> <li>Vue3设置插件的时候 设置插件的Vue组件需要 设置<code>name</code>属性</li></ul> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/kaSbDBwVJC32TEh.png" alt="image-20210722165649300"></p> <h3 id="设置vue3自定义插件-install"><a href="#设置vue3自定义插件-install" class="header-anchor">#</a> <strong>设置Vue3自定义插件 <code>install</code></strong></h3> <p><a href="https://v3.cn.vuejs.org/guide/plugins.html#%E6%8F%92%E4%BB%B6" target="_blank" rel="noopener noreferrer">Vue3插件机制官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>第一步 把写好的Vue组件 设置为插件</p></blockquote> <ul><li><p>把写好的Vue组件 在一个文件中 统一设置为插件</p></li> <li><p>设置插件的Vue组件需要 设置<code>name</code>属性</p> <ul><li><code>app.component</code> 设置插件的名称 需要和 组件内部设置的name名称一致</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导入需要设置为插件的Vue组件</span>
<span class="token keyword">import</span> XtxSkeleton <span class="token keyword">from</span> <span class="token string">'./xtx-skeleton.vue'</span>

<span class="token comment">// 自定义一个插件导出</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 配置全局插件 app.component 设置插件的名称 需要和 组件内部设置的name名称一致</span>
    <span class="token comment">// app表示Vue全局插件的实例对象 (Vue2是Vue. Vue3是app.)</span>
  app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>XtxSkeleton<span class="token punctuation">.</span>name<span class="token punctuation">,</span> XtxSkeleton<span class="token punctuation">)</span> <span class="token comment">// (导入组件的名称的name名.name,插件的名称)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>第二步 实例化插件 让其能在Vue组件中使用</p></blockquote> <ul><li>入口文件一般是 <code>main.js</code></li> <li>通过 <code>.use(插件名称)</code> 实例化该插件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导入实例化的Vue3</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token comment">// 导入自定义插件的配置文件 让其实例化 可在组件内使用</span>
<span class="token keyword">import</span> XtxUI <span class="token keyword">from</span> <span class="token string">'./components/library/index'</span>

<span class="token comment">// 在createApp(App)后面 .use()导入自定义的插件</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>XtxUI<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre></div><blockquote><p>第三步 实例化插件后 无需导入 直接在Vue组件中使用</p></blockquote> <ul><li>无需导入 直接在<code>template</code> 模板中调用插件即可(导入配置的插件名称)</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-banner<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 直接导入插件即可 可以在里面绑定参数 --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxSkeleton</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>注意:</p> <p>​	如果需要给插件传递参数 通常会动态绑定数据<code>:</code> ( 动态绑定基本类型的传入插件的数据 可保证插件需求的数据类型)</p> <h3 id="批量导入vue插件方法"><a href="#批量导入vue插件方法" class="header-anchor">#</a> <strong>批量导入Vue插件方法</strong></h3> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/QCNwM1VujSiFLZs.png" alt="image-20210725010517653"></p> <ul><li>适用于 所有插件都集合在一个文件夹 (index.js里面)</li> <li>通过<code>require</code>方法筛选插件 然后<code>importFn</code>进行批量导入插件方法 然后批量<code>component</code>实例化Vue插件</li> <li>无需<code>import</code>导入</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// -------------------------------------- 批量导入Vue插件</span>
<span class="token comment">// 参数一：从哪个目录中读取文件</span>
<span class="token comment">// 参数二：是否读取子目录中的文件：true读取子目录，false不读取子目录</span>
<span class="token comment">// 参数三：读取文件的匹配规则</span>
<span class="token keyword">const</span> importFn <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
<span class="token comment">// 自定义一个插件方法导出</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 批量注册 -------------------------------------------------------------------</span>
    <span class="token comment">// 自动化批量注册全局组件</span>
    importFn<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">componentPath</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// componentPath表示其中一个组件的路径</span>
      <span class="token comment">// 根据路径导入组件</span>
      <span class="token comment">// 返回值component表示组件的实例对象</span>
      <span class="token keyword">const</span> component <span class="token operator">=</span> <span class="token function">importFn</span><span class="token punctuation">(</span>componentPath<span class="token punctuation">)</span><span class="token punctuation">.</span>default
      <span class="token comment">// 注册全局组局</span>
      app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>component<span class="token punctuation">.</span>name<span class="token punctuation">,</span> component<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="vue3的-mixin混入"><a href="#vue3的-mixin混入" class="header-anchor">#</a> Vue3的 <code>mixin</code>混入</h2> <blockquote><p><strong>总结：</strong> 在vue2.0中一些可复用的逻辑可以使用mixin来封装，防止相同逻辑的代码在组件中存在冗余。vue3.0的组合API很好的解决了这个问题，就不在推荐使用mixin了。</p> <p>注意：实际上组合API的模式替代了mixin的应用场景。</p></blockquote> <ul><li><p>mixin 全局混入的特性是 所有的其他组件都可以使用</p></li> <li><p>Vue3 如果想在生命周期中触发全局混入 不能用Vue3的声明周期 需要写Vue2的 <code>created()</code>声明周期中</p></li> <li><p>Vue3中有组合api 不推荐使用 局部混入 全局混入可以使用</p></li></ul> <blockquote><p>全局混入例子</p></blockquote> <ul><li>脚手架环境下 <code>main.js</code>文件 设置全局混入</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js设置全局混入</span>

<span class="token comment">// 这种导入api的方法可以减少打包后的体积(按需导入)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

<span class="token comment">// 设置Vue3的全局方法实例</span>
<span class="token comment">// 代替了 Vue2的 Vue.的全局方法</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

<span class="token comment">// 设置全局混入mixin</span>
app<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 设置全局混入的methods方法</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">sayHello</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Vue3的挂载实例化对象的方法 .use()方法用于配置插件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre></div><ul><li>Vue文件中 导入全局混入方法</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 直接给点击事件绑定混入 点击后触发混入 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sayHello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>全局混入按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// Vue3 在声明周期中导入混入方法 (不要用Vue3的声明周期方法)</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><strong>总结：</strong> 在vue2.0中一些可复用的逻辑可以使用mixins来封装，防止相同逻辑的代码在组件中存在冗余。但是vue3.0的组合API很好的解决了这个问题，就不在推荐使用mixins了。</p> <p>注意：实际上组合API的模式替代了mixin的应用场景。</p> <h2 id="vue3-promise-掉接口方法"><a href="#vue3-promise-掉接口方法" class="header-anchor">#</a> Vue3 <code>promise</code> 掉接口方法</h2> <ul><li>Vue3 <code>promise</code>的掉接口 赋值方法( 获取服务器的数据)</li></ul> <blockquote><p><code>promise</code> 掉接口方法 (不传参)</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token comment">// 导入Vue3 ref方法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-demi'</span>
<span class="token comment">// 导入获取数据的接口api</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> findBanner <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../../api/home'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'HomeBanner'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建一个ref响应式 接收服务器的数据 (ref可以存数组)</span>
    <span class="token keyword">const</span> slides <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// 储存获取到的服务器数据</span>
    <span class="token function">findBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">ret</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果获取成功 把服务器的数据 储存起来</span>
      slides<span class="token punctuation">.</span>value <span class="token operator">=</span> ret<span class="token punctuation">.</span>result
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果获取失败 打印错误</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> slides <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><blockquote><p><code>promise</code> 掉接口方法 (传参)</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// promise 掉接口方法 (传参)</span>
<span class="token function">findBanner</span><span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">ret</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果获取成功 把服务器的数据 储存起来</span>
      slides<span class="token punctuation">.</span>value <span class="token operator">=</span> ret<span class="token punctuation">.</span>result
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果获取失败 打印错误</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> slides <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>总结:</p> <ol><li>基于<code>promise</code>方式 获取服务器的数据</li></ol> <h2 id="vue3-v-slot-插槽设置"><a href="#vue3-v-slot-插槽设置" class="header-anchor">#</a> Vue3 <code>v-slot</code> 插槽设置</h2> <ul><li>插槽，我们想象一下电脑的主板，主板上面有很多插槽，而每个插槽可能对应了不同的配置，那么在vue中，也可以这么来理解，各个插槽有各个插槽的功能，它们相互独立，可用于组件之间通信。</li> <li>Vue3中也支持 <code>v-slot</code> 并且支持其简写 <code>#</code> <ul><li><code>v-slot</code> 和 <code>#</code> 是具名插槽
<ul><li>具名插槽 导入的时候 需要 <code>&lt;slot name=&quot;具名插槽名称&quot; /&gt;</code></li></ul></li> <li><code>&lt;slot /&gt;</code> 是默认插槽
<ul><li>默认插槽 导入的时候 直接<code>&lt;slot /&gt;</code></li></ul></li></ul></li></ul> <p><font color="#ff3040">在同一组件中 设置了一部分具名插槽 剩下的部分会自动为默认插槽</font></p> <blockquote><p>插槽例子</p></blockquote> <ul><li>设置作用域插槽 (具名 和 默认)</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-new<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HomePanel</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新鲜好物<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sub-title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新鲜出炉 品质靠谱<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 具名插槽的数据 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxMore</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 默认插槽的数据 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in goods<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`/product/${item.id}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.picture<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="&amp;yen;">&amp;yen;</span>{{item.price}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HomePanel</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
import { ref } from 'vue'
// 导入调用插槽的模板
import HomePanel from './home-pannel.vue'
import { findNew } from '@/api/home'
export default {
  name: 'HomeNew',
  // 使用导入的插槽模板
  components: { HomePanel },
  setup () {
    const goods = ref([])
    findNew().then(data =&gt; {
      goods.value = data.result
    })
    return { goods }
  }
}
</code></pre></div><ul><li>在插槽组件中 导入具名插槽和默认插槽 进行数据加工</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 好物推荐的整体 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-panel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>head<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">&gt;</span></span>{{ subTitle }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 具名插槽：用于填充右侧内容(好物推荐整体上面右侧的查看全部)--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 默认插槽: (好物推荐整体下面商品内容) --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue3-的动画过度-transition"><a href="#vue3-的动画过度-transition" class="header-anchor">#</a> Vue3 的动画过度 <code>Transition</code></h2> <p><a href="https://v3.cn.vuejs.org/api/built-in-components.html#transition" target="_blank" rel="noopener noreferrer">Vue的动画介绍<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p><strong>目标：</strong> 知道vue中如何使用动画，知道Transition组件使用。</p></blockquote> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/iqIeRO7NyjCQD1m.png" alt="1616576876892"></p> <ul><li>Vue提供的一个标签 <code>&lt;Transition name=&quot;类名&quot;&gt;&lt;/Transition&gt;</code> 把需要动画效果的内容 包住 让其拥有动画效果</li> <li>name 提供的样式绑定类名 需要绑定css样式 才能生效动画效果( 推荐绑定到全局样式 设置过度效果显示隐藏 )</li> <li>Vue动画有六个类(都需要设置)
<ul><li>离开前 离开后</li> <li>显示前 显示后</li> <li>动画前 动画后</li></ul></li> <li>多个transition使用不同动画，修改name属性即可。</li> <li>动画过度会被缓存 相同的组件 只会执行一次动画 需要动态绑定 <code>:key</code> 让其变为不同组件</li></ul> <blockquote><p>使用案例</p></blockquote> <ul><li>Vue模板绑定 <code>&lt;Transition name=&quot;类名&quot;&gt;&lt;/Transition&gt;</code> 设置动画</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 绑定动画模板 name是样式绑定类 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fade<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 这里填充需要动画的内容 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
            过度动画的效果
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Transition</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>css 动画效果设置
<ul><li>可以写在 style 但是推荐写在全局样式文件中 全局设置</li> <li>中间过度细节 可以只设置 进入的时候</li></ul></li></ul> <div class="language-less extra-class"><pre class="language-less"><code><span class="token comment">// 这里是Vue的过度动画效果(name名是fade)</span>

<span class="token comment">//开始时候的效果(默认是 opacity: 1;)</span>
<span class="token selector">.fade-enter-to,
.fade-leave-from</span> <span class="token punctuation">{</span>
  <span class="token comment">// 设置为隐藏</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 中间的过度细节</span>
.fade<span class="token operator">-</span>enter<span class="token operator">-</span>active<span class="token punctuation">,</span> <span class="token comment">//进入的时候</span>
.fade<span class="token operator">-</span>leave<span class="token operator">-</span>active <span class="token comment">// 离开的时候(通常不设离开样式)</span>
<span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token comment">// 设置动画过度显示效果</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.5s 0.2s<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 结束的时候</span>
<span class="token selector">.fade-enter-from,
.fade-leave-to</span> <span class="token punctuation">{</span>
  <span class="token comment">// 设置为显示</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>注意：多个transition使用不同动画，可以添加name属性，name属性的值替换v即可。</p> <h3 id="过度动画执行顺序-mode"><a href="#过度动画执行顺序-mode" class="header-anchor">#</a> <strong>过度动画执行顺序 <code>mode</code></strong></h3> <ul><li><strong>默认情况下，进入动画和离开动画是同时进行的。</strong></li> <li>可以通过<code>mode</code>设置过度动画的执行顺序
<ul><li><code>mode='out-in'</code> <strong>先离开后进入</strong></li> <li><code>mode='n-out'</code> 先进入后离开</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 设置先离开后进入 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>class-name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>out-in<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!-- 需要动画效果的内容 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vu3-自定义实例化方法mounted"><a href="#vu3-自定义实例化方法mounted" class="header-anchor">#</a> Vu3 自定义实例化方法<code>mounted</code></h2> <p><a href="https://v3.cn.vuejs.org/api/options-lifecycle-hooks.html#mounted" target="_blank" rel="noopener noreferrer">mounted自定义实例化方法介绍<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>Vue支持自定义插件 也支持自定义实例化方法
<ul><li><code>mounted</code>设置自定义方法后 需要<code>install</code>导出自定义方法 (<code>install</code> 也可以导出插件)</li> <li>1导出方法后 通过 入口文件 <code>use.()</code>实例化自定义方法</li> <li>Vue自定义实例化方法在模板使用时候需要 <code>v-方法名称</code></li></ul></li> <li>Vue2自定义实例化方法是 <code>Vue.</code> Vue3自定义实例化方法是 <code>app.</code></li> <li>代替<code>:src</code> 动态绑定图片路径方法</li></ul> <p><a href="">懒加载图片的自定义实例化方法案例</a></p> <h2 id="vue3中的-vue-router"><a href="#vue3中的-vue-router" class="header-anchor">#</a> Vue3中的 <code>Vue Router</code></h2> <ul><li>Vue3的 Vue Router 也需要按需导入 才能使用router的api</li> <li><code>import { useStore } from 'vuex'</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导入Vue router方法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
 <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// 实例化Vue router方法</span>
    <span class="token comment">// route相当于之前的this.$route</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 获取动态路由传来的id值</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="vue3-动态路由-携带id设置"><a href="#vue3-动态路由-携带id设置" class="header-anchor">#</a> <strong>Vue3 动态路由 携带id设置</strong></h3> <ul><li>router路由组件配置
<ul><li>动态路由通常是二级组件 <code>children</code></li> <li><code>path</code>是设置路由地址 根据动态地址后缀获取传递的数据 <code>componen</code>配置路由组件</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 声明常量的方式按需配置路由</span>
<span class="token comment">// 导入一级路由组件</span>
<span class="token keyword">const</span> <span class="token function-variable function">Layout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/layout'</span><span class="token punctuation">)</span>
<span class="token comment">// 导入二级路由组件(动态路由)</span>
<span class="token keyword">const</span> <span class="token function-variable function">FirstCategory</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/category/index'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 一级路由地址</span>
    path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token comment">// 导入一级路由组件</span>
    component<span class="token operator">:</span> Layout<span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 配置二级路由(动态路由)路径携带其id值 并且导入组件</span>
      <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/category/:id'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> FirstCategory <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="配置动态路由传值"><a href="#配置动态路由传值" class="header-anchor">#</a> <strong>配置动态路由传值</strong></h3> <ul><li>一级路由携带id配置动态路由
<ul><li>基于<code>&lt;RouterLink&gt;</code>跳转方式(类似于a标签)</li> <li>使用模板字符串传递动态路由参数</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!-- RouterLink跳转配置动态路由数据 使用模板字符串 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub in item.children<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub.id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`/category/sub/${sub.id}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          {{ 我是动态路由 }}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>二级路由接收一级路由跳转传入的动态路由数据
<ul><li>Vue3的 Vue Router 也需要按需导入 才能使用router的api</li> <li><code>import { useStore } from 'vuex'</code></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导入Vue router方法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
 <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// 实例化Vue router方法</span>
    <span class="token comment">// route相当于之前的this.$route</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 获取动态路由传来的id值</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="切换路由后滚动到顶部"><a href="#切换路由后滚动到顶部" class="header-anchor">#</a> <strong>切换路由后滚动到顶部</strong></h3> <ul><li>只要切换路由组件(切换地址) 就会默认滚到顶部(一级二级都会触发)</li> <li><code>scrollBehavior ()</code> 方法可以设置滚到顶部</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 设置Vue router实例化</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 设置hash路径方式</span>
  history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// 映射 router配置的路由(配置的路由组件)</span>
  routes<span class="token punctuation">,</span>
  <span class="token comment">// Vue router的切换路由 滚动到顶部</span>
  <span class="token function">scrollBehavior</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// x: 0, y: 0 // vue2</span>
      <span class="token comment">// left控制页面水平方向滚动</span>
      <span class="token comment">// top控制垂直方向滚动</span>
      left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 导出router实例化对象</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre></div><h3 id="处理跳转细节"><a href="#处理跳转细节" class="header-anchor">#</a> <strong>处理跳转细节</strong></h3> <blockquote><p>目的: 在路由跳转的时候，优化跳转的细节。</p></blockquote> <p>大致需求：</p> <ul><li>通过<code>watch</code>监听变化 从而获取相应的数据 会导致非本级路由触发<code>watch</code>(<code>watch</code>无法判断是否是一级二级)</li> <li>切换到二级类目路由的时候也有ID，但是也触发了<code>watch</code>导致发送了请求，需要处理。</li> <li>通过<code>indexOf</code> 来判断是否存在二级路由 如果存在 <code>return</code>出去</li></ul> <blockquote><p>案例: 处理watch 筛选二级路由</p></blockquote> <ul><li>判断是否存在<code>/category/sub</code>二级路由 如果存在 筛选出去 不调用接口方法
<ul><li>通过<code>indexOf</code> 来判断是否存在二级路由 如果存在 return出去</li></ul></li></ul> <div class="language-JS extra-class"><pre class="language-js"><code>    <span class="token comment">// 获取一级分类相关的商品数据</span>
    <span class="token keyword">const</span> goods <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// 只要路由参数params.id值发生变化，那么就会触发侦听（一级和二级分类都是动态路由）</span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 监控路由的变动 获取路由相应的数据</span>
      <span class="token comment">// 屏蔽掉二级分类路由参数的变化</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      <span class="token comment">// 进行查询 如果查询到'/category/sub' 就让其return(查不到是-1 查到是1)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'/category/sub'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
      <span class="token function">findTopCategory</span><span class="token punctuation">(</span>newId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        goods<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>children
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">// 页面加载时候 启动watch</span>
      immediate<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>**总结：**跳转的时候需要注意些细节</p> <h2 id="vue3的nexttick-dom节点加载完毕后执行"><a href="#vue3的nexttick-dom节点加载完毕后执行" class="header-anchor">#</a> Vue3的<code>nextTick(()=&gt;{})</code> Dom节点加载完毕后执行</h2> <ul><li><strong>当数据更新了，在dom中渲染完毕后，自动执行<code>nextTick()</code>里面的代码，</strong></li> <li>在Vue3中 需要按需导入<code>nextTick</code>才可以使用</li> <li>通常先置空数据(null) 然后通过<code>nextTick()</code>重新赋值 实现响应式数据
<ul><li>保证之前的数据先清空，然后，再重新赋值新的数据</li></ul></li></ul> <blockquote><p>使用案例:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 通过watch 监控是否切换路由 如果切换路由重新获取数据</span>
  <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 只监控当前页面的路由</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>path <span class="token operator">!==</span> <span class="token string">'/product/'</span> <span class="token operator">+</span> newId<span class="token punctuation">)</span> <span class="token keyword">return</span>
     <span class="token comment">// 调用接口获取新的信息数据</span>
    <span class="token function">findGoods</span><span class="token punctuation">(</span>newId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 先置空之前的数据</span>
      goodDetail<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token comment">// 然后通过nextTick()组价加载完成后执行 获取数据</span>
      <span class="token comment">// 保证之前的商品数据先清空，然后，再重新赋值新的数据</span>
      <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token comment">// 把新的信息数据储存</span>
        goodDetail<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">.</span>result
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    immediate<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="vue3-组合方式-拆分组件"><a href="#vue3-组合方式-拆分组件" class="header-anchor">#</a> Vue3 组合方式 拆分组件</h2> <ul><li>如果一个组件中 有多个功能全部写在<code>setup()</code>里 不方便维护 所以把每个功能拆分出来 再导入</li> <li>简化<code>setup()</code>中的代码，方便代码的重用和后期的维护</li> <li>拆分的名称 和 导入的名称 不要一致 (不能重名)</li></ul> <blockquote><p>无需传参的拆分</p></blockquote> <ul><li>无需设置参数 直接拆分即可</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 把一个功能全部代码拆分</span>
    <span class="token keyword">const</span> <span class="token function-variable function">useGoods</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token comment">// 功能的全部代码(假设有)</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'XtxGoodsPage'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> GoodsRelevant<span class="token punctuation">,</span> GoodsImage <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// 导入拆分的代码</span>
    <span class="token comment">// 简化setup中的代码，方便代码的重用和后期的维护</span>
    <span class="token keyword">const</span> goodsDetail <span class="token operator">=</span> <span class="token function">useGoods</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// return出去导入的拆分代码</span>
    <span class="token comment">// 这里是template模板中需要的数据</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> goodsDetail <span class="token punctuation">}</span> 

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>需要传参的拆分</p></blockquote> <ul><li>有时候需要获取父组件传来的值 <code>props</code> 和 <code>setup()</code>方法(字串符 <code>emit</code>)就需要传参</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token comment">// 把一个功能全部代码拆分</span>
    <span class="token comment">// 接收拆分后的参数</span>
    <span class="token keyword">const</span> <span class="token function-variable function">useGoods</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span>emit</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token comment">// 功能的全部代码(假设有)</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'XtxGoodsPage'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> GoodsRelevant<span class="token punctuation">,</span> GoodsImage <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span><span class="token punctuation">{</span>emit<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 结构赋值 emit </span>
     <span class="token comment">// 导入拆分的代码</span>
     <span class="token comment">// 如果需要传参 需要设置参数 </span>
    <span class="token keyword">const</span> goodsDetail <span class="token operator">=</span> <span class="token function">useGoods</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span>emit<span class="token punctuation">)</span>
    <span class="token comment">// return出去导入的拆分代码</span>
    <span class="token comment">// 这里是template模板中需要的数据</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> goodsDetail <span class="token punctuation">}</span> 

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h2 id="vue3-重置对象方法"><a href="#vue3-重置对象方法" class="header-anchor">#</a> Vue3 重置对象方法</h2> <ul><li>Vue2中 可以用<code>$options</code>来重置对象里面内容</li> <li>在Vue3中不能使用<code>$options</code> 所以需要遍历 来重置对象里面的数据
<ul><li>通过 <code>for in</code> 来实现重置对象里面的数据</li></ul></li></ul> <blockquote><p>重置对象方法案例</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">// 需要重置的对象数据</span>
    <span class="token keyword">const</span> changeResult <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      provinceCode<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      provinceName<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      cityCode<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      cityName<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      countyCode<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      countyName<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      fullLocation<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token comment">// 打开弹窗时，重置数据</span>
    <span class="token keyword">const</span> <span class="token function-variable function">toggle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> changeResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// key是属性名(键)</span>
        changeResult<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
</code></pre></div><h2 id="vue3的深度选择器-deep"><a href="#vue3的深度选择器-deep" class="header-anchor">#</a> Vue3的深度选择器 <code>:deep()</code></h2> <ul><li>深度选择器通常作用于修改封装好组件的样式 覆盖组件之前的样式</li> <li>Vue3的深度选择器 <code>:deep(类名)</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// Vue3中深度选择器使用规则 :deep(类名)</span>
   <span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>xtx<span class="token operator">-</span>carousel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    height<span class="token operator">:</span> <span class="token number">380</span>px<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
</code></pre></div><h2 id="vue3组件的控制component"><a href="#vue3组件的控制component" class="header-anchor">#</a> Vue3组件的控制<code>component</code></h2> <ul><li>Vue.js是由多个组件(component)组合而成的</li> <li><code>&lt;component :is=''&gt;&lt;/component&gt;</code> 相当于有 直接导入组件 不是动态的 可以实现切换不同的组件(显示与隐藏)
<ul><li><code>:is</code> 是动态绑定导入的组件名</li></ul></li> <li>通常可以用 <code>component</code>来实现选项卡功能</li> <li>此方法可以代替 <code>v-if</code>来实现组件的显示与隐藏</li></ul> <blockquote><p>点击后 动态切换组件</p></blockquote> <ul><li>设置点击事件 携带需要切换的组件名称 实现点击后 切换相应的组件
<ul><li>切换原理: 点击后 获取传来的组件名参数 赋值给控制组件切换的变量 实现动态切换组件</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 设置点击事件 携带需要切换的组件名称 实现点击后 切换相应的组件 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>toggle(<span class="token punctuation">&quot;</span>GoodsDetail<span class="token punctuation">&quot;</span>)<span class="token punctuation">'</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>商品详情<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>toggle(<span class="token punctuation">&quot;</span>GoodsComment<span class="token punctuation">&quot;</span>)<span class="token punctuation">'</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>商品评价<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>componentName<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 导入模拟要动态切换的组件</span>
<span class="token keyword">import</span> GoodsDetail <span class="token keyword">from</span> <span class="token string">'./goods-detail.vue'</span>
<span class="token keyword">import</span> GoodsComment <span class="token keyword">from</span> <span class="token string">'./goods-comment.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'GoodsTabs'</span><span class="token punctuation">,</span>
    <span class="token comment">// 导入模拟切换的组件</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> GoodsDetail<span class="token punctuation">,</span> GoodsComment <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//  当前组件的名称(默认显示的组件)</span>
    <span class="token keyword">const</span> componentName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'GoodsDetail'</span><span class="token punctuation">)</span>
    <span class="token comment">// 点击后 获取传来的组件名参数 赋值给控制组件切换的变量 实现动态切换组件</span>
    <span class="token keyword">const</span> <span class="token function-variable function">toggle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 把点击携带的组件名赋值给 控制组件切换的变量</span>
      componentName<span class="token punctuation">.</span>value <span class="token operator">=</span> name
    <span class="token punctuation">}</span>
   <span class="token comment">// 把控制组件切换的变量返回</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> toggle<span class="token punctuation">,</span> componentName <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue3在模板内设置样式-style"><a href="#vue3在模板内设置样式-style" class="header-anchor">#</a> Vue3在模板内设置样式 <code>:style</code></h2> <ul><li>Vue3的模板 可以直接绑定事件 不需要 <code>.native</code>可以直接绑定事件</li> <li><code>:style</code>可以直接在模板上 设置样式(高权重) 事件监听也支持</li> <li>可以在导入的组件上 直接设置<code>:style</code></li></ul> <blockquote><p>简单案例</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 导入的组件上面绑定的原生属性会自动绑定到组件的根节点上 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxButton</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{marginTop: <span class="token punctuation">&quot;</span>20px<span class="token punctuation">&quot;</span>}<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>primary<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>加入购物车<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxButton</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue3接收父组件传来的固定值-非动态值-attrs"><a href="#vue3接收父组件传来的固定值-非动态值-attrs" class="header-anchor">#</a> Vue3接收父组件传来的固定值(非动态值) <code>attrs</code></h2> <ul><li><code>props</code>可以接收父组件传来的 动态数据</li> <li><code>attrs</code>可以接收父组件传来的 固定数据 就算用动态绑定 他也是接收固定数据</li> <li><code>attrs</code> 调用方式和 <code>emit</code>一样 需要<code>setup()</code> 参数2中结构赋值中得到该方法
<ul><li><code>attrs.父组件传参的名称</code> 来获取父组件传来的数据
<ul><li><code>attrs['带-的父组件传参的名称']</code>如果父组件传参的名称携带 <code>-</code> 需要这样设置</li></ul></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span><span class="token punctuation">{</span>attrs<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 普通父组件传参的名称</span>
  <span class="token keyword">const</span> ret <span class="token operator">=</span> attrs<span class="token punctuation">.</span>父组件传参的名称
  <span class="token comment">// 带-的父组件传参的名称</span>
  <span class="token keyword">const</span> ret <span class="token operator">=</span> attrs<span class="token punctuation">[</span><span class="token string">'带-的父组件传参的名称'</span><span class="token punctuation">]</span>
  
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="vue3设置vue虚拟dom方法-createvnode"><a href="#vue3设置vue虚拟dom方法-createvnode" class="header-anchor">#</a> Vue3设置Vue虚拟Dom方法 <code>createVNode()</code></h2> <ul><li>一般的组件 都只能在<code>template</code>模板中使用 在<code>setup()</code>很难调用 如果希望插件能像方法一样 在<code>setup()</code>中使用 就需要设置为虚拟Dom方法实现功能 并且支持<code>props</code>传参</li> <li>通过会把一些 全局弹窗 设置为虚拟Dom方法</li> <li><code>createVNode()</code> 具有两个参数
<ul><li>参数1 表示导入的组件(需要虚拟化的组件)</li> <li>参数2 表示传递给组件的props值(虚拟Dom的参数)</li></ul></li> <li>如果设置全局弹窗效果 需要配合 <code>render()</code>函数 把<code>createVNode()</code>设置的虚拟Dom 导入全局(window)的div</li></ul> <h3 id="创建一个全局弹窗的vue虚拟dom方法"><a href="#创建一个全局弹窗的vue虚拟dom方法" class="header-anchor">#</a> <strong>创建一个全局弹窗的Vue虚拟Dom方法</strong></h3> <blockquote><p>目的：在接口请求报错的时候给用户进行提示</p></blockquote> <p>弹窗虚拟Dom功能分析：</p> <ul><li>设置一个具有弹窗效果的普通组件(样式 控制参数)</li> <li>将该组件设置为的Vue虚拟Dom方法
<ul><li>使用<code>createVNode()</code> 方法把组件设置为Vue虚拟Dom方法</li> <li>需要配合 <code>render()</code>函数 把<code>createVNode()</code>设置的虚拟Dom 导入全局(window)的div
<ul><li>这样调用的时候 以全局window为基准弹窗 而非组件内部弹窗</li></ul></li></ul></li> <li>在Vue组件中 调用该Vue虚拟Dom方法 并且设置参数</li></ul> <blockquote><p>全局弹窗的Vue虚拟Dom方法 实现步骤</p></blockquote> <ol><li><p>设置一个具有弹窗效果的普通组件(样式 参数)</p> <ul><li><p>弹窗组件名是<code>xtx-message.vue</code> (模拟)</p> <p>(这里假设弹窗样式 就不写了)</p></li></ul></li> <li><p>把弹窗组件设置为Vue的虚拟Dom方法</p> <ul><li>使用<code>createVNode()</code> 方法把组件设置为Vue的虚拟Dom方法</li> <li>需要配合 <code>render()</code>函数 把<code>createVNode()</code>设置的虚拟Dom 导入全局(window)的div
<ul><li>这样调用的时候 以全局window为基准弹窗 而非组件内部弹窗</li></ul></li></ul></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导入弹窗效果插件</span>
<span class="token keyword">import</span> XtxMessage <span class="token keyword">from</span> <span class="token string">'../../utils/xtx-message.vue'</span>

<span class="token comment">// 导入Vue3使用的方法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createVNode<span class="token punctuation">,</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token comment">// 创建一个全局组件的div(这样调用的时候 以全局window为基准弹窗 而非组件内部弹窗)</span>
<span class="token comment">// 动态创建一个div，然后添加到页面的body里面，用于放置提示组件</span>
<span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'xtx-message-container'</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> type <span class="token operator">=</span> <span class="token string">'success'</span><span class="token punctuation">,</span> text <span class="token operator">=</span> <span class="token string">'error'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这里需要把XtxMessage组件填充到上述的div当中</span>
  <span class="token comment">// createVNode用于将组件渲染为虚拟节点</span>
  <span class="token comment">// 参数一表示导入的组件</span>
  <span class="token comment">// 参数二表示传递给组件的props属性(插件的参数)</span>
  <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">createVNode</span><span class="token punctuation">(</span>XtxMessage<span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> text <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 需要把vnode填充到div里面</span>
  <span class="token comment">// Vue2中render函数是选项，用来生成组件的模板</span>
  <span class="token comment">// Vue3中render函数是导入的</span>
  <span class="token function">render</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> div<span class="token punctuation">)</span>
  <span class="token comment">// 3秒后把XtxMessage组件进行隐藏(其实就是把div中组件销毁)</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 清空div里面的内容</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> div<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// -----------------------------------------</span>
<span class="token comment">// 在setup()中使用方法</span>
<span class="token comment">// Message({type: 'success', text: '登录失败'})</span>

</code></pre></div><ol start="3"><li>在Vue组件的<code>setup()</code>中使用
<ul><li>先导入设置的 弹窗虚拟Dom方法</li> <li>然后在<code>setup()</code>中使用该弹窗虚拟Dom方法</li></ul></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//导入封装的 弹窗虚拟Dom方法</span>
<span class="token keyword">import</span> Message <span class="token keyword">from</span> <span class="token string">'@/components/library/Message.js'</span>
<span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token comment">// setup ()里面直接调用即可</span>
  	<span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'登录失败'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>总结：</p> <ol><li>基于组件渲染虚拟节点：createVNode方法</li> <li>渲染VNode到指定位置:  render(vnode, dom)</li></ol> <h2 id="vue3中创建原型链对象-vue2中的-this-方法名"><a href="#vue3中创建原型链对象-vue2中的-this-方法名" class="header-anchor">#</a> Vue3中创建原型链对象 (Vue2中的 this.$方法名)</h2> <ul><li><p>在Vue3中也支持创建原型链对象 并且支持调用 通过<code>app.config.globalProperties</code>来创建 然后通过<code>use()</code>实例</p> <ul><li>Vue2中使用原型链对象方法是 this.$方法名 但是在Vue3中的<code>setup()</code>中不能使用 <code>this</code> 和 <code>$</code></li></ul></li> <li><p><font color="#ff3040">注意: 创建原型链对象的方法 需要先创建虚拟Dom方法 然后才能创建原型链对象(详看31)</font></p></li> <li><p>创建原型链对象的方法</p> <ul><li><code>app.config.globalProperties.$要创建的原型链方法名 = 创建的虚拟Dom方法</code></li></ul></li> <li><p>通常在 <code>main.js</code>入口文件创建Vue3原型链对象方法</p> <p>命名可以不用<code>$</code>但是一般都会默认有<code>$</code></p></li></ul> <blockquote><p>创建方法</p></blockquote> <ul><li>在 <code>main.js</code>入口文件创建Vue3原型链对象方法</li> <li>通过<code>app.config.globalProperties</code>来创建 然后通过<code>use()</code>实例</li> <li><font color="#ff3040">注意: 创建原型链对象的方法 需要先创建虚拟Dom方法 然后才能创建原型链对象(详看31)</font></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导入实例化的Vue3</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token comment">// 导入Vue3要添加的原型链方法(需要先创建虚拟Dom方法)</span>
<span class="token keyword">import</span> Message <span class="token keyword">from</span> <span class="token string">'./components/library/Message.js'</span>
<span class="token comment">// 创建Vue3要添加的原型链方法</span>
<span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 通过config.globalProperties给其添加原型链方法</span>
    <span class="token comment">// app.config.globalProperties.$要创建的原型链方法名 = 创建的虚拟Dom方法</span>
    app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$message <span class="token operator">=</span> Message
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 创建一个vue应用实例(.use() 可以实例化导入)</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>如果想使用原型链对象方法 需要通过<code>getCurrentInstance()</code>使用原型链对象方法 来使用 (往下看33)</p></blockquote> <h2 id="vue3中使用原型链对象方法-getcurrentinstance"><a href="#vue3中使用原型链对象方法-getcurrentinstance" class="header-anchor">#</a> Vue3中使用原型链对象方法 <code>getCurrentInstance()</code></h2> <ul><li>在Vue3的<code>setup()</code>中 无法使用 <code>this.$</code>方法(包括模板template中的<code>$</code>)
<ul><li>如果需要使用Vue3的 this.$方法 就需要通过<code>getCurrentInstance()</code> Vue3方法来实现(需要实例化)
<ul><li><code>实例化名称.proxy.$原型链方法名()</code></li></ul></li></ul></li></ul> <blockquote><p>获取原型链对象案例</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 导入getCurrentInstance 使用原型链对象方法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getCurrentInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token comment">// 在setup()中使用</span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 实例化 getCurrentInstance 使用原型链对象方法</span>
     <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token comment">// 调用Vue3的原型链对象方法 实例化名称.proxy.$原型链方法名()</span>
    instance<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'加入成功'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue-router-两种跳转方法-path和fullpath"><a href="#vue-router-两种跳转方法-path和fullpath" class="header-anchor">#</a> Vue-router 两种跳转方法 <code>path</code>和<code>fullPath</code></h2> <ul><li><code>fullPath</code>是路由全地址 带参数</li> <li><code>path</code>是路径，不带参数</li></ul> <blockquote><p>跳转案例(携带参数)</p></blockquote> <p>如：192.168.0.1/index?page=1</p> <ul><li><code>fullPath</code>为/index?page=1</li> <li><code>path</code>为/index</li></ul></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2022/1/26 下午4:47:25</span></div></footer> <!----> <!----> <!----></main> <!----></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div><APlayer audio="" fixed="true" mini="true" theme="#647ea0" loop="loop" order="list" preload="auto" volume="0.3" mutex="true" lrc-type="0" list-folded="true" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div id="goTop" class="hide-cat" data-v-bf92849a></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 LKaiLi
    </div> <div class="operation" style="right:90px;bottom:40px;display:none;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:none;" data-v-5775ee02></i></div> <canvas id="banniang" width="120" height="322" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div></div></div>
    <script src="/assets/js/app.2e49fa50.js" defer></script><script src="/assets/js/5.e6fb2106.js" defer></script><script src="/assets/js/1.0bb3dd52.js" defer></script><script src="/assets/js/30.5412368d.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue3 å­¦ä¹ æ‰‹å†Œ(åšå®¢ç‰ˆ) | LKaiLi</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="https://pan.zealsay.com/blog/favicon.ico">
    <script language="javascript" type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="/js/mouseClick.js"></script>
    <script>var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?61498f37b83812e7b85952d5feaaab47";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();</script>
    <meta name="description" content="è‰ èµ° ğŸ¤¸ å¿½ç•¥">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.1c75615b.css" as="style"><link rel="preload" href="/assets/js/app.2e49fa50.js" as="script"><link rel="preload" href="/assets/js/5.e6fb2106.js" as="script"><link rel="preload" href="/assets/js/1.0bb3dd52.js" as="script"><link rel="preload" href="/assets/js/30.5412368d.js" as="script"><link rel="prefetch" href="/assets/js/10.988ddcf1.js"><link rel="prefetch" href="/assets/js/11.69564aa3.js"><link rel="prefetch" href="/assets/js/12.ba0b832e.js"><link rel="prefetch" href="/assets/js/13.87210a62.js"><link rel="prefetch" href="/assets/js/14.6b166614.js"><link rel="prefetch" href="/assets/js/15.a39e12f0.js"><link rel="prefetch" href="/assets/js/16.9478e3b1.js"><link rel="prefetch" href="/assets/js/17.05df34f5.js"><link rel="prefetch" href="/assets/js/18.1382fbbb.js"><link rel="prefetch" href="/assets/js/19.91ea1a03.js"><link rel="prefetch" href="/assets/js/20.9dece346.js"><link rel="prefetch" href="/assets/js/21.a069e1c8.js"><link rel="prefetch" href="/assets/js/22.3b0831b9.js"><link rel="prefetch" href="/assets/js/23.3a0a33c3.js"><link rel="prefetch" href="/assets/js/24.2ad794f8.js"><link rel="prefetch" href="/assets/js/25.481c6194.js"><link rel="prefetch" href="/assets/js/26.38c0b832.js"><link rel="prefetch" href="/assets/js/27.f23e5685.js"><link rel="prefetch" href="/assets/js/28.5761a446.js"><link rel="prefetch" href="/assets/js/29.709dafe3.js"><link rel="prefetch" href="/assets/js/3.4e5d0e6c.js"><link rel="prefetch" href="/assets/js/31.2cab55c7.js"><link rel="prefetch" href="/assets/js/32.a32631ee.js"><link rel="prefetch" href="/assets/js/33.ec9053bd.js"><link rel="prefetch" href="/assets/js/34.64b6a182.js"><link rel="prefetch" href="/assets/js/35.b03e1abd.js"><link rel="prefetch" href="/assets/js/36.538f04df.js"><link rel="prefetch" href="/assets/js/37.b96e296f.js"><link rel="prefetch" href="/assets/js/38.92316bec.js"><link rel="prefetch" href="/assets/js/39.c37e36de.js"><link rel="prefetch" href="/assets/js/4.0067ce26.js"><link rel="prefetch" href="/assets/js/40.a664e7f5.js"><link rel="prefetch" href="/assets/js/41.d79d09e7.js"><link rel="prefetch" href="/assets/js/42.670fd1a7.js"><link rel="prefetch" href="/assets/js/43.340365e7.js"><link rel="prefetch" href="/assets/js/44.e0bbabfd.js"><link rel="prefetch" href="/assets/js/45.7ae479dd.js"><link rel="prefetch" href="/assets/js/46.0e76ef03.js"><link rel="prefetch" href="/assets/js/47.bb28dd7b.js"><link rel="prefetch" href="/assets/js/48.537e7a2b.js"><link rel="prefetch" href="/assets/js/49.35153b17.js"><link rel="prefetch" href="/assets/js/50.b59ef75f.js"><link rel="prefetch" href="/assets/js/51.77a293b6.js"><link rel="prefetch" href="/assets/js/52.72840d3c.js"><link rel="prefetch" href="/assets/js/53.6cfc17c3.js"><link rel="prefetch" href="/assets/js/54.e1f03d49.js"><link rel="prefetch" href="/assets/js/55.9fa8c1a7.js"><link rel="prefetch" href="/assets/js/56.adb9fb1a.js"><link rel="prefetch" href="/assets/js/57.ad41bf28.js"><link rel="prefetch" href="/assets/js/58.dd6ec020.js"><link rel="prefetch" href="/assets/js/59.30066ff0.js"><link rel="prefetch" href="/assets/js/6.b813653c.js"><link rel="prefetch" href="/assets/js/60.044b2960.js"><link rel="prefetch" href="/assets/js/61.1a9a92e1.js"><link rel="prefetch" href="/assets/js/62.0296f5d7.js"><link rel="prefetch" href="/assets/js/63.7e327297.js"><link rel="prefetch" href="/assets/js/64.f47d4414.js"><link rel="prefetch" href="/assets/js/65.673a6494.js"><link rel="prefetch" href="/assets/js/66.53e2154c.js"><link rel="prefetch" href="/assets/js/67.e6b54d4b.js"><link rel="prefetch" href="/assets/js/68.06351386.js"><link rel="prefetch" href="/assets/js/69.9483a6d1.js"><link rel="prefetch" href="/assets/js/7.d057457a.js"><link rel="prefetch" href="/assets/js/70.3026c87a.js"><link rel="prefetch" href="/assets/js/71.57b0bfa3.js"><link rel="prefetch" href="/assets/js/72.78bd1a7d.js"><link rel="prefetch" href="/assets/js/73.72fde2fc.js"><link rel="prefetch" href="/assets/js/74.7c57bd4c.js"><link rel="prefetch" href="/assets/js/75.81231e06.js"><link rel="prefetch" href="/assets/js/76.722bac51.js"><link rel="prefetch" href="/assets/js/77.9def34e5.js"><link rel="prefetch" href="/assets/js/78.a7067d1e.js"><link rel="prefetch" href="/assets/js/79.1f4e47b9.js"><link rel="prefetch" href="/assets/js/8.b1f53c13.js"><link rel="prefetch" href="/assets/js/80.d47a6824.js"><link rel="prefetch" href="/assets/js/81.2360131d.js"><link rel="prefetch" href="/assets/js/82.83359248.js"><link rel="prefetch" href="/assets/js/83.1d43b176.js"><link rel="prefetch" href="/assets/js/84.b4e575b3.js"><link rel="prefetch" href="/assets/js/85.cb0128a4.js"><link rel="prefetch" href="/assets/js/86.a63427ce.js"><link rel="prefetch" href="/assets/js/87.43b461ee.js"><link rel="prefetch" href="/assets/js/88.683fb74e.js"><link rel="prefetch" href="/assets/js/89.193ca3e3.js"><link rel="prefetch" href="/assets/js/9.4652c675.js"><link rel="prefetch" href="/assets/js/90.8affdd5e.js"><link rel="prefetch" href="/assets/js/91.0dbbc13a.js"><link rel="prefetch" href="/assets/js/92.6c5d779e.js"><link rel="prefetch" href="/assets/js/93.151f913f.js"><link rel="prefetch" href="/assets/js/94.fac0549b.js"><link rel="prefetch" href="/assets/js/95.65ebc590.js"><link rel="prefetch" href="/assets/js/96.d3e99770.js"><link rel="prefetch" href="/assets/js/97.8523e231.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1c75615b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-ec75d12e><div data-v-ec75d12e><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-ec75d12e data-v-ec75d12e><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-89477f7e data-v-ec75d12e data-v-ec75d12e><h3 class="title" style="display:none;" data-v-89477f7e data-v-89477f7e>LKaiLi</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-89477f7e data-v-89477f7e><input type="password" value="" data-v-89477f7e> <span data-v-89477f7e>Konck! Knock!</span> <button data-v-89477f7e>OK</button></label> <div class="footer" style="display:none;" data-v-89477f7e data-v-89477f7e><span data-v-89477f7e><i class="iconfont reco-theme" data-v-89477f7e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-89477f7e>vuePress-theme-reco</a></span> <span data-v-89477f7e><i class="iconfont reco-copyright" data-v-89477f7e></i> <a data-v-89477f7e><span data-v-89477f7e>LKaiLi</span>
          Â Â 
          <span data-v-89477f7e>2021  - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-ec75d12e><div data-v-ec75d12e><div id="smart" class="wrapper-page" style="background-image:url(https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/wallhaven-z8dg9y.png);background-position-x:center;background-position-y:center;background-size:cover;background-repeat-x:no-repeat;background-repeat-y:no-repeat;" data-v-ec75d12e><header class="navbar" data-v-ec75d12e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="LKaiLi" class="logo"> <span class="site-name">LKaiLi</span></a> <div class="links"><div id="dayNightSwitch" class="generalWrapper" data-v-32f44868><a class="click" data-v-32f44868><div class="onOff daySwitch" data-v-32f44868><div class="star star1" data-v-32f44868></div> <div class="star star2" data-v-32f44868></div> <div class="star star3" data-v-32f44868></div> <div class="star star4" data-v-32f44868></div> <div class="star star5" data-v-32f44868></div> <div class="star sky" data-v-32f44868></div> <div class="sunMoon" data-v-32f44868><div class="crater crater1" data-v-32f44868></div> <div class="crater crater2" data-v-32f44868></div> <div class="crater crater3" data-v-32f44868></div> <div class="cloud part1" data-v-32f44868></div> <div class="cloud part2" data-v-32f44868></div></div></div></a></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/vue-element-admin/" class="nav-link"><i class="iconfont undefined"></i>
  vue-element-admin
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue3/" class="nav-link"><i class="iconfont undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vscode/" class="nav-link"><i class="iconfont undefined"></i>
  Vscode
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vueç§»åŠ¨å¤´æ¡é¡¹ç›®/" class="nav-link"><i class="iconfont undefined"></i>
  Vueç§»åŠ¨å¤´æ¡é¡¹ç›®
</a></li><li class="dropdown-item"><!----> <a href="/categories/RABC/" class="nav-link"><i class="iconfont undefined"></i>
  RABC
</a></li><li class="dropdown-item"><!----> <a href="/categories/å°ç¨‹åº/" class="nav-link"><i class="iconfont undefined"></i>
  å°ç¨‹åº
</a></li><li class="dropdown-item"><!----> <a href="/categories/animation/" class="nav-link"><i class="iconfont undefined"></i>
  animation
</a></li><li class="dropdown-item"><!----> <a href="/categories/axios/" class="nav-link"><i class="iconfont undefined"></i>
  axios
</a></li><li class="dropdown-item"><!----> <a href="/categories/Css/" class="nav-link"><i class="iconfont undefined"></i>
  Css
</a></li><li class="dropdown-item"><!----> <a href="/categories/other/" class="nav-link"><i class="iconfont undefined"></i>
  other
</a></li><li class="dropdown-item"><!----> <a href="/categories/uniapp/" class="nav-link"><i class="iconfont undefined"></i>
  uniapp
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´è½´
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      å…³äºæ’­å®¢
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/" class="nav-link"><i class="iconfont reco-mail"></i>
  å…³äºæˆ‘
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link"><i class="iconfont reco-account"></i>
  è”ç³»æˆ‘
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-ec75d12e></div> <aside class="sidebar" data-v-ec75d12e><div class="personal-info-wrapper" data-v-03833281 data-v-ec75d12e><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/my_cat.png" alt="author-avatar" class="personal-img" data-v-03833281> <h3 class="name" data-v-03833281>
    LKaiLi
  </h3> <div class="num" data-v-03833281><div data-v-03833281><h3 data-v-03833281>82</h3> <h6 data-v-03833281>æ–‡ç« </h6></div> <div data-v-03833281><h3 data-v-03833281>32</h3> <h6 data-v-03833281>æ ‡ç­¾</h6></div></div> <hr data-v-03833281></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/vue-element-admin/" class="nav-link"><i class="iconfont undefined"></i>
  vue-element-admin
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue3/" class="nav-link"><i class="iconfont undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vscode/" class="nav-link"><i class="iconfont undefined"></i>
  Vscode
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vueç§»åŠ¨å¤´æ¡é¡¹ç›®/" class="nav-link"><i class="iconfont undefined"></i>
  Vueç§»åŠ¨å¤´æ¡é¡¹ç›®
</a></li><li class="dropdown-item"><!----> <a href="/categories/RABC/" class="nav-link"><i class="iconfont undefined"></i>
  RABC
</a></li><li class="dropdown-item"><!----> <a href="/categories/å°ç¨‹åº/" class="nav-link"><i class="iconfont undefined"></i>
  å°ç¨‹åº
</a></li><li class="dropdown-item"><!----> <a href="/categories/animation/" class="nav-link"><i class="iconfont undefined"></i>
  animation
</a></li><li class="dropdown-item"><!----> <a href="/categories/axios/" class="nav-link"><i class="iconfont undefined"></i>
  axios
</a></li><li class="dropdown-item"><!----> <a href="/categories/Css/" class="nav-link"><i class="iconfont undefined"></i>
  Css
</a></li><li class="dropdown-item"><!----> <a href="/categories/other/" class="nav-link"><i class="iconfont undefined"></i>
  other
</a></li><li class="dropdown-item"><!----> <a href="/categories/uniapp/" class="nav-link"><i class="iconfont undefined"></i>
  uniapp
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´è½´
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      å…³äºæ’­å®¢
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/" class="nav-link"><i class="iconfont reco-mail"></i>
  å…³äºæˆ‘
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link"><i class="iconfont reco-account"></i>
  è”ç³»æˆ‘
</a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue3</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blogs/docs/Vue3/1.1.1_Vue_study.html" aria-current="page" class="active sidebar-link">Vue3 å­¦ä¹ æ‰‹å†Œ(åšå®¢ç‰ˆ)</a></li><li><a href="/blogs/docs/Vue3/1.1_Vue3_install.html" class="sidebar-link">Vue3 installæ’ä»¶æœºåˆ¶</a></li><li><a href="/blogs/docs/Vue3/1.2_Vue3_scrollReveal.html" class="sidebar-link">Vue3 scrollReveaç»„ä»¶ä½¿ç”¨æ–¹æ³•</a></li><li><a href="/blogs/docs/Vue3/1.3_Vue3_typewriter.html" class="sidebar-link">Vue3 æ‰“å­—æœºç‰¹æ•ˆ</a></li><li><a href="/blogs/docs/Vue3/9_VueUse.html" class="sidebar-link">VueUse æ’ä»¶æ–¹æ³•åˆé›†</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-89477f7e data-v-ec75d12e><h3 class="title" style="display:none;" data-v-89477f7e data-v-89477f7e>Vue3 å­¦ä¹ æ‰‹å†Œ(åšå®¢ç‰ˆ)</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-89477f7e data-v-89477f7e><input type="password" value="" data-v-89477f7e> <span data-v-89477f7e>Konck! Knock!</span> <button data-v-89477f7e>OK</button></label> <div class="footer" style="display:none;" data-v-89477f7e data-v-89477f7e><span data-v-89477f7e><i class="iconfont reco-theme" data-v-89477f7e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-89477f7e>vuePress-theme-reco</a></span> <span data-v-89477f7e><i class="iconfont reco-copyright" data-v-89477f7e></i> <a data-v-89477f7e><span data-v-89477f7e>LKaiLi</span>
          Â Â 
          <span data-v-89477f7e>2021  - </span>
          2022
        </a></span></div></div></div> <div data-v-ec75d12e><main class="page"><div class="page-title" style="display:none;"><h1 class="title">Vue3 å­¦ä¹ æ‰‹å†Œ(åšå®¢ç‰ˆ)</h1> <div class="page-info" data-v-0efa1f05><i class="iconfont reco-account" data-v-0efa1f05><span data-v-0efa1f05>LKaiLi</span></i> <i class="iconfont reco-date" data-v-0efa1f05><span data-v-0efa1f05>2099-01-27</span></i> <i class="iconfont reco-eye" data-v-0efa1f05><span id="/blogs/docs/Vue3/1.1.1_Vue_study.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-0efa1f05><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-0efa1f05><span class="tag-item" data-v-0efa1f05>Vue3</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><div class="custom-block tip"><p class="custom-block-title">ä»‹ç»</p> <p>ä¸‹ä¸€ä¸ªç›®æ ‡ å…¨é¢æ‹¥æŠ±Vue3æ—¶ä»£ <br></p></div> <h2 id="vue3çš„ç‰¹æ€§"><a href="#vue3çš„ç‰¹æ€§" class="header-anchor">#</a> Vue3çš„ç‰¹æ€§</h2> <blockquote><p>ç›®æ ‡ï¼šäº†è§£vue3ç°çŠ¶ï¼Œä»¥åŠå®ƒçš„ä¼˜ç‚¹ï¼Œå±•æœ›å®ƒçš„æœªæ¥</p></blockquote> <ol><li>Vue3ç°çŠ¶ï¼š</li></ol> <ul><li><a href="https://github.com/vuejs/vue-next/" target="_blank" rel="noopener noreferrer">vue-next<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 2020å¹´09æœˆ18æ—¥ï¼Œæ­£å¼å‘å¸ƒvue3.0ç‰ˆæœ¬ã€‚ä½†ç”±äºåˆšå‘å¸ƒå‘¨è¾¹ç”Ÿæ€ä¸æ”¯æŒï¼Œå¤§å¤šæ•°å¼€å‘è€…å¤„äºè§‚æœ›ã€‚</li> <li>ç°åœ¨ä¸»æµç»„ä»¶åº“éƒ½å·²ç»å‘å¸ƒäº†æ”¯æŒvue3.0çš„ç‰ˆæœ¬ï¼Œå…¶ä»–ç”Ÿæ€ä¹Ÿåœ¨ä¸æ–­åœ°å®Œå–„ä¸­ï¼Œè¿™æ˜¯è¶‹åŠ¿ã€‚
<ul><li><a href="https://element-plus.org/#/zh-CN" target="_blank" rel="noopener noreferrer">element-plus<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>   åŸºäº Vue 3.0 çš„æ¡Œé¢ç«¯ç»„ä»¶åº“</li> <li><a href="https://vant-contrib.gitee.io/vant/v3/#/zh-CN" target="_blank" rel="noopener noreferrer">vant<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  vant3.0ç‰ˆæœ¬ï¼Œæœ‰èµå‰ç«¯å›¢é˜Ÿå¼€æºç§»åŠ¨ç«¯ç»„ä»¶åº“</li> <li><a href="https://2x.antdv.com/components/overview/" target="_blank" rel="noopener noreferrer">ant-design-vue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>   Ant Design Vue 2.0ç‰ˆæœ¬ï¼Œç¤¾åŒºæ ¹æ®èš‚èš ant design å¼€å‘</li></ul></li></ul> <ol start="2"><li>Vue3ä¼˜ç‚¹ï¼š</li></ol> <ul><li>æ•°æ®å…·å¤‡å“åº”å¼ æ— éœ€è°ƒç”¨<code>$set</code>æ–¹æ³•</li> <li>æœ€ç«æ¡†æ¶ï¼Œå®ƒæ˜¯å›½å†…æœ€ç«çš„å‰ç«¯æ¡†æ¶ä¹‹ä¸€ï¼Œ<a href="https://v3.vuejs.org/" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://v3.cn.vuejs.org/" target="_blank" rel="noopener noreferrer">ä¸­æ–‡æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>æ€§èƒ½æå‡ï¼Œè¿è¡Œé€Ÿåº¦äº‹vue2.xçš„1.5å€å·¦å³</li> <li>ä½“ç§¯æ›´å°ï¼ŒæŒ‰éœ€ç¼–è¯‘ä½“ç§¯æ¯”vue2.xè¦æ›´å°</li> <li>ç±»å‹æ¨æ–­ï¼Œæ›´å¥½çš„æ”¯æŒTsï¼ˆtypescriptï¼‰è¿™ä¸ªä¹Ÿæ˜¯è¶‹åŠ¿ï¼ˆjsçš„è¶…é›†ï¼‰</li> <li>é«˜çº§ç»™äºˆï¼Œæš´éœ²äº†æ›´åº•å±‚çš„APIå’Œæä¾›æ›´å…ˆè¿›çš„å†…ç½®ç»„ä»¶</li> <li><font color="#ff3040"><strong>â˜…é€‰é¡¹API-----ç»„åˆAPI (composition api)</strong>  ï¼Œèƒ½å¤Ÿæ›´å¥½çš„ç»„ç»‡é€»è¾‘ï¼Œå°è£…é€»è¾‘ï¼Œå¤ç”¨é€»è¾‘</font></li></ul> <ol start="3"><li><p>Vue3å±•æœ›ï¼š</p> <ul><li>è¿™æ˜¯è¶‹åŠ¿ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¼ä¸šå°†æ¥è‚¯å®šä¼šå‡çº§åˆ°Vue3.0</li> <li>å¤§å‹é¡¹ç›®ï¼Œç”±äºå¯¹Tsçš„å‹å¥½è¶Šæ¥è¶Šå¤šå¤§å‹é¡¹ç›®å¯ä»¥ç”¨Vue3.0</li></ul></li> <li><p><font color="#ff3040">ä¸ªäººå±•æœ›</font></p> <ul><li>å…¨é¢æ‹¥æŠ±Vue3 æœ‰æœºä¼šå­¦ä¹ TSè¯­è¨€</li></ul></li></ol> <blockquote><p><strong>æ€»ç»“ï¼š</strong> ä¸ºä»€ä¹ˆè¦å­¦ vue3 ?</p> <p>é€‚åº”å¸‚åœºå­¦ä¹ æµè¡Œçš„æŠ€æœ¯æé«˜æå‡è‡ªå·±ç«äº‰åŠ›ï¼Œç»™è‡ªå·±åŠ è–ªã€‚</p></blockquote> <h2 id="åˆ›å»ºvueåº”ç”¨"><a href="#åˆ›å»ºvueåº”ç”¨" class="header-anchor">#</a> åˆ›å»ºVueåº”ç”¨</h2> <blockquote><p>ç›®æ ‡ï¼šæŒæ¡å¦‚ä½•åˆ›å»ºvue3åº”ç”¨å®ä¾‹</p></blockquote> <ol><li>åŸºäºVueè„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 1. å®‰è£…è„šæ‰‹æ¶</span>
<span class="token function">npm</span> i @vue/cli -g
<span class="token comment"># 2. åˆ›å»ºvue3é¡¹ç›®ï¼ˆé€‰é¡¹ä¸­é€‰æ‹©v3ç‰ˆæœ¬ï¼Œå…¶ä»–å’Œä¹‹å‰ä¸€æ ·ï¼‰ä¸èƒ½æœ‰å¤§å†™</span>
vue create é¡¹ç›®åç§°
</code></pre></div><ol start="2"><li>é¡¹ç›®ä»£ç ç»“æ„åˆ†æ</li></ol> <p>è½åœ°ä»£ç ï¼š</p> <ul><li>è·Ÿç»„ä»¶<code>App.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- æ¨¡æ¿ä¸­ä¸è¦æ±‚æœ‰å”¯ä¸€çš„è·ŸèŠ‚ç‚¹ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span> |
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>å…¥å£æ–‡ä»¶<code>main.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Vue2.0çš„å¯¼å…¥æ–¹æ³•</span>
<span class="token comment">// import Vue from 'vue'</span>

<span class="token comment">// Vue3.0çš„å¯¼å…¥æ–¹æ³•</span>
<span class="token comment">// è¿™ç§å¯¼å…¥APIçš„æ–¹å¼å¯ä»¥å‡å°‘æ‰“åŒ…åä»£ç çš„ä½“ç§¯ï¼ˆæŒ‰éœ€å¯¼å…¥ï¼‰</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

<span class="token comment">// Vue3çš„å†™æ³•</span>
<span class="token comment">// createApp(App)çš„è¿”å›å€¼æ˜¯ Vueå®ä¾‹å¯¹è±¡</span>
<span class="token comment">// useæ–¹æ³•ç”¨äºé…ç½®æ’ä»¶(å¯¼å…¥æ’ä»¶æ—¶å€™ éœ€è¦è¿™æ ·å¯¼å…¥)</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

<span class="token comment">// Vue2çš„å†™æ³•</span>
<span class="token comment">// new Vue({</span>
<span class="token comment">//   router,</span>
<span class="token comment">//   store,</span>
<span class="token comment">//   render: h =&gt; h(App)</span>
<span class="token comment">// }).$mount('#app')</span>
</code></pre></div><blockquote><p><strong>æ€»ç»“ï¼š</strong></p> <ol><li>å¦‚ä½•åˆ›å»ºvueåº”ç”¨å®ä¾‹ï¼ŸcreateApp</li> <li>å¦‚ä½•åˆ›å»ºè·¯ç”±å®ä¾‹ï¼ŸcreateRouter</li> <li>å¦‚ä½•åˆ›å»ºStoreå®ä¾‹ï¼ŸcreateStore</li></ol> <p>æ³¨æ„ï¼šæ¨¡æ¿ä¸­å¯ä»¥æ²¡æœ‰å”¯ä¸€çš„è·ŸèŠ‚ç‚¹ã€‚</p></blockquote> <h2 id="é€‰é¡¹apiå’Œç»„åˆapi"><a href="#é€‰é¡¹apiå’Œç»„åˆapi" class="header-anchor">#</a> é€‰é¡¹APIå’Œç»„åˆAPI</h2> <blockquote><p>ç›®æ ‡ï¼šç†è§£ä»€ä¹ˆæ˜¯é€‰é¡¹APIå†™æ³•ï¼Œä»€ä¹ˆæ˜¯ç»„åˆAPIå†™æ³•ã€‚</p> <ol><li>é€‰é¡¹APIï¼Œä¹‹å‰å†™ä»£ç çš„é£æ ¼ï¼Œä»£ç éƒ½æ˜¯å†™åˆ°ç»„ä»¶çš„é…ç½®é€‰é¡¹ä¸­ï¼ˆmethods/props/computed....ï¼‰</li> <li>ç»„åˆAPIï¼Œä»£ç ä¸å†å®Œå…¨å†™åˆ°é€‰é¡¹ä¸­ï¼Œè€Œæ˜¯æœ‰æ–°çš„è§„åˆ™</li></ol></blockquote> <ul><li>é€‰é¡¹APIä¸ç»„åˆAPIå¯¹æ¯”åˆ†æ</li></ul> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/ztBRcGELHWXrdwy.png" alt="image-20210716210942387"></p> <p>ä»€ä¹ˆæ˜¯é€‰é¡¹APIå†™æ³•ï¼š<code>Options ApI</code></p> <ul><li>å’±ä»¬åœ¨vue2.xé¡¹ç›®ä¸­ä½¿ç”¨çš„å°±æ˜¯ <code>é€‰é¡¹API</code> å†™æ³•
<ul><li>ä»£ç é£æ ¼ï¼šdataé€‰é¡¹å†™æ•°æ®ï¼Œmethodsé€‰é¡¹å†™å‡½æ•°...ï¼Œä¸€ä¸ªåŠŸèƒ½é€»è¾‘çš„ä»£ç åˆ†æ•£ã€‚</li> <li>ä¼˜ç‚¹ï¼šæ˜“äºå­¦ä¹ å’Œä½¿ç”¨ï¼Œå†™ä»£ç çš„ä½ç½®å·²ç»çº¦å®šå¥½</li> <li>ç¼ºç‚¹ï¼šä»£ç ç»„ç»‡æ€§å·®ï¼Œç›¸ä¼¼çš„é€»è¾‘ï¼ˆåŠŸèƒ½ï¼‰ä»£ç ä¸ä¾¿äºå¤ç”¨ï¼Œé€»è¾‘å¤æ‚ä»£ç å¤šäº†ä¸å¥½é˜…è¯»ã€‚</li></ul></li></ul> <p>ä»€ä¹ˆæ˜¯ç»„åˆAPIï¼šComposition API</p> <ul><li>ä»¥åŠŸèƒ½ä¸ºå•ä½ç»„ç»‡ä»£ç ç»“æ„ï¼Œåç»­é‡ç”¨åŠŸèƒ½æ›´åŠ æ–¹ä¾¿ã€‚</li> <li><font color="#ff3040">Vueä¸­å¯¼å…¥æ–¹æ³• éœ€è¦ç”¨ importæŒ‰éœ€åŠ è½½ æ‰å¯ä»¥åœ¨ <code>setup()</code>é‡Œé¢ä½¿ç”¨è¯¥æ–¹æ³•</font></li></ul> <blockquote><p><strong>æ€»ç»“ï¼š</strong> çŸ¥é“é€‰é¡¹APIå’Œç»„åˆAPIçš„å†™æ³•åŒºåˆ«ï¼Œå»ºè®®å¤§å®¶ä½¿ç”¨ç»„åˆAPIåœ¨vue3.0é¡¹ç›®ä¸­ã€‚</p></blockquote> <h2 id="ç»„åˆapi-setup-è®¾ç½®ç»„åˆapiæ–¹æ³•"><a href="#ç»„åˆapi-setup-è®¾ç½®ç»„åˆapiæ–¹æ³•" class="header-anchor">#</a> ç»„åˆAPI <code>setup()</code> è®¾ç½®ç»„åˆapiæ–¹æ³•</h2> <blockquote><p>ç›®æ ‡ï¼šæŒæ¡<code>setup()</code>å‡½æ•°çš„åŸºæœ¬ä½¿ç”¨</p> <p>ä½œç”¨: å‡ ä¹æ‰€æœ‰çš„jsé€»è¾‘ä»£ç éƒ½æ˜¯å†™åˆ°setupæ–¹æ³•é‡Œ</p></blockquote> <p><font color="#ff3040">setup()æ˜¯ä»€ä¹ˆï¼š</font></p> <ul><li><p><code>setup()</code> ä¸€èˆ¬åªèƒ½æ‰§è¡Œä¸€æ¬¡ å¦‚æœæ•°æ®åŠ¨æ€ä¿®æ”¹ éœ€è¦ç”¨<code>watch</code>ç›‘å¬</p> <ul><li>å°±æ¯”å¦‚ åŠ¨æ€è·å–è·¯ç”±æ•°æ®çš„æ—¶å€™ éœ€è¦é‡æ–°è°ƒç”¨è·¯ç”±æ•°æ® è·å–ç›¸åº”çš„åŠ¨æ€è·¯ç”±æ•°æ®
<ul><li>å¦‚æœç›‘æ§çš„ä¸€çº§è·¯ç”± å­˜åœ¨äºŒçº§è·¯ç”± éœ€è¦å±è”½</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>   <span class="token comment">// å‚¨å­˜ä¸€çº§åˆ†ç±»ç›¸å…³çš„å•†å“æ•°æ®</span>
    <span class="token keyword">const</span> goods <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// watchç›‘å¬åŠ¨æ€è·å–çš„è·¯ç”±æ•°æ® ç„¶åé‡æ–°è·å–æ–°çš„è·¯ç”±æ•°æ® </span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// è·å–è·¯ç”±æ•°æ®</span>
      <span class="token function">findTopCategory</span><span class="token punctuation">(</span>newId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// å‚¨å­˜ä¸€çº§åˆ†ç±»ç›¸å…³çš„å•†å“æ•°æ®</span>
        goods<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>children
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">// é¡µé¢åŠ è½½æ—¶å€™ å¯åŠ¨ç›‘æ§(ç›¸å½“äºç”Ÿå‘½å‘¨æœŸ æ‰“å¼€é¡µé¢è°ƒç”¨)</span>
      immediate<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p><code>setup()</code> æ˜¯ä¸€ä¸ªæ–°çš„ç»„ä»¶é€‰é¡¹ï¼Œä½œä¸ºç»„ä»¶ä¸­ä½¿ç”¨ç»„åˆAPIçš„èµ·ç‚¹(æŠŠä¸€ä¸ªåŠŸèƒ½å…¨éƒ¨ç»„åˆèµ·æ¥)</p></li> <li><p><code>setup()</code>è°ƒç”¨çš„æ—¶é—´ç›¸å½“äºVue2çš„<code>created()</code> æ‰§è¡Œåœ¨ç»„ä»¶åˆ›å»ºä¹‹å‰</p> <ul><li><font color="#ff3040">æ— æ³•ä½¿ç”¨this éœ€è¦åœ¨ç»“å°¾<code>return</code>å‡ºå»</font></li> <li>è¿™å°±æ„å‘³ç€åœ¨<code>setup()</code>å‡½æ•°ä¸­ <code>this</code> è¿˜ä¸æ˜¯ç»„ä»¶å®ä¾‹ï¼Œ<code>this</code> æ­¤æ—¶æ˜¯ <code>undefined</code></li></ul></li> <li><p>åœ¨æ¨¡ç‰ˆä¸­éœ€è¦ä½¿ç”¨çš„æ•°æ®å’Œå‡½æ•°ï¼Œéœ€è¦åœ¨ <code>setup()</code>ä¸­<code>return</code>å‡ºå»ã€‚</p></li> <li><p><font color="#ff3040">Vueä¸­å¯¼å…¥æ–¹æ³• éœ€è¦ç”¨ importæŒ‰éœ€åŠ è½½ æ‰å¯ä»¥åœ¨ <code>setup()</code>é‡Œé¢ä½¿ç”¨è¯¥æ–¹æ³•</font></p></li> <li><p><code>setup()</code> åœ¨åŒä¸€ä¸ªç»„ä»¶ä¸­ ä¸å¯ä»¥å¤šæ¬¡è°ƒç”¨</p></li></ul> <blockquote><p>æ¼”ç¤ºä»£ç </p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- æ¨¡æ¿ä¸­ä¸è¦æ±‚æœ‰å”¯ä¸€çš„æ ¹èŠ‚ç‚¹ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span> |
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- è®¾ç½®ç‚¹å‡»äº‹ä»¶ --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹æˆ‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- å·®å€¼è¡¨è¾¾å¼æ’è¿›å» --&gt;</span>
      {{msg}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// setupå‡½æ•°çš„è§¦å‘æ—¶æœºå‘ç”Ÿåœ¨(ç”Ÿå‘½å‘¨æœŸå‡½æ•°)ä¹‹å‰ æ­¤æ—¶ç»„ä»¶å°šæœªåˆ›å»º ä¸å¯ä»¥ç”¨this</span>
    <span class="token comment">// åœ¨è¯¥å‡½æ•°ä¸­æ˜¯æ²¡æœ‰thisçš„ æ­¤æ—¶Vueç»„ä»¶å®ä¾‹å°šæœªåˆ›å»ºæˆåŠŸ</span>

    <span class="token comment">// setup () è¯¥å‡½æ•°è¿”å›å€¼ç”¨äºç»™ç»„ä»¶æ¨¡æ¿æä¾›ä¿¡æ¯(æ•°æ®å’Œå‡½æ•°)</span>
    <span class="token comment">// è®¾ç½®ä¸€ä¸ªå¸¸é‡</span>
    <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">'hello'</span> <span class="token comment">// é»˜è®¤å®šä¹‰çš„æ•°æ®ä¸æ˜¯å“åº”å¼çš„ éœ€è¦å•ç‹¬è®¾ç½®ç›¸åº”å¼</span>
    <span class="token comment">// è®¾ç½®ä¸€ä¸ªæ–¹æ³•</span>
    <span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¿™ä¸ªæ˜¯æ–¹æ³•'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// setup ()å‚¨å­˜çš„æ•°æ® æ–¹æ³• éœ€è¦returnå‡ºå»ä½¿ç”¨ æ— éœ€this</span>
    <span class="token comment">// è¿”å›è®¾ç½®çš„æ•°æ® å’Œ è®¾ç½®çš„æ–¹æ³•</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">,</span>
      fn
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><strong>æ€»ç»“ï¼š</strong> <code>setup</code> ç»„ä»¶åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œï¼Œå®ƒè¿”å›çš„æ•°æ®å’Œå‡½æ•°å¯åœ¨æ¨¡ç‰ˆä½¿ç”¨ã€‚</p> <p>æ³¨æ„ï¼šè¯¥å‡½æ•°ä¸å¯ä»¥è®¿é—®thisï¼Œthisçš„å€¼ä¸ºundefined</p> <h2 id="ç»„åˆapi-å£°æ˜å‘¨æœŸ-é’©å­å‡½æ•°"><a href="#ç»„åˆapi-å£°æ˜å‘¨æœŸ-é’©å­å‡½æ•°" class="header-anchor">#</a> ç»„åˆAPI <code>å£°æ˜å‘¨æœŸ(é’©å­å‡½æ•°)</code></h2> <blockquote><p>ç›®æ ‡ï¼šæŒæ¡ä½¿ç”¨ç»„åˆAPIå†™æ³•çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</p></blockquote> <ul><li><font color="#ff3040">Vueä¸­å¯¼å…¥æ–¹æ³• éœ€è¦ç”¨ importæŒ‰éœ€åŠ è½½ æ‰å¯ä»¥åœ¨ <code>setup()</code>é‡Œé¢ä½¿ç”¨è¯¥æ–¹æ³•</font></li> <li>Vue3ä¸­ä¹Ÿæ”¯æŒ Vue2é‡Œé¢çš„å£°æ˜å‘¨æœŸ ä½†æ˜¯ä¸æ¨è</li> <li>Vue3å£°æ˜å‘¨æœŸéƒ½æ˜¯å‡½æ•° éœ€è¦ç”¨ç®­å¤´å‡½æ•°æ–¹æ³•è®¾ç½®</li> <li><font color="#ff3040">Vue3ä¸­çš„ç”Ÿå‘½å‘¨æœŸ(é’©å­å‡½æ•°)</font> <ul><li><code>onBeforeMount(()=&gt;{ })</code>  æŒ‚è½½DOMå‰ (å¸¸ç”¨)</li> <li><code>onMounted(()=&gt;{ })</code> æŒ‚è½½DOMå (å¸¸ç”¨)</li> <li><code>setup(()=&gt;{ })</code> åˆ›å»ºå®ä¾‹å‰ (å®é™…ä¸Šå°±æ˜¯Vue2 çš„<code>created</code>)</li> <li><code>onBeforeUpdate(()=&gt;{ })</code> æ›´æ–°ç»„ä»¶å‰</li> <li><code>onUpdated(()=&gt;{ })</code> æ›´æ–°ç»„ä»¶å</li> <li><code>onBeforeUnmount(()=&gt;{ })</code> å¸è½½é”€æ¯å‰</li> <li><code>onUnmounted(()=&gt;{ })</code>  å¸è½½é”€æ¯å</li></ul></li></ul> <blockquote><p>å¯¹æ¯”vue2.x  å·¦Vue2 -&gt; å³Vue3</p></blockquote> <ul><li><code>beforeCreate</code> -&gt; <code>setup()</code></li> <li><code>created</code> -&gt;  <code>setup()</code></li> <li><code>beforeMount</code> -&gt; <code>onBeforeMount</code></li> <li><code>mounted</code> -&gt; <code>onMounted</code></li> <li><code>beforeUpdate</code> -&gt; <code>onBeforeUpdate</code></li> <li><code>updated</code> -&gt; <code>onUpdated</code></li> <li><code>beforeDestroy</code> -&gt; <code>onBeforeUnmount</code></li> <li><code>destroyed</code> -&gt; <code>onUnmounted</code></li> <li><code>errorCaptured</code> -&gt; <code>onErrorCaptured</code></li></ul> <p><font color="#ff3040">æ‰€æœ‰çš„å£°æ˜å‘¨æœŸæ–¹æ³• éƒ½å¯ä»¥åœ¨<code>setup()</code> é‡Œé¢å¤šæ¬¡è°ƒç”¨ (ä¸€æ ·å£°æ˜å‘¨æœŸæŒ‰jsé»˜è®¤é¡ºåºæ’åº)</font></p> <blockquote><p>æ¼”ç¤ºä»£ç </p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    container
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// å¿…é¡»æŒ‰éœ€å¯¼å…¥ Vue3ç»„åˆapi</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onBeforeMount<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// DOMæ¸²æŸ“å‰è°ƒç”¨onBeforeMountæ–¹æ³•</span>
    <span class="token function">onBeforeMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">// å£°æ˜å‘¨æœŸæ˜¯å‡½æ•°æ–¹æ³•</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'DOMæ¸²æŸ“å‰'</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.container'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token comment">// DOMæ¸²æŸ“åè°ƒç”¨onMountedæ–¹æ³•</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'DOMæ¸²æŸ“å1'</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.container'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token comment">//  setup () é‡Œé¢å¯ä»¥å¤šæ¬¡è°ƒç”¨ä¸€æ ·çš„å£°æ˜å‘¨æœŸæ–¹æ³•</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'DOMæ¸²æŸ“å2'</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.container'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>æ€»ç»“ï¼š</strong></p> <ol><li>ç»„åˆAPIçš„ç”Ÿå‘½å‘¨æœŸé’©å­æœ‰7ä¸ªï¼Œ</li> <li>å¯ä»¥å¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªé’©å­ï¼Œ</li> <li>æ‰§è¡Œé¡ºåºå’Œä¹¦å†™é¡ºåºç›¸åŒã€‚</li></ol> <p>æ³¨æ„ï¼š</p> <ol><li>å…¼å®¹Vue2çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†æ˜¯ä¸å»ºè®®åœ¨Vue3çš„é¡¹ç›®ä¸­ä½¿ç”¨Vue2çš„API</li> <li>beforeCreateå’Œcreatedç”Ÿå‘½å‘¨æœŸåœ¨Vue3ä¸­è¢«setupæ›¿ä»£äº†</li> <li>Vue3çš„ç”Ÿå‘½å‘¨æœŸç›´æ¥ä¹Ÿæ˜¯åœ¨setupä¸­è¿›è¡Œè§¦å‘ï¼Œå‡½æ•°åç§°å‰é¢éƒ½æ·»åŠ on</li></ol> <h3 id="ç»„ä»¶æ‹†åˆ†å-å¯¼å…¥-ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶æ‹†åˆ†å-å¯¼å…¥-ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> <strong>ç»„ä»¶æ‹†åˆ†å å¯¼å…¥ <code>ç”Ÿå‘½å‘¨æœŸ</code></strong></h3> <ul><li>å¦‚æœå­ç»„ä»¶è®¾ç½®äº†ç”Ÿå‘½å‘¨æœŸ é‚£ä¹ˆå¿…é¡»åœ¨çˆ¶ç»„ä»¶å¼•å…¥è¯¥ç”Ÿå‘½å‘¨æœŸ
<ul><li>å­ç»„ä»¶çš„å£°æ˜ç”Ÿå‘½å‘¨æœŸ è®¾ç½®ä¸ºå¸¸é‡ ä¼ ç»™çˆ¶ç»„ä»¶è®©çˆ¶ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸè°ƒç”¨è¯¥å˜é‡</li></ul></li></ul> <blockquote><p>è°ƒç”¨ä¾‹å­</p></blockquote> <ul><li>å­ç»„ä»¶çš„è®¾ç½® <code>jsæ–‡ä»¶</code> <ul><li>å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸè®¾ç½®ä¸ºå¸¸é‡ è¿›è¡Œå¯¼å‡º</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å¯¼å…¥ Vue3çš„refæ–¹æ³•</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/reactivity'</span>
<span class="token comment">// å¯¼å…¥ Vue3çš„computedæ–¹æ³•</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/runtime-core'</span>
<span class="token comment">// è®¾ç½®ä¸€ä¸ªå¸¸é‡</span>
<span class="token keyword">const</span> retx <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// è®¾ç½®å‡½æ•°æ–¹æ³•</span>
<span class="token keyword">const</span> <span class="token function-variable function">changeN</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  retx<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token comment">// è®¾ç½®è®¡ç®—å±æ€§</span>
<span class="token keyword">const</span> newretx <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> retx<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//! è®¾ç½®éœ€è¦å¯¼å‡ºçš„ç”Ÿå‘½å‘¨æœŸ</span>
<span class="token keyword">const</span> <span class="token function-variable function">onMounted</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">changeN</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// è®¾ç½®éœ€è¦å¯¼å‡ºçš„æ•°æ®å†…å®¹</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  onMounted<span class="token punctuation">,</span>
  changeN<span class="token punctuation">,</span>
  newretx<span class="token punctuation">,</span>
  retx
<span class="token punctuation">}</span>

</code></pre></div><ul><li>çˆ¶ç»„ä»¶çš„è®¾ç½® <code>vueæ–‡ä»¶</code> <ul><li>çˆ¶ç»„ä»¶æ¥æ”¶å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå¸¸é‡ å¯¼å…¥å…¶è‡ªèº«çš„ç”Ÿå‘½å‘¨æœŸä¸­</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- æ¨¡æ¿ä¸­ä¸è¦æ±‚æœ‰å”¯ä¸€çš„æ ¹èŠ‚ç‚¹ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>æˆ‘çš„åˆå§‹å€¼{{retx}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>æˆ‘çš„æ›´æ–°å€¼{{newretx}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹æˆ‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// å¯¼å…¥å­ç»„ä»¶</span>
<span class="token keyword">import</span> model <span class="token keyword">from</span> <span class="token string">'./views/model/demob'</span>
<span class="token comment">// å¯¼å…¥Vue3çš„ç”Ÿå‘½å‘¨æœŸ</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/runtime-core'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯¼å…¥å­ç»„ä»¶è®¾ç½®çš„å£°æ˜å‘¨æœŸ</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> model<span class="token punctuation">.</span>onMounted<span class="token punctuation">)</span>
    <span class="token comment">// æŠŠå­ç»„ä»¶çš„æ‰€æœ‰æ•°æ® å¯¼å…¥åˆ°çˆ¶ç»„ä»¶ä¸­ç”¨æ¥è°ƒç”¨(å£°æ˜å‘¨æœŸå¯ä»¥ä¸ç›´æ¥å¯¼å…¥)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>model <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h2 id="ç»„åˆapi-reactive-è®¾ç½®å¤šä¸ªå¤æ‚å¯¹è±¡å“åº”å¼æ•°æ®-æˆ‘ç”¨"><a href="#ç»„åˆapi-reactive-è®¾ç½®å¤šä¸ªå¤æ‚å¯¹è±¡å“åº”å¼æ•°æ®-æˆ‘ç”¨" class="header-anchor">#</a> ç»„åˆAPI <code>reactive()</code> è®¾ç½®å¤šä¸ªå¤æ‚å¯¹è±¡å“åº”å¼æ•°æ® (æˆ‘ç”¨)</h2> <blockquote><p>ç›®æ ‡ï¼šæŒæ¡ä½¿ç”¨reactiveå‡½æ•°å®šä¹‰å“åº”å¼æ•°æ®(å¤šä¸ªæ•°æ®çš„å¯¹è±¡)</p></blockquote> <ul><li><font color="#ff3040">Vueä¸­å¯¼å…¥æ–¹æ³• éœ€è¦ç”¨ importæŒ‰éœ€åŠ è½½ æ‰å¯ä»¥åœ¨ <code>setup()</code>é‡Œé¢ä½¿ç”¨è¯¥æ–¹æ³•</font></li> <li><code>reactive()</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥å®šä¹‰ä¸€ä¸ªå¤æ‚æ•°æ®ç±»å‹ï¼Œæˆä¸ºå“åº”å¼æ•°æ®ã€‚
<ul><li>é€šå¸¸ç”¨constç›´æ¥è®¾ç½®çš„å€¼ ä¸æ˜¯å“åº”å¼ æ•°æ®ä¿®æ”¹æ—¶å€™ ä¸ä¼šåŠ¨æ€ä¿®æ”¹ éœ€è¦è®¾ç½®<code>reactive()</code>æ–¹æ³•</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- æ¨¡æ¿ä¸­ä¸è¦æ±‚æœ‰å”¯ä¸€çš„æ ¹èŠ‚ç‚¹ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹å‡»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ret.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// æŒ‰éœ€å¯¼å…¥reactive()æ–¹æ³•</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// æŠŠè®¾ç½®çš„å¸¸é‡æ•°æ® å˜ä¸ºå“åº”å¼æ•°æ® è¿™æ ·æ•°æ®æ›´æ–°çš„æ—¶å€™ å¯ä»¥åŠæ—¶æ›´æ–°åˆ°è®¾ç½®çš„æ•°æ®</span>
    <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'ä½ å¥½'</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token string">'500'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// è®¾ç½®æ›´æ–°æ•°æ®çš„æ–¹æ³•</span>
    <span class="token keyword">const</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      ret<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'ä¸‡å²'</span>
    <span class="token punctuation">}</span>
<span class="token comment">// è¿”å›è®¾ç½®çš„æ•°æ® å’Œ è®¾ç½®çš„æ–¹æ³•</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> ret<span class="token punctuation">,</span> name <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>æ€»ç»“ï¼š</strong> é€šå¸¸æ˜¯ç”¨æ¥å®šä¹‰å“åº”å¼<strong>å¯¹è±¡æ•°æ®</strong></p> <h2 id="ç»„åˆapi-ref-è®¾ç½®å•ä¸ªç®€å•çš„å“åº”å¼æ•°æ®-æˆ‘ä¸ç”¨"><a href="#ç»„åˆapi-ref-è®¾ç½®å•ä¸ªç®€å•çš„å“åº”å¼æ•°æ®-æˆ‘ä¸ç”¨" class="header-anchor">#</a> ç»„åˆAPI <code>ref()</code> è®¾ç½®å•ä¸ªç®€å•çš„å“åº”å¼æ•°æ® (æˆ‘ä¸ç”¨)</h2> <blockquote><p>ç›®æ ‡ï¼šæŒæ¡ä½¿ç”¨refå‡½æ•°å®šä¹‰å“åº”å¼æ•°æ®ï¼Œä¸€èˆ¬ç”¨äºç®€å•ç±»å‹æ•°æ®(å•ä¸ªæ•°æ® å•ä¸ªæ•°ç»„)</p></blockquote> <ul><li>refå‡½æ•°ï¼Œå¸¸ç”¨äºç®€å•æ•°æ®ç±»å‹å®šä¹‰ä¸ºå“åº”å¼æ•°æ®</li> <li><code>watch()</code>ç›‘å¬ <code>ref</code>ç®€å•æ•°æ®æ—¶å€™åˆå§‹å€¼ä¸èƒ½ä¸ºnull å¯ä»¥ç”¨<code>reactive()</code>æ¥è®¾ç½®null</li></ul> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/YGWyVm5riUNn83Q.png" alt="image-20210727121921553"></p> <ul><li>refå‡½æ•° å¯ä»¥å‚¨å­˜ å­—ç¬¦ä¸² å’Œ æ•°ç»„(æ•°ç»„ä¸­å¯åŒ…è£¹å¯¹è±¡) (å•ä¸ªæ•°æ® å•ä¸ªæ•°ç»„)
<ul><li>åœ¨ä¿®æ”¹å€¼ï¼Œè·å–å€¼çš„æ—¶å€™ <font color="#ff3040">éœ€è¦.value</font></li> <li>åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨refç”³æ˜çš„å“åº”å¼æ•°æ® <font color="#ff3040">å¯ä»¥çœç•¥.value</font></li></ul></li> <li>å¦‚æœrefçš„å€¼ åœ¨æ¨¡æ¿<code>template</code>ä¸­è¿›è¡Œæ•°æ®ä¿®æ”¹æ—¶å€™ æ— éœ€æ·»åŠ <code>.value</code> å› ä¸ºèƒ½åœ¨æ¨¡æ¿ä¸­ä¿®æ”¹çš„å€¼ éƒ½ä¸éœ€è¦æ·»åŠ <code>.value</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨refç”³æ˜çš„å“åº”å¼æ•°æ®ï¼Œå¯ä»¥çœç•¥.value --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ä¿®æ”¹æ•°æ®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.nameæ•°æ®</span>
    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'ls'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">updateName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// åœ¨ä¿®æ”¹å€¼è·å–å€¼çš„æ—¶å€™ï¼Œéœ€è¦.value</span>
      name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'zs'</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 2.ageæ•°æ®</span>
    <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

    <span class="token comment">// refå¸¸ç”¨å®šä¹‰ç®€å•æ•°æ®ç±»å‹çš„å“åº”å¼æ•°æ®</span>
    <span class="token comment">// å…¶å®ä¹Ÿå¯ä»¥å®šä¹‰å¤æ‚æ•°æ®ç±»å‹çš„å“åº”å¼æ•°æ®</span>
    <span class="token comment">// å¯¹äºæ•°æ®æœªä¹‹çš„æƒ…å†µä¸‹ ref æ˜¯æœ€é€‚ç”¨çš„</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> updateName<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>æ€»ç»“</p> <ol><li>å½“ä½ æ˜ç¡®çŸ¥é“éœ€è¦çš„æ˜¯ä¸€ä¸ªå“åº”å¼æ•°æ®  <em>å¯¹è±¡</em>  é‚£ä¹ˆå°±ä½¿ç”¨ reactive å³å¯ å…¶ä»–æƒ…å†µä½¿ç”¨ref</li></ol> <h2 id="ç»„åˆapi-torefs-è§£æ„å“åº”æ•°æ®-æˆ‘ç”¨"><a href="#ç»„åˆapi-torefs-è§£æ„å“åº”æ•°æ®-æˆ‘ç”¨" class="header-anchor">#</a> ç»„åˆAPI <code>toRefs()</code> è§£æ„å“åº”æ•°æ® (æˆ‘ç”¨)</h2> <ul><li><code>toRefs()</code>æœ‰ä¸¤ä¸ªåœºæ™¯
<ul><li>ç¬¬ä¸€ä¸ªæ˜¯ è§£æ„<code>reactive()</code>å£°æ˜çš„æ•°æ® å¯ä»¥å»é™¤å‘½åçš„å˜é‡ ç»“æ„æ–¹ä¾¿è°ƒç”¨åœºæ™¯</li> <li>ç¬¬äºŒä¸ªæ˜¯ çˆ¶å­ä¼ å€¼çš„æ—¶å€™ æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„å‚æ•° è‡ªåŠ¨è§£æ„ ç›´æ¥è°ƒç”¨å³å¯</li></ul></li> <li><font color="#ff3040">Vueä¸­å¯¼å…¥æ–¹æ³• éœ€è¦ç”¨ importæŒ‰éœ€åŠ è½½ æ‰å¯ä»¥åœ¨ <code>setup()</code>é‡Œé¢ä½¿ç”¨è¯¥æ–¹æ³•</font></li> <li><font color="#ff3040">ç»“æ„åè·å–å†…éƒ¨æ•°æ®å€¼çš„æ—¶å€™éœ€è¦åŠ .value å¦‚æœ<code>return</code>ä¸éœ€è¦value</font></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// ä½¿ç”¨äº†è§£æ„èµ‹å€¼è¯­æ³•åˆ›å»ºäº†å˜é‡myTitle</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> myTitle <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token comment">// ä½¿ç”¨æ•°æ®çš„æ—¶å€™ å¿…é¡»è¦åŠ value</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myTitle<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
</code></pre></div><h3 id="ç»“æ„æ–¹ä¾¿è°ƒç”¨åœºæ™¯"><a href="#ç»“æ„æ–¹ä¾¿è°ƒç”¨åœºæ™¯" class="header-anchor">#</a> <strong>ç»“æ„æ–¹ä¾¿è°ƒç”¨åœºæ™¯</strong></h3> <blockquote><p>ç›®æ ‡ï¼šæŒæ¡ä½¿ç”¨<code>toRefs()</code>å‡½æ•°è½¬æ¢å“åº”å¼å¯¹è±¡ä¸­<strong>æŸä¸ª</strong>å±æ€§ä¸ºå•ç‹¬å“åº”å¼æ•°æ®ï¼Œå¹¶ä¸”å€¼æ˜¯å…³è”çš„ã€‚</p> <p>ä½¿ç”¨åœºæ™¯ï¼šæŠŠ<code>reactive()</code>é‡Œé¢å•ç‹¬çš„å“åº”å¼æ•°æ® è¿›è¡Œå•ç‹¬æ‹†åˆ†æ—¶å€™ä½¿ç”¨</p></blockquote> <ul><li>å•ç‹¬å®šä¹‰å“åº”å¼æ•°æ®(åœ¨å¤šä¸ªå“åº”å¼ä¸­ æå–å•ç‹¬ä¸€ä¸ªçš„å€¼)
<ul><li><code>toRefs()</code> å’Œ <code>reactive()</code> ç›¸äº’å…³è”
<ul><li><code>reactive()</code> å®šä¹‰äº†å¤šä¸ªå“åº”å¼ å¦‚æœæƒ³å•ç‹¬è°ƒç”¨ éœ€è¦ç”¨åˆ°<code>toRefs()</code> å•ç‹¬è°ƒç”¨å‡ºæ¥(éœ€è¦<code>return</code>è¿”å›)</li> <li>å¦‚æœä½ æ²¡æœ‰ç»“æ„ æƒ³æŠŠ <code>reactive()</code>æ•°æ®å…¨éƒ¨å¯¼å‡º å°±éœ€è¦æ‰©å±•è¿ç®—ç¬¦<code>...</code></li></ul></li></ul></li></ul> <blockquote><p>æ¼”ç¤ºä»£ç </p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>overall-header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 4.é€šè¿‡toRefsè§£æ„åå¯ä»¥ç›´æ¥è°ƒç”¨å“¦ --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reveal-top<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>overall-header-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>overall-header-right<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> scrollReveal <span class="token keyword">from</span> <span class="token string">'scrollreveal'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1.reactive()å£°æ˜æ•°å€¼</span>
    <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      age<span class="token operator">:</span> <span class="token number">22</span>
      name<span class="token operator">:</span> <span class="token string">'ä½ å¥½'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 2.é€šè¿‡toRefs()ç»“æ„å£°æ˜çš„æ•°å€¼</span>
    <span class="token keyword">const</span> retOut <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
    <span class="token comment">// 3.è®°å¾—é€šè¿‡æ‰©å±•è¿ç®—ç¬¦å¯¼å‡º</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>retOut <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="çˆ¶å­ä¼ å€¼åœºæ™¯"><a href="#çˆ¶å­ä¼ å€¼åœºæ™¯" class="header-anchor">#</a> <strong>çˆ¶å­ä¼ å€¼åœºæ™¯</strong></h3> <ul><li>toRefs ç”¨äºå°†å“åº”å¼å¯¹è±¡è½¬æ¢ä¸ºç»“æœå¯¹è±¡ï¼Œå…¶ä¸­ç»“æœå¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æ˜¯æŒ‡å‘åŸå§‹å¯¹è±¡ç›¸åº”å±æ€§çš„refã€‚</li> <li>å¸¸ç”¨äºes6çš„è§£æ„èµ‹å€¼æ“ä½œï¼Œå› ä¸ºåœ¨å¯¹ä¸€ä¸ªå“åº”å¼å¯¹è±¡ç›´æ¥è§£æ„æ—¶è§£æ„åçš„æ•°æ®å°†ä¸å†æœ‰å“åº”å¼ï¼Œè€Œä½¿ç”¨toRefså¯ä»¥æ–¹ä¾¿è§£å†³è¿™ä¸€é—®é¢˜ã€‚</li> <li>toRefsåçš„refæ•°æ®å¦‚æœæ˜¯å¤æ‚ç±»å‹æ•°æ®æ—¶ï¼Œä¸æ˜¯åŸå§‹æ•°æ®çš„æ‹·è´ï¼Œè€Œæ˜¯å¼•ç”¨ï¼Œæ”¹å˜ç»“æœæ•°æ®çš„å€¼ä¹Ÿä¼šåŒæ—¶æ”¹å˜åŸå§‹æ•°æ®</li> <li>ä½œç”¨å…¶å®å’Œ toRef ç±»ä¼¼ï¼Œåªä¸è¿‡ toRef æ˜¯å¯¹ä¸€ä¸ªä¸ªå±æ€§æ‰‹åŠ¨èµ‹å€¼ï¼Œè€Œ toRefs æ˜¯è‡ªåŠ¨è§£æ„èµ‹å€¼ã€‚</li></ul> <blockquote><p>æ¼”ç¤ºä»£ç </p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 1. æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„å‚æ•°</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span>title<span class="token punctuation">]</span><span class="token punctuation">,</span>
  
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 2. ä½¿ç”¨äº†è§£æ„èµ‹å€¼è¯­æ³•åˆ›å»ºäº†å˜é‡myTitle</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> myTitle <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token comment">// 3. å†…éƒ¨ä½¿ç”¨æ•°æ®çš„æ—¶å€™ å¿…é¡»è¦åŠ value</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myTitle<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token comment">// 4. returnçš„æ—¶å€™ ä¸éœ€è¦å¸¦.value</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> myTitle <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><ul><li><code>toRef()</code> å°±ä¸ä»‹ç»äº† å’Œä¸Šé¢ä¸€æ ·</li></ul> <h2 id="å“åº”å¼æ•°æ®ä½¿ç”¨è§„èŒƒ"><a href="#å“åº”å¼æ•°æ®ä½¿ç”¨è§„èŒƒ" class="header-anchor">#</a> å“åº”å¼æ•°æ®ä½¿ç”¨è§„èŒƒ</h2> <ul><li>å°½é‡ä¸è¦æ··ç€ç”¨ï¼Œ<code>reactive</code> å’Œ <code>ref</code> é€‰ä¸€ç§ï¼Œ<code>toRef</code> å’Œ <code>toRefs</code> é€‰ä¸€ç§ï¼Œä¸ç„¶ä»£ç ä¼šå¾ˆä¹±ã€‚</li> <li>æˆ‘å–œæ¬¢<code>reactive</code> å’Œ<code>toRefs</code> æ­é…ä½¿ç”¨ y</li></ul> <h2 id="ç»„åˆapi-computedè®¡ç®—å±æ€§"><a href="#ç»„åˆapi-computedè®¡ç®—å±æ€§" class="header-anchor">#</a> ç»„åˆAPI <code>computed</code>è®¡ç®—å±æ€§</h2> <blockquote><p>ç›®æ ‡ï¼šæŒæ¡ä½¿ç”¨computedå‡½æ•°å®šä¹‰è®¡ç®—å±æ€§</p></blockquote> <ul><li><p><font color="#ff3040">Vueä¸­å¯¼å…¥æ–¹æ³• éœ€è¦ç”¨ importæŒ‰éœ€åŠ è½½ æ‰å¯ä»¥åœ¨ <code>setup()</code>é‡Œé¢ä½¿ç”¨è¯¥æ–¹æ³•</font></p></li> <li><p>è®¡ç®—å±æ€§ä¸éœ€è¦è®¾ç½®å“åº”å¼æ•°æ®(<code>ref</code> <code>toref</code> æ•°æ®æœ¬èº«å°±æ˜¯åŠ¨æ€è®¡ç®—çš„)</p></li> <li><p>è®¡ç®—å±æ€§çš„åŸæ•°æ®è¢«ä¿®æ”¹æ—¶å€™ ä¼šè§¦å‘è®¡ç®—å±æ€§ åŒæ­¥æ›´æ–°æ–°çš„æ•°æ®(<code>setup()</code> åªèƒ½è§¦å‘ä¸€æ¬¡) ç›¸å½“äºå“åº”å¼</p></li> <li><p>è®¡ç®—å±æ€§ä¸æ”¯æŒå¼‚æ­¥(æ‰æ¥å£)åªæ”¯æŒåŒæ­¥ <code>async</code>å’Œ<code>promise</code></p></li> <li><p><code>computed</code>å‡½æ•°ï¼Œæ˜¯ç”¨æ¥å®šä¹‰è®¡ç®—å±æ€§çš„ï¼Œè®¡ç®—å±æ€§ä¸èƒ½ä¿®æ”¹ã€‚</p> <ul><li>è®¡ç®—å±æ€§è‡ªå¸¦æ‰§è¡Œ æ— éœ€æ”¾åœ¨ç”Ÿå‘½å‘¨æœŸä¸­è°ƒç”¨ å†™å®Œå³å¯</li></ul></li> <li><p>è®¡ç®—å±æ€§å¦‚æœåœ¨æ¨¡æ¿ä¸­è°ƒç”¨ éœ€è¦è®¾ç½®åˆ¤æ–­ å› ä¸ºè®¡ç®—å±æ€§æœ‰å»¶è¿Ÿ æ‰€æœ‰éœ€è¦åˆ¤æ–­ å¦åˆ™ä¼šæŠ¥é”™1</p></li> <li><p>è®¡ç®—å±æ€§ä¸å¯ä»¥ä¿®æ”¹åŸæ¥çš„æ•°æ® æ¯”å¦‚ <code>push()</code>è¿›å»ä¸€ä¸ªæ–°æ•°æ® å¦‚æœéœ€è¦ä¿®æ”¹åŸæ•°æ® éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡ æ¥æ”¶ä¿®æ”¹åçš„æ•°æ®</p> <ul><li>è®¡ç®—å±æ€§æ¥çš„å€¼ å¦‚æœè°ƒç”¨ éœ€è¦ <code>å˜é‡å.value</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// åˆ›å»ºä¸€ä¸ªè®¡ç®—å±æ€§ å¹¶ä¸”è®¾ç½®å˜é‡æ¥æ”¶</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// å¦‚æœæƒ³è°ƒç”¨è®¡ç®—å±æ€§æ¥æ”¶çš„å˜é‡ éœ€è¦.value</span>
list<span class="token punctuation">.</span>value 
</code></pre></div></li></ul> <blockquote><p>æ¼”ç¤ºä¾‹å­</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>ä»Šå¹´ï¼š{{age}}å²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>åå¹´ï¼š{{newAge}}å²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. è®¡ç®—å±æ€§ï¼šå½“ä½ éœ€è¦ä¾èµ–ç°æœ‰çš„å“åº”å¼æ•°æ®ï¼Œæ ¹æ®ä¸€å®šé€»è¾‘å¾—åˆ°ä¸€ä¸ªæ–°çš„æ•°æ®ã€‚</span>
    <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
    <span class="token comment">// å¾—åˆ°åå¹´çš„å¹´é¾„</span>
    <span class="token keyword">const</span> newAge <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token comment">// è¯¥å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯è®¡ç®—å±æ€§çš„å€¼</span>
      <span class="token keyword">return</span> age<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>age<span class="token punctuation">,</span> newAge<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="computedè®¡ç®—å±æ€§-é«˜çº§ä½¿ç”¨æ–¹æ³•"><a href="#computedè®¡ç®—å±æ€§-é«˜çº§ä½¿ç”¨æ–¹æ³•" class="header-anchor">#</a> <code>computed</code>è®¡ç®—å±æ€§ é«˜çº§ä½¿ç”¨æ–¹æ³•</h3> <ul><li>è®¡ç®—å±æ€§çš„é«˜çº§å†™æ³• <code>get()</code> å’Œ <code>set()</code> æ— éœ€è®¾ç½®<code>return</code> <ul><li><code>get()</code>è¿›è¡Œæ™®é€šçš„è®¡ç®—æµç¨‹</li> <li><code>set(v)</code>åœ¨<code>get()</code>å¤„ç†å‰ä¿®æ”¹éœ€è¦è®¡ç®—æ•°æ® væ˜¯æ¥æ”¶å…¶æ•°æ®</li></ul></li></ul> <blockquote><p>æ¼”ç¤ºä¾‹å­</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- æ¨¡æ¿ä¸­ä¸è¦æ±‚æœ‰å”¯ä¸€çš„æ ¹èŠ‚ç‚¹ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>æˆ‘çš„åˆå§‹å€¼{{ret}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>æˆ‘çš„æ›´æ–°å€¼{{newRet}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹æˆ‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// å¯¼å…¥å­ç»„ä»¶</span>
<span class="token comment">// å¯¼å…¥Vue3çš„ç”Ÿå‘½å‘¨æœŸ</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/runtime-core'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®ä¸€ä¸ªè¦ä¿®æ”¹çš„å¸¸é‡</span>
    <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> newRet <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// è®¡ç®—å±æ€§çš„é«˜çº§ç”¨æ³•</span>
      <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// get()æ˜¯æ™®é€šçš„è®¡ç®—å¤„ç†æ•°æ®</span>
        <span class="token keyword">return</span> ret<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// set(v)åœ¨get()å¤„ç†å‰ä¿®æ”¹éœ€è¦è®¡ç®—æ•°æ® væ˜¯æ¥æ”¶å…¶æ•°æ®</span>
        ret<span class="token punctuation">.</span>value <span class="token operator">=</span> v
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// ç‚¹å‡»æŒ‰é’® æŠŠè®¡ç®—å±æ€§çš„æ•°æ®è¿›è¡Œä¿®æ”¹</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeN</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      ret<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">18</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è¿”å›æ•°æ®</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> changeN<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> newRet <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>ç›®çš„ï¼šè®©è®¡ç®—å±æ€§æ”¯æŒåŒå‘æ•°æ®ç»‘å®šï¼ˆå¯ä»¥æ›´æ–°è®¡ç®—å±æ€§çš„å€¼ï¼Œå…¶å®å°±æ˜¯è°ƒç”¨setæ–¹æ³•ï¼‰</p> <p>æ€»ç»“ï¼šè®¡ç®—å±æ€§ä¸¤ç§ç”¨æ³•</p> <ul><li>ç»™computedä¼ å…¥å‡½æ•°ï¼Œè¿”å›å€¼å°±æ˜¯è®¡ç®—å±æ€§çš„å€¼</li> <li>ç»™computedä¼ å…¥å¯¹è±¡ï¼Œgetè·å–è®¡ç®—å±æ€§çš„å€¼ï¼Œsetç›‘å¬è®¡ç®—å±æ€§æ”¹å˜ã€‚</li></ul> <h2 id="ç»„åˆapi-watch-å‡½æ•°æ–¹æ³•-ç›‘å¬æ•°æ®"><a href="#ç»„åˆapi-watch-å‡½æ•°æ–¹æ³•-ç›‘å¬æ•°æ®" class="header-anchor">#</a> ç»„åˆAPI <code>watch()</code>å‡½æ•°æ–¹æ³• ç›‘å¬æ•°æ®</h2> <blockquote><p>ç›®æ ‡ï¼šæŒæ¡ä½¿ç”¨watchå‡½æ•°å®šä¹‰ä¾¦å¬å™¨</p></blockquote> <ul><li><font color="#ff3040">Vueä¸­å¯¼å…¥æ–¹æ³• éœ€è¦ç”¨ importæŒ‰éœ€åŠ è½½ æ‰å¯ä»¥åœ¨ <code>setup()</code>é‡Œé¢ä½¿ç”¨è¯¥æ–¹æ³•</font></li> <li><code>watch()</code>ç›‘å¬ <code>ref</code>ç®€å•æ•°æ®æ—¶å€™åˆå§‹å€¼ä¸èƒ½ä¸ºnull å¯ä»¥ç”¨<code>reactive()</code>æ¥è®¾ç½®null</li></ul> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/YGWyVm5riUNn83Q.png" alt="image-20210727121921553"></p> <ul><li>å®šä¹‰è®¡ç®—å±æ€§ï¼š
<ul><li><code>watch()</code>æ˜¯å‡½æ•°æ–¹æ³•ï¼Œæ˜¯ç”¨æ¥å®šä¹‰ä¾¦å¬å™¨çš„ ç›‘å¬æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹
<ul><li><code>watch()</code>æœ‰ä¸¤ä¸ªå‚æ•° å‚æ•°1æ˜¯ä¿®æ”¹åçš„æ•°æ® å‚æ•°2æ˜¯ä¿®æ”¹å‰çš„æ•°æ®</li></ul></li></ul></li> <li>Vueä¸­<code>watch()</code>é‡Œé¢çš„ å››ç§æ–¹æ³•å’Œä¸¤ç§æ¨¡å¼
<ul><li>ç›‘å¬<code>ref()</code>å®šä¹‰çš„å“åº”å¼æ•°æ® (ç›‘å¬ç®€å•æ•°æ®)
<ul><li>æ•°ç»„æ–¹æ³•å¯ä»¥ç›‘å¬å¤šä¸ª <code>ref()</code>æ•°æ®</li></ul></li> <li>ç›‘å¬<code>reactive()</code>å®šä¹‰çš„å“åº”å¼æ•°æ® (ç›‘å¬å¤æ‚å¯¹è±¡æ•°æ®)
<ul><li>ç›‘å¬<code>reactive()</code>å®šä¹‰çš„å“åº”å¼æ•°æ®ï¼ŒæŸä¸€ä¸ªå±æ€§</li></ul></li> <li>å‡½æ•°æ–¹å¼ç›‘å¬æ•°æ®
<ul><li>æ·±åº¦ç›‘å¬ <code>deep: true,</code></li> <li>é»˜è®¤æ‰§è¡Œ <code>immediate: true</code></li></ul></li></ul></li> <li><font color="#ff3040">ç»„ä»¶é¦–æ¬¡åŠ è½½æ•°æ®æ—¶ï¼Œç«‹åˆ»è§¦å‘ä¸€æ¬¡  <code>immediate: true</code></font></li></ul> <h3 id="watch-å‡½æ•°æ–¹å¼-ç›‘å¬æ•°æ®-æ¨è"><a href="#watch-å‡½æ•°æ–¹å¼-ç›‘å¬æ•°æ®-æ¨è" class="header-anchor">#</a> <strong><code>watch()</code>å‡½æ•°æ–¹å¼ ç›‘å¬æ•°æ® (æ¨è)</strong></h3> <ul><li>å‡½æ•°æ–¹æ³•ç›‘å¬æ•°æ® é»˜è®¤ä¸æ”¯æŒæ·±åº¦ç›‘å¬ éœ€è¦æ‰‹åŠ¨è®¾ç½® <code>deep: true,</code></li> <li>å‡½æ•°æ–¹å¼ç›‘å¬æŒ‡å®šæ•°æ® æœ‰ä¸¤ä¸ªå±æ€§
<ul><li>ä¾¦å¬å¯¹è±¡ä¸­çš„å­å±æ€§ <code>deep: true,</code></li> <li>ç»„ä»¶é¦–æ¬¡åŠ è½½æ•°æ®æ—¶ï¼Œç«‹åˆ»è§¦å‘ä¸€æ¬¡  <code>immedate: true</code></li></ul></li></ul> <blockquote><p>æ¼”ç¤ºä¾‹å­</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç›‘å¬çš„å‚æ•°   </span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      uname<span class="token operator">:</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span>
      friend<span class="token operator">:</span> <span class="token punctuation">{</span>
        info<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
        ages<span class="token operator">:</span> <span class="token number">13</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>  
<span class="token comment">// å‡½æ•°æ–¹å¼ ç›‘å¬æ•°æ®  watch(() =&gt; éœ€è¦ç›‘æ§çš„æ•°æ®, (æ–°çš„å€¼, æ—§çš„å€¼) =&gt; { è¿›è¡Œçš„æ“ä½œ })</span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>friend<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newD<span class="token punctuation">,</span> oleD</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
    <span class="token comment">// è®¾ç½®watch()ç›‘å¬ç®€å•æ•°æ®</span>
    <span class="token comment">// å‚æ•°1 æ˜¯ç›‘å¬çš„ä¿®æ”¹åçš„æ•°æ®</span>
    <span class="token comment">// å‚æ•°2 æ˜¯ç›‘å¬çš„ä¿®æ”¹å‰çš„æ•°æ®</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newD<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      <span class="token comment">// ä¾¦å¬å¯¹è±¡ä¸­çš„å­å±æ€§ (é»˜è®¤ä¸çŸ¥é“æ˜¯å•¥)</span>
      deep<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// ç»„ä»¶é¦–æ¬¡åŠ è½½æ•°æ®æ—¶ï¼Œç«‹åˆ»è§¦å‘ä¸€æ¬¡(é»˜è®¤false)</span>
      immediate<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// ç»„ä»¶é¦–æ¬¡åŠ è½½æ•°æ®æ—¶ï¼Œç«‹åˆ»è§¦å‘ä¸€æ¬¡ (ç±»ä¼¼ç”Ÿå‘½å‘¨æœŸ)</span>
</code></pre></div><h3 id="watch-ç›‘å¬ref-å®šä¹‰çš„ç®€å•æ•°æ®"><a href="#watch-ç›‘å¬ref-å®šä¹‰çš„ç®€å•æ•°æ®" class="header-anchor">#</a> <strong><code>watch()</code> ç›‘å¬<code>ref()</code> å®šä¹‰çš„ç®€å•æ•°æ®</strong></h3> <ul><li>ç›‘å¬<code>ref()</code>å®šä¹‰çš„ç®€å•å“åº”å¼æ•°æ®
<ul><li>é€‚åˆç›‘å¬é‡Œé¢çš„æ•°æ®<code>ref()</code> çš„ç®€å•æ•°æ®</li></ul></li> <li><code>watch(ç›‘å¬æ•°æ®,(æ–°æ•°æ®å‚æ•°,æ—§æ•°æ®å‚æ•°)=&gt;{ })</code></li> <li>ç»„ä»¶é¦–æ¬¡åŠ è½½æ•°æ®æ—¶ï¼Œç«‹åˆ»è§¦å‘ä¸€æ¬¡  <code>immediate: true</code></li> <li><code>watch()</code>ç›‘å¬ <code>ref</code>ç®€å•æ•°æ®æ—¶å€™åˆå§‹å€¼ä¸èƒ½ä¸ºnull å¯ä»¥ç”¨<code>reactive()</code>æ¥è®¾ç½®null</li></ul> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/DRXYBMZxnaC4fzq.png" alt="image-20210727113315454"></p> <blockquote><p>æ¼”ç¤ºä¾‹å­</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- æ¨¡æ¿ä¸­ä¸è¦æ±‚æœ‰å”¯ä¸€çš„æ ¹èŠ‚ç‚¹ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>æˆ‘çš„åˆå§‹å€¼{{rets}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeRet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹æˆ‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// å¯¼å…¥å­ç»„ä»¶</span>
<span class="token comment">// å¯¼å…¥Vue3çš„ç»„ä»¶</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®ä¸€ä¸ªç®€å•å¸¸é‡</span>
    <span class="token keyword">const</span> rets <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token comment">// è®¾ç½®ä¸€ä¸ªè‡ªå¢å‡½æ•°æ–¹æ³• æ”¹å˜æ•°æ®</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeRet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç»™æ•°æ®ç‚¹å‡»ä¸€æ¬¡ +1</span>
      rets<span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è®¾ç½®watch()ç›‘å¬ç®€å•æ•°æ®</span>
    <span class="token comment">// å‚æ•°1 æ˜¯ç›‘å¬çš„ä¿®æ”¹åçš„æ•°æ®</span>
    <span class="token comment">// å‚æ•°2 æ˜¯ç›‘å¬çš„ä¿®æ”¹å‰çš„æ•°æ®</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>rets<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newT<span class="token punctuation">,</span>oleT</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">,</span>oleT<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// ç»„ä»¶é¦–æ¬¡åŠ è½½æ•°æ®æ—¶ï¼Œç«‹åˆ»è§¦å‘ä¸€æ¬¡ (ç±»ä¼¼ç”Ÿå‘½å‘¨æœŸ)</span>
    <span class="token comment">// æŠŠæ•°æ®returnè¿”å›å‡ºå»</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> rets<span class="token punctuation">,</span> changeRet <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="watch-ç›‘å¬ref-å¤šä¸ªå®šä¹‰çš„ç®€å•æ•°æ®"><a href="#watch-ç›‘å¬ref-å¤šä¸ªå®šä¹‰çš„ç®€å•æ•°æ®" class="header-anchor">#</a> <strong><code>watch()</code> ç›‘å¬<code>ref()</code>å¤šä¸ªå®šä¹‰çš„ç®€å•æ•°æ®</strong></h3> <ul><li>æ•°ç»„æ–¹å¼ç›‘å¬å¤šä¸ª<code>ref()</code> ç®€å•æ•°æ®
<ul><li>è®¾ç½®çš„æ•°ç»„ä¸­ åªè¦æœ‰ä¸€ä¸ª <code>ref()</code> è®¾ç½®çš„æ•°æ®å˜åŒ– å°±ä¼šç›‘å¬åˆ°</li></ul></li> <li>ç»„ä»¶é¦–æ¬¡åŠ è½½æ•°æ®æ—¶ï¼Œç«‹åˆ»è§¦å‘ä¸€æ¬¡  <code>immediate: true</code></li></ul> <blockquote><p>æ¼”ç¤ºä¾‹å­</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- æ¨¡æ¿ä¸­ä¸è¦æ±‚æœ‰å”¯ä¸€çš„æ ¹èŠ‚ç‚¹ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{rets}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{retx}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeRet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹æˆ‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// å¯¼å…¥å­ç»„ä»¶</span>
<span class="token comment">// å¯¼å…¥Vue3çš„ç»„ä»¶</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®ä¸¤ä¸ªç®€å•ref()æ•°æ®</span>
    <span class="token keyword">const</span> rets <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> retx <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
    <span class="token comment">// è®¾ç½®ä¸€ä¸ªæ–¹æ³• ä¿®æ”¹ä¸¤ä¸ªç®€å•ref()çš„æ•°æ®</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeRet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ä¿®æ”¹å¯¹è±¡é‡Œé¢çš„æ•°æ®</span>
      rets<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'æå››'</span>
      retx<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">18</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è®¾ç½®watch()ç›‘å¬ ä½¿ç”¨æ•°ç»„çš„æ–¹æ³• ç›‘å¬ref()çš„æ•°æ®</span>
    <span class="token comment">// å‚æ•°1 æ˜¯ç›‘å¬çš„ä¿®æ”¹åçš„æ•°æ®</span>
    <span class="token comment">// å‚æ•°2 æ˜¯ç›‘å¬çš„ä¿®æ”¹å‰çš„æ•°æ®</span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>retx<span class="token punctuation">,</span> rets<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newT<span class="token punctuation">,</span>oleT</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç›‘å¬æ‰€æœ‰çš„ä¿®æ”¹å‰ ä¿®æ”¹åçš„æ•°æ®</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">,</span>oleT<span class="token punctuation">)</span>
      <span class="token comment">// ç›‘å¬æŒ‡å®šçš„ä¿®æ”¹åçš„æ•°æ®</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oleT<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oleT<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token comment">// ç›‘å¬æŒ‡å®šçš„ä¿®æ”¹åçš„æ•°æ®</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// ç»„ä»¶é¦–æ¬¡åŠ è½½æ•°æ®æ—¶ï¼Œç«‹åˆ»è§¦å‘ä¸€æ¬¡ (ç±»ä¼¼ç”Ÿå‘½å‘¨æœŸ)</span>
    <span class="token comment">// æŠŠæ•°æ®returnè¿”å›å‡ºå»</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> rets<span class="token punctuation">,</span> retx<span class="token punctuation">,</span> changeRet <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="watch-ç›‘å¬reactive-å®šä¹‰çš„å¤æ‚å¯¹è±¡"><a href="#watch-ç›‘å¬reactive-å®šä¹‰çš„å¤æ‚å¯¹è±¡" class="header-anchor">#</a> <strong><code>watch()</code> ç›‘å¬<code>reactive()</code> å®šä¹‰çš„å¤æ‚å¯¹è±¡</strong></h3> <ul><li>ç›‘å¬<code>reactive()</code>å®šä¹‰çš„å¤æ‚å“åº”å¼æ‰€æœ‰æ•°æ®(ç›‘å¬æ‰€æœ‰å¤æ‚å¯¹è±¡æ•°æ®)
<ul><li>å¦‚æœç›‘å¬ä¸€æ•´ä¸ªå¯¹è±¡ é‚£ä¹ˆé‡Œé¢æ‰€æœ‰çš„å€¼åªè¦å˜åŒ– å°±ä¼šæ£€æµ‹åˆ°</li></ul></li> <li>å¯ä»¥ç›‘å¬æŒ‡å®šçš„æ•°æ®å¯¹è±¡ä¸­çš„æ•°æ®</li> <li>ç»„ä»¶é¦–æ¬¡åŠ è½½æ•°æ®æ—¶ï¼Œç«‹åˆ»è§¦å‘ä¸€æ¬¡  <code>immediate: true</code></li></ul> <blockquote><p>æ¼”ç¤ºä¾‹å­</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- æ¨¡æ¿ä¸­ä¸è¦æ±‚æœ‰å”¯ä¸€çš„æ ¹èŠ‚ç‚¹ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>æˆ‘çš„åˆå§‹å€¼{{rets.age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeRet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹æˆ‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// å¯¼å…¥å­ç»„ä»¶</span>
<span class="token comment">// å¯¼å…¥Vue3çš„ç»„ä»¶</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®ä¸€ä¸ªå¯¹è±¡æ•°æ®</span>
    <span class="token keyword">const</span> rets <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      uname<span class="token operator">:</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      friend<span class="token operator">:</span> <span class="token punctuation">{</span>
        info<span class="token operator">:</span> <span class="token string">'hello'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// è®¾ç½®ä¸€ä¸ªä¿®æ”¹å¯¹è±¡æ•°æ®çš„æ–¹æ³•</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeRet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ä¿®æ”¹å¯¹è±¡é‡Œé¢çš„æ•°æ®</span>
      rets<span class="token punctuation">.</span>age <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è®¾ç½®watch()ç›‘å¬å¯¹è±¡é‡Œé¢çš„æ•°æ®</span>
    <span class="token comment">// å‚æ•°1 æ˜¯ç›‘å¬çš„ä¿®æ”¹åçš„æ•°æ®</span>
    <span class="token comment">// å‚æ•°2 æ˜¯ç›‘å¬çš„ä¿®æ”¹å‰çš„æ•°æ®</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>rets<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newT<span class="token punctuation">,</span>oleT</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// å¯ä»¥rets.æ¥ç›‘å¬æŒ‡å®šçš„æ•°æ®å¯¹è±¡ä¸­çš„æ•°æ®</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">,</span>oleT<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// ç»„ä»¶é¦–æ¬¡åŠ è½½æ•°æ®æ—¶ï¼Œç«‹åˆ»è§¦å‘ä¸€æ¬¡ (ç±»ä¼¼ç”Ÿå‘½å‘¨æœŸ)</span>
    <span class="token comment">// æŠŠæ•°æ®returnè¿”å›å‡ºå»</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> rets<span class="token punctuation">,</span> changeRet <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>ç›‘å¬<code>reactive()</code>å®šä¹‰çš„å¤æ‚å“åº”å¼çš„æŸæ¡æ•°æ®(ç›‘å¬ä¸€ä¸ª)
<ul><li>ç›´æ¥åœ¨ ç›‘å¬çš„ä¸¤ä¸ªå‚æ•°åé¢è®¾ç½®ç›‘å¬çš„æŒ‡å®šå±æ€§å€¼å³å¯</li></ul></li></ul> <blockquote><p>æ¼”ç¤ºä¾‹å­</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span>rets<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">oleT<span class="token punctuation">,</span> newT</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç›‘å¬å¯¹è±¡é‡Œé¢çš„æ‰€æœ‰æ•°æ®</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">,</span>oleT<span class="token punctuation">)</span>
  <span class="token comment">// ç›‘å¬å¯¹è±¡é‡Œé¢æŒ‡å®šçš„æ•°æ®</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>oleT<span class="token punctuation">.</span>age<span class="token punctuation">,</span> newT<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>ç›‘å¬å¯¹è±¡é‡Œçš„å¯¹è±¡æ•°æ®
<ul><li>å¦‚æœç›‘å¬çš„å¯¹è±¡é‡Œé¢ è¿˜æœ‰ä¸€å±‚æ•°æ® å¯ä»¥ä¸€ç¯å¥—ä¸€ç¯çš„ç›‘å¬</li></ul></li></ul> <blockquote><p>æ¼”ç¤ºä¾‹å­</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- æ¨¡æ¿ä¸­ä¸è¦æ±‚æœ‰å”¯ä¸€çš„æ ¹èŠ‚ç‚¹ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>æˆ‘çš„åˆå§‹å€¼{{rets.friend.ages}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeRet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹æˆ‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// å¯¼å…¥å­ç»„ä»¶</span>
<span class="token comment">// å¯¼å…¥Vue3çš„ç»„ä»¶</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®ä¸€ä¸ªå¯¹è±¡æ•°æ®</span>
    <span class="token keyword">const</span> rets <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      uname<span class="token operator">:</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span>
      friend<span class="token operator">:</span> <span class="token punctuation">{</span>
        info<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
        ages<span class="token operator">:</span> <span class="token number">13</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// è®¾ç½®ä¸€ä¸ªä¿®æ”¹å¯¹è±¡æ•°æ®çš„æ–¹æ³•</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeRet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ä¿®æ”¹å¯¹è±¡é‡Œé¢çš„æ•°æ®</span>
      rets<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>ages <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è®¾ç½®watch()ç›‘å¬å¯¹è±¡é‡Œé¢çš„æ•°æ®</span>
    <span class="token comment">// å‚æ•°1 æ˜¯ç›‘å¬çš„ä¿®æ”¹åçš„æ•°æ®</span>
    <span class="token comment">// å‚æ•°2 æ˜¯ç›‘å¬çš„ä¿®æ”¹å‰çš„æ•°æ®</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>rets<span class="token punctuation">.</span>friend<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newT<span class="token punctuation">,</span>oleT</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newT<span class="token punctuation">,</span>oleT<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// ç»„ä»¶é¦–æ¬¡åŠ è½½æ•°æ®æ—¶ï¼Œç«‹åˆ»è§¦å‘ä¸€æ¬¡ (ç±»ä¼¼ç”Ÿå‘½å‘¨æœŸ)</span>
    <span class="token comment">// æŠŠæ•°æ®returnè¿”å›å‡ºå»</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> rets<span class="token punctuation">,</span> changeRet <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><strong>æ€»ç»“ï¼š</strong> æŒæ¡watchçš„å„ç§ç”¨æ³•ã€‚</p> <ol><li>ä¾¦å¬ç®€å•ç±»å‹æ•°æ®</li> <li>ä¾¦å¬å¯¹è±¡ç±»å‹æ•°æ®</li> <li>ä¾¦å¬å¤šä¸ªæ•°æ®çš„å˜åŒ–</li> <li>ä¾¦å¬æŸä¸ªå±æ€§çš„å˜åŒ–</li></ol> <h2 id="ç»„åˆapi-ref-ç›´æ¥æ“ä½œdomèŠ‚ç‚¹"><a href="#ç»„åˆapi-ref-ç›´æ¥æ“ä½œdomèŠ‚ç‚¹" class="header-anchor">#</a> ç»„åˆAPI <code>ref()</code> ç›´æ¥æ“ä½œDomèŠ‚ç‚¹</h2> <blockquote><p>ç›®æ ‡ï¼šæŒæ¡ä½¿ç”¨refå±æ€§ç»‘å®šDOMæˆ–ç»„ä»¶</p></blockquote> <p>è·å–DOMæˆ–è€…ç»„ä»¶å®ä¾‹å¯ä»¥ä½¿ç”¨refå±æ€§ï¼Œå†™æ³•å’Œvue2.0éœ€è¦åŒºåˆ†å¼€</p> <ul><li><p><font color="#ff3040">refæ“ä½œå•ä¸ªDOMå…ƒç´ ----Vue3çš„è§„åˆ™</font></p> <ul><li>æ“ä½œDomèŠ‚ç‚¹ éœ€è¦è®¾ç½®ä¸€ä¸ªå˜é‡å®ç°ç»‘å®šDomèŠ‚ç‚¹</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> uname <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>å¿…é¡»æŠŠ è®¾ç½®çš„å˜é‡ <code>return</code>å‡ºå»</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">return</span> <span class="token punctuation">{</span>uname<span class="token punctuation">}</span>
</code></pre></div></li></ul> <blockquote><p>æ“ä½œDomèŠ‚ç‚¹ä¾‹å­</p></blockquote> <ul><li>æ“ä½œDomèŠ‚ç‚¹ éœ€è¦è®¾ç½®ä¸€ä¸ªå˜é‡å®ç°ç»‘å®šDomèŠ‚ç‚¹</li> <li>å¿…é¡»æŠŠ è®¾ç½®çš„å˜é‡ <code>return</code>å‡ºå»</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 3ã€åœ¨æ¨¡æ¿ä¸­ç»‘å®šrefå¯¹è±¡ --&gt;</span>
    ç”¨æˆ·å<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>uname<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>handleClick<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>ç‚¹å‡»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- Vue3ä¸­ä¸å¯ä»¥ç›´æ¥è¿™æ ·æ‰¹é‡ç»‘å®šref --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>fruits<span class="token punctuation">'</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>index<span class="token punctuation">'</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>(item, index) in list<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>{{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1ã€åˆ›å»ºä¸€ä¸ªå¼•ç”¨å¯¹è±¡ (è·å–</span>
    <span class="token keyword">const</span> uname <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// è·å–DOMå…ƒç´ çš„æ–¹å¼ uname.value</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uname<span class="token punctuation">.</span>value<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 2ã€æŠŠrefå¯¹è±¡æä¾›ç»™æ¨¡æ¿</span>
      uname<span class="token punctuation">,</span>
      handleClick
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li><font color="#ff3040"><code>:ref</code>æ“ä½œ v-forå¾ªç¯éå†çš„Domæ•°æ®(å¤šä¸ªDomå…ƒç´ )</font> <ul><li>Vue3å¤šä¸ªæ“ä½œå¤šä¸ªreféœ€è¦åŠ¨æ€ç»‘å®š <code>:ref</code></li> <li>è®¾ç½®ä¸€ä¸ªç©ºæ•°ç»„ å‚¨å­˜è·å–åˆ°çš„å¾ªç¯éå†é‡Œé¢çš„æ•°æ® ç„¶åå†å•ç‹¬è·å–
<ul><li>Vue3ä¸­æ‰¹é‡ç»‘å®š<code>:ref</code>éœ€æ±‚æä¾›ä¸€ä¸ªæ–¹æ³• æŠŠè·å–åˆ°çš„å¤šä¸ªrefæ•°æ®å‚¨å­˜èµ·æ¥</li> <li><code>innerHTML</code>è·å–<code>:ref</code>æ ‡ç­¾é‡Œé¢çš„å¯¹åº”æ•°æ®</li></ul></li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 0ã€åœ¨æ¨¡æ¿ä¸­ç»‘å®šrefå¯¹è±¡ --&gt;</span>
    ç”¨æˆ·å<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>uname<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>handleClick<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>ç‚¹å‡»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- Vue3ä¸­ç»‘å®šreféœ€è¦è®¾ç½®åŠ¨æ€ç»‘å®š :ref --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">:ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>setDom<span class="token punctuation">'</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>index<span class="token punctuation">'</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>(item, index) in list<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>{{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> toRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 1. å£°æ˜çš„æ•°ç»„æ•°æ®</span>
      list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'peach'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'list'</span><span class="token punctuation">)</span>

    <span class="token comment">// 2. Vue3ä¸­æ‰¹é‡ç»‘å®šreféœ€æ±‚æä¾›ä¸€ä¸ªæ–¹æ³• æŠŠè·å–åˆ°çš„å¤šä¸ªrefæ•°æ®å‚¨å­˜èµ·æ¥</span>
    <span class="token keyword">const</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> <span class="token function-variable function">setDom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// å‚æ•°elæ˜¯å…¶ä¸­ä¸€ä¸ªDOMå…ƒç´ (å…¶ä¸­çš„ä¸€ä¸ªæ•°æ®)</span>
      <span class="token comment">// 3. æŠŠå¤šä¸ªrefè·å–çš„å•ç‹¬æ•°æ®å‚¨å­˜åˆ°æ•°ç»„é‡Œ</span>
      fruits<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 4. åˆ›å»ºä¸€ä¸ªå¼•ç”¨å¯¹è±¡</span>
    <span class="token keyword">const</span> uname <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 5. è·å–DOMå…ƒç´ çš„æ–¹å¼ uname.value</span>
      <span class="token comment">// console.log(uname.value.value)</span>
      <span class="token comment">// innerHTMLè·å–æ ‡ç­¾é‡Œé¢çš„æ•°æ®(ipnutè·å–æ•°æ®ç”¨çš„æ˜¯value)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fruits<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 6ã€æŠŠrefå¯¹è±¡æä¾›ç»™æ¨¡æ¿</span>
      uname<span class="token punctuation">,</span>
      list<span class="token punctuation">,</span>
      setDom<span class="token punctuation">,</span>
      handleClick
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h2 id="ç»„åˆapi-çˆ¶å­ä¼ å€¼"><a href="#ç»„åˆapi-çˆ¶å­ä¼ å€¼" class="header-anchor">#</a> ç»„åˆAPI <code>çˆ¶å­ä¼ å€¼</code></h2> <blockquote><p>ç›®æ ‡ï¼šæŒæ¡ä½¿ç”¨<code>props</code>é€‰é¡¹å’Œ<code>emits</code>é€‰é¡¹å®Œæˆçˆ¶å­ç»„ä»¶é€šè®¯</p></blockquote> <ul><li><font color="#ff3040">å¯¼å…¥ç»„ä»¶ ä¾æ—§éœ€è¦   components: { }</font></li> <li>å­ç»„ä»¶æ¥æ”¶ <code>props</code> çˆ¶ç»„ä»¶ä¼ æ¥çš„å€¼ éœ€è¦è®¾ç½® <code>toRef</code>æˆ–<code>toRefs</code> æŠŠæ¥æ”¶åˆ°çš„æ•°æ® å˜ä¸ºå“åº”å¼(ä¸å¯ä»¥ç”¨<code>ref</code>)</li></ul> <h3 id="çˆ¶ç»„ä»¶-ä¼ -å­ç»„ä»¶"><a href="#çˆ¶ç»„ä»¶-ä¼ -å­ç»„ä»¶" class="header-anchor">#</a> <strong>çˆ¶ç»„ä»¶ ä¼  å­ç»„ä»¶</strong></h3> <ul><li>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’æ•°æ® å­ç»„ä»¶ç”¨<code>props</code>æ¥æ”¶</li></ul> <blockquote><p>çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>çˆ¶ç»„ä»¶<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{money}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name">:money</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>money<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">'./Son.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    Son
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// çˆ¶ç»„ä»¶çš„æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> money <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><blockquote><p>å­ç»„ä»¶æ¥æ”¶æ•°æ®</p></blockquote> <ul><li>å­ç»„ä»¶éœ€è¦å…ˆç”¨ <code>props</code>æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„æ•°æ®</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>å­ç»„ä»¶<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{money}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Son'</span><span class="token punctuation">,</span>
  <span class="token comment">// å­ç»„ä»¶æ¥æ”¶çˆ¶ç»„ä»¶æ•°æ®ä½¿ç”¨propså³å¯</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    money<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token comment">// é»˜è®¤ä¼ é€’æ•°æ®ä¸º0 </span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// props è·å–çˆ¶ç»„ä»¶çš„æ•°æ®</span>
    <span class="token comment">// context ç”¨æ¥è°ƒç”¨emit è§¦å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°(è¿™é‡Œç”¨äº å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼)</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span>context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–çˆ¶ç»„ä»¶æ•°æ®money</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>money<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ€»ç»“ï¼šçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼ï¼Œç±»å‹æ£€æµ‹å’ŒVue2ç›¸åŒï¼Œæ¨¡æ¿ä¸­è®¿é—®<code>props</code>ä¸­çš„æ•°æ®ä¹Ÿæ˜¯ä¸€æ ·çš„</p> <p>æ³¨æ„ï¼šjsä»£ç ä¸­å¾—åˆ°çˆ¶ç»„ä»¶ä¼ é€’çš„å€¼é€šè¿‡<code>setup()</code>å‡½æ•°çš„å‚æ•°ä¸€<code>props</code>è·å–ã€‚</p> <h3 id="å­ç»„ä»¶-ä¼ -çˆ¶ç»„ä»¶"><a href="#å­ç»„ä»¶-ä¼ -çˆ¶ç»„ä»¶" class="header-anchor">#</a> <strong>å­ç»„ä»¶ ä¼  çˆ¶ç»„ä»¶</strong></h3> <ul><li>é€šè¿‡<code>setup()</code>å‡½æ•°çš„å‚æ•°äºŒ<code>context</code>å¯¹è±¡ä¸­<code>emit</code>æ–¹æ³•è§¦å‘å­å‘çˆ¶ä¼ å€¼çš„äº‹ä»¶ã€‚</li></ul> <blockquote><p>å­ç»„ä»¶ä¼ é€’æ•°æ®</p></blockquote> <ul><li>é€šè¿‡<code>setup()</code>å‡½æ•°çš„å‚æ•°äºŒ<code>context</code> æƒ³çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;div class=&quot;container&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;h1&gt;å­ç»„ä»¶&lt;/h1&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;p&gt;{{money}}&lt;/p&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;button @click=&quot;changeMoney&quot;&gt;èŠ±50å…ƒ&lt;/button&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import { onMounted } from 'vue'
export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'Son',
</span><span class="token prefix unchanged"> </span><span class="token line"> // å­ç»„ä»¶æ¥æ”¶çˆ¶ç»„ä»¶æ•°æ®ä½¿ç”¨propså³å¯
</span><span class="token prefix unchanged"> </span><span class="token line"> props: {
</span><span class="token prefix unchanged"> </span><span class="token line">   money: {
</span><span class="token prefix unchanged"> </span><span class="token line">     type: Number,
</span><span class="token prefix unchanged"> </span><span class="token line">     default: 0
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line">   // props è·å–çˆ¶ç»„ä»¶çš„æ•°æ®
</span><span class="token prefix unchanged"> </span><span class="token line">   // context ç”¨æ¥è°ƒç”¨emit è§¦å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°(è¿™é‡Œç”¨äº å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼)
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  setup (props, context) {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // è·å–çˆ¶ç»„ä»¶æ•°æ®money
</span><span class="token prefix unchanged"> </span><span class="token line">   console.log(props.money)
</span><span class="token prefix unchanged"> </span><span class="token line">   // å‘çˆ¶ç»„ä»¶ä¼ å€¼
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    const changeMoney = () =&gt; {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     // æ¶ˆè´¹50å…ƒ
</span><span class="token prefix unchanged"> </span><span class="token line">     // é€šçŸ¥çˆ¶ç»„ä»¶ï¼Œmoneyéœ€è¦å˜æˆ50
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      context.emit('change-money', 50)
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span><span class="token prefix inserted">+</span><span class="token line">    return {changeMoney}
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span>
</code></pre></div><blockquote><p>çˆ¶ç»„ä»¶æ¥æ”¶æ•°æ®</p></blockquote> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;div class=&quot;container&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;h1&gt;çˆ¶ç»„ä»¶&lt;/h1&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;p&gt;{{money}}&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;hr&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;Son :money=&quot;money&quot; @change-money=&quot;updateMoney&quot; /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import { ref } from 'vue'
import Son from './Son.vue'
export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'App',
</span><span class="token prefix unchanged"> </span><span class="token line"> components: {
</span><span class="token prefix unchanged"> </span><span class="token line">   Son
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> // çˆ¶ç»„ä»¶çš„æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶
</span><span class="token prefix unchanged"> </span><span class="token line"> setup () {
</span><span class="token prefix unchanged"> </span><span class="token line">   const money = ref(100)
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    const updateMoney = (newMoney) =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">      money.value = newMoney
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span><span class="token prefix inserted">+</span><span class="token line">    return { money , updateMoney}
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span>
</code></pre></div><p>æ€»ç»“ï¼šé€šè¿‡setupå‡½æ•°çš„å‚æ•°äºŒcontextå¯¹è±¡ä¸­emitæ–¹æ³•è§¦å‘å­å‘çˆ¶ä¼ å€¼çš„äº‹ä»¶ã€‚</p> <h2 id="è¯­æ³•ç³–-v-model-çˆ¶å­ç»„ä»¶ä¹‹å‰ç›¸äº’ä¼ å€¼"><a href="#è¯­æ³•ç³–-v-model-çˆ¶å­ç»„ä»¶ä¹‹å‰ç›¸äº’ä¼ å€¼" class="header-anchor">#</a> è¯­æ³•ç³– <code>v-model:</code> çˆ¶å­ç»„ä»¶ä¹‹å‰ç›¸äº’ä¼ å€¼</h2> <blockquote><p>ç›®æ ‡ï¼šæŒæ¡vue3.0çš„v-modelè¯­æ³•ç³–åŸç†</p></blockquote> <ul><li>åœ¨Vue3ä¸­ <code>v-model:</code>çš„ç”¨æ³• ç±»ä¼¼äºVue2ä¸­çš„<code>.sync</code>æ–¹æ³• çˆ¶ç»„ä»¶ å­ç»„ä»¶åŒå‘ç»‘å®šæ•°æ® çœå» <code>@</code></li> <li>åœ¨vue3ä¸­<code>v-model:</code>è¯­æ³•ç³–çš„æ‹†åˆ†ï¼š<code>&lt;Son :modelValue=&quot;msg&quot; @update:modelValue=&quot;msg=$event&quot; /&gt;</code></li> <li>å­ç»„ä»¶æ¥æ”¶ <code>props</code> çˆ¶ç»„ä»¶ä¼ æ¥çš„å€¼ éœ€è¦è®¾ç½® <code>toRef</code>æˆ–<code>toRefs</code> æŠŠæ¥æ”¶åˆ°çš„æ•°æ® å˜ä¸ºå“åº”å¼(ä¸å¯ä»¥ç”¨<code>ref</code>)</li> <li><font color="#4ac18b"><code>v-model:</code> æœ‰é»˜è®¤å€¼ <code>modelValue</code> é»˜è®¤å€¼ç»‘å®šçš„è¯ ä¸éœ€è¦è®¾ç½®åç§° ä½†æ˜¯å­ç»„ä»¶æ¥æ”¶éœ€è¦å†™  <code>modelValue</code></font></li></ul> <p><font color="#ff3040">Vue2çš„.syncä¿®é¥°ç¬¦åŒå‘ç»‘å®šï¼š</font></p> <ul><li>åœ¨vue2.xçš„æ—¶å€™ <code>.sync</code>  é™¤å»v-modelå®ç°åŒå‘æ•°æ®ç»‘å®šçš„å¦ä¸€ç§æ–¹å¼</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- &lt;Son :money='money' @update:money=&quot;fn&quot;  /&gt; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name">:money.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>money<span class="token punctuation">'</span></span>  <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><font color="#ff3040">Vue3çš„v-modelåŒå‘ç»‘å®š:</font></p> <ul><li>åœ¨vue3.0çš„æ—¶å€™ï¼Œä½¿ç”¨ <code>v-model:money=&quot;money&quot;</code>  å³å¯ä»£æ›¿Vue2çš„ <code>.sync</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- &lt;Son :money=&quot;money&quot; @update:money=&quot;updateMoney&quot; /&gt; --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name"><span class="token namespace">v-model:</span>money</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>money<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><blockquote><p>v-model é»˜è®¤åç§°ä¼ å€¼</p></blockquote> <ul><li>ä½¿ç”¨<code>v-model</code>é»˜è®¤åç§° è¿›è¡Œçˆ¶å­ç»„ä¼ å€¼
<ul><li>çˆ¶ç»„ä»¶å‘å­ç»„ä¼ é€’æ•°æ® å¹¶ä¸”æ˜¯é»˜è®¤åç§°è¿›è¡Œä¼ å€¼ <code>v-model</code></li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- å¤é€‰æ¡†æ’ä»¶ --&gt;</span>
      <span class="token comment">&lt;!-- é€šè¿‡v-modelé»˜è®¤åç§°ä¼ å€¼å®ç°çˆ¶å­ç›¸äº’ä¼ å€¼ --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxCheckbox</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>job<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>ç¨‹åºå‘˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxCheckbox</span><span class="token punctuation">&gt;</span></span> {{job}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> SubBread <span class="token keyword">from</span> <span class="token string">'./components/sub-bread.vue'</span>
<span class="token keyword">import</span> SubFilter <span class="token keyword">from</span> <span class="token string">'./components/sub-filter.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'SubCategory'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    SubBread<span class="token punctuation">,</span>
    SubFilter
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è®¾ç½®å‹¾é€‰æ¡†çš„é»˜è®¤çŠ¶æ€ä½(é€‰ä¸­æˆ–ä¸é€‰ä¸­)</span>
    <span class="token keyword">const</span> job <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> job <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>å­ç»„ä»¶ æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„å€¼ ä½¿ç”¨ <code>update</code>è¿›è¡ŒåŒå‘ç»‘å®š
<ul><li>çˆ¶ç»„ä»¶é€šè¿‡<code>v-model</code>é»˜è®¤åç§°è¿›è¡Œçˆ¶å­ä¼ å€¼ æ‰€ä»¥éœ€è¦è®¾ç½®<code>update:modelValue</code> æ¥å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®</li> <li>çˆ¶ç»„ä»¶é€šè¿‡<code>v-model</code>é»˜è®¤åç§°è¿›è¡Œçˆ¶å­ä¼ å€¼ æ‰€æœ‰æ¥æ”¶æ•°æ® ä¹Ÿè¦é€šè¿‡<code>'modelValue'</code>æ¥è·å–çˆ¶ç»„ä»¶ä¼ æ¥çš„æ•°æ®</li> <li>å­ç»„ä»¶æ¥æ”¶ <code>props</code> çˆ¶ç»„ä»¶ä¼ æ¥çš„å€¼ éœ€è¦è®¾ç½® <code>toRef</code>æˆ–<code>toRefs</code> æŠŠæ¥æ”¶åˆ°çš„æ•°æ® å˜ä¸ºå“åº”å¼(ä¸å¯ä»¥ç”¨<code>ref</code>)</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// çˆ¶ç»„ä»¶å°†åŸå§‹çš„çŠ¶æ€å€¼ä¼ é€’ç»™å­ç»„ä»¶å¹¶ä¸”ä¿è¯å“åº”å¼èƒ½åŠ›</span>
    <span class="token comment">// å­ç»„ä»¶æ¥æ”¶ props çˆ¶ç»„ä»¶ä¼ æ¥çš„å€¼ éœ€è¦è®¾ç½® toRefæˆ–toRefsæŠŠæ¥æ”¶åˆ°çš„æ•°æ® å˜ä¸ºå“åº”å¼(ä¸å¯ä»¥ç”¨ref)</span>
    <span class="token keyword">const</span> checked <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> <span class="token string">'modelValue'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">toggleSelect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// å‘çˆ¶ç»„ä»¶ä¼ å…¥æ•°æ® å–å å®ç°å‹¾é€‰æ•ˆæœ</span>
      context<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:modelValue'</span><span class="token punctuation">,</span> <span class="token operator">!</span>checked<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><blockquote><p>v-model å‘½åä¼ å€¼</p></blockquote> <ul><li>ä½¿ç”¨<code>v-model</code>å‘½å è¿›è¡Œçˆ¶å­ç»„ä¼ å€¼
<ul><li>çˆ¶ç»„ä»¶å‘å­ç»„ä¼ é€’æ•°æ® å¹¶ä¸”æ˜¯å‘½åè¿›è¡Œä¼ å€¼ <code>v-model:åç§°</code></li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>   
    çˆ¶ç»„ä»¶è®¾ç½®çš„å€¼ {{ret}} {{rets}} 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>    
    <span class="token comment">&lt;!-- ç»™å­ç»„ä»¶ä¼ é€’æ•°æ® --&gt;</span>  
    <span class="token comment">&lt;!-- v-modelå¯ä»¥åŒå‘ç»‘å®šçˆ¶ç»„ä»¶å­ç»„ä»¶ ç±»ä¼¼äº .sync --&gt;</span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son</span> <span class="token attr-name"><span class="token namespace">v-model:</span>ret</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ret<span class="token punctuation">'</span></span> <span class="token attr-name"><span class="token namespace">v-model:</span>rets</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>rets<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>son</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/reactivity'</span>    <span class="token comment">// å¼•å…¥å­ç»„ä»¶</span>
    <span class="token keyword">import</span> son <span class="token keyword">from</span> <span class="token string">'./views/model/son.vue'</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  
        components<span class="token operator">:</span> <span class="token punctuation">{</span>   
            <span class="token comment">// å¯¼å…¥å­ç»„ä»¶   </span>
            son  
        <span class="token punctuation">}</span><span class="token punctuation">,</span> 
        <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token comment">// è®¾ç½®ä¼ é€’å­ç»„ä»¶çš„æ•°æ®   </span>
            <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>   
            <span class="token keyword">const</span> rets <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'ä½ å¥½'</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> ret<span class="token punctuation">,</span> rets <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>å­ç»„ä»¶ æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„å€¼ ä½¿ç”¨ <code>update</code>è¿›è¡ŒåŒå‘ç»‘å®š
<ul><li>å­ç»„ä»¶æ¥æ”¶ <code>props</code> çˆ¶ç»„ä»¶ä¼ æ¥çš„å€¼ éœ€è¦è®¾ç½® <code>toRef</code>æˆ–<code>toRefs</code> æŠŠæ¥æ”¶åˆ°çš„æ•°æ® å˜ä¸ºå“åº”å¼(ä¸å¯ä»¥ç”¨<code>ref</code>)</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    å­ç»„ä»¶å†…å®¹ {{ret}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeRet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹å‡»æ”¹å˜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„æ•°æ®</span>
    ret<span class="token operator">:</span> <span class="token punctuation">{</span>
      require<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rets<span class="token operator">:</span> <span class="token punctuation">{</span>
      require<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeRet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// å‘çˆ¶ç»„ä»¶ä¼ å€¼ ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ® updateåŒå‘ç»‘å®š</span>
      context<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:ret'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
      context<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:rets'</span><span class="token punctuation">,</span> <span class="token string">'å¤§å®¶å¥½'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> changeRet <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><strong>æ€»ç»“ï¼š</strong></p> <ol><li><p>vue3.0å°è£…ç»„ä»¶æ”¯æŒv-modelçš„æ—¶å€™ï¼Œçˆ¶ä¼ å­<code>:modelValue</code> å­ä¼ çˆ¶ <code>@update:modelValue</code></p></li> <li><p>Vue3ä¸­çš„v-modelçš„æ–°çš„ç”¨æ³•å¯ä»¥æ›¿ä»£Vue2ä¸­çš„syncä¿®é¥°ç¬¦</p></li> <li><p>v-modelåŒå‘ç»‘å®šç»„ä»¶å±æ€§çš„è§„åˆ™ï¼š</p> <ol><li>çˆ¶ç»„ä»¶çš„ç»‘å®š  v-mode:å±æ€§åç§°=â€˜æ•°æ®åç§°â€™</li> <li>å­ç»„ä»¶è§¦å‘æ›´æ–°çš„åŠ¨ä½œï¼š context.emit('update:å±æ€§åç§°', è¦æ›´æ–°çš„æ•°æ®)</li></ol></li></ol> <h2 id="ç»„åˆapi-provide-inject-ä¾èµ–æ³¨å…¥-ç›¸äº’ä¼ å€¼ç±»ä¼¼vuex"><a href="#ç»„åˆapi-provide-inject-ä¾èµ–æ³¨å…¥-ç›¸äº’ä¼ å€¼ç±»ä¼¼vuex" class="header-anchor">#</a> ç»„åˆAPI <code>provide</code> <code>inject</code> ä¾èµ–æ³¨å…¥(ç›¸äº’ä¼ å€¼ç±»ä¼¼Vuex)</h2> <blockquote><p>ç›®æ ‡ï¼šæŒæ¡ä½¿ç”¨provideå‡½æ•°å’Œinjectå‡½æ•°å®Œæˆåä»£ç»„ä»¶æ•°æ®é€šè®¯</p> <p>ä½¿ç”¨åœºæ™¯ï¼šæœ‰ä¸€ä¸ªçˆ¶ç»„ä»¶ï¼Œé‡Œå¤´æœ‰å­ç»„ä»¶ï¼Œæœ‰å­™ç»„ä»¶ï¼Œæœ‰å¾ˆå¤šåä»£ç»„ä»¶ï¼Œå…±äº«çˆ¶ç»„ä»¶æ•°æ®ã€‚</p></blockquote> <ul><li><font color="#ff3040">æ³¨æ„: ä¾èµ–æ³¨å…¥çš„æ•°æ® éœ€è¦ç”¨ <code>.value</code>Â æ¥è¯»å–æ•°æ®</font></li> <li>ä¾èµ–æ³¨å…¥ ç±»ä¼¼ä»¥Vuex å¯ä»¥çˆ¶ç»„ä»¶å¯ä»¥ç›´æ¥å‘å…¶ä»–ç»„ä»¶ä¼ é€’æ•°æ® ç›´æ¥å¯ä»¥æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®</li></ul> <blockquote><p>åŸç»„ä»¶è®¾ç½®æ–¹æ³• è¿›è¡Œä¼ é€’</p></blockquote> <ul><li>çˆ¶ç»„ä»¶å¯ä»¥ç›´æ¥æŠŠæ•°æ®ä¼ é€’ç»™ å­ç»„ä»¶ å­™ç»„ä»¶ æ— éœ€çˆ¶ä¼ å­æ–¹æ³•ä¼ é€’æ•°æ®(ç±»ä¼¼Vuex)
<ul><li>å¯ä»¥ä¼ é€’æ•°æ® å’Œ å‡½æ•°æ–¹æ³•</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    ä¼ é€’ç»™å…¶ä»–ç»„ä»¶çš„æ•°æ® {{ret}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sunzi</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sunzi</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// å¯¼å…¥Vue3çš„æ–¹æ³•</span>
<span class="token keyword">import</span> sunzi <span class="token keyword">from</span> <span class="token string">'@/views/model/sunzi'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/reactivity'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> provide <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/runtime-core'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// åŠ è½½å…¶ä»–ç»„ä»¶</span>
    sunzi
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®è¦ä¼ é€’çš„æ•°æ®</span>
    <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
    <span class="token comment">// è®¾ç½®è¦ä¼ é€’çš„æ–¹æ³•</span>
    <span class="token keyword">const</span> <span class="token function-variable function">getRet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">removeRet</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      ret<span class="token punctuation">.</span>value <span class="token operator">=</span> ret<span class="token punctuation">.</span>value <span class="token operator">-</span> removeRet
    <span class="token punctuation">}</span>
    <span class="token comment">// ä¼ é€’æ•°æ®ç»™å…¶ä»–ç»„ä»¶</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'ret'</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span>
    <span class="token comment">// ä¼ é€’æ–¹æ³•ç»™å…¶ä»–ç»„ä»¶</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'getRet'</span><span class="token punctuation">,</span> getRet<span class="token punctuation">)</span>
    <span class="token comment">// è¿”å›æ•°æ®</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> getRet<span class="token punctuation">,</span> ret <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><blockquote><p>å­ç»„ä»¶æ¥æ”¶åŸç»„ä»¶ä¼ æ¥çš„æ•°æ®</p></blockquote> <ul><li>æ¥æ”¶åŸç»„ä»¶ä¼ æ¥çš„æ•°æ®å’Œæ–¹æ³•
<ul><li>é€šè¿‡åŸç»„ä»¶ä¼ æ¥çš„æ–¹æ³• ä¿®æ”¹åŸç»„ä»¶çš„æ•°æ®</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    æ¥æ”¶ä¼ æ¥çš„å€¼ å¹¶ä¸”ä¿®æ”¹{{ret}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remove<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å‡å°‘20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/runtime-core'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ¥æ”¶ä¼ é€’çš„æ•°æ®</span>
    <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'ret'</span><span class="token punctuation">)</span>
    <span class="token comment">// æ¥æ”¶ä¼ é€’çš„æ–¹æ³•</span>
    <span class="token keyword">const</span> getRet <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'getRet'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç»™æ¥æ”¶çš„æ–¹æ³• è®¾ç½®å­ç»„ä»¶æ•°æ® å¹¶ä¼ å›åŸç»„ä»¶è¿›è¡Œä¿®æ”¹</span>
      <span class="token function">getRet</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> ret<span class="token punctuation">,</span> remove <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>æ€»ç»“ï¼š</strong></p> <ol><li><code>provide</code>å‡½æ•°æä¾›æ•°æ®å’Œå‡½æ•°ç»™åä»£ç»„ä»¶ä½¿ç”¨
<ul><li>æä¾›çš„å‡½æ•°æ–¹æ³•å¯ä»¥ç”¨æ¥ è®¡ç®—ä¼ é€’è¿‡å»çš„åŸæ•°æ® è¿›è¡ŒåŸæ•°æ®ä¿®æ”¹</li></ul></li> <li><code>inject</code>å‡½æ•°ç»™å½“å‰ç»„ä»¶æ³¨å…¥<code>provide</code>æä¾›çš„æ•°æ®å’Œå‡½æ•°</li></ol> <p>æ³¨æ„ï¼šä¼ é€’æ•°æ®çš„ç›®çš„æ˜¯ä»ä¸Šå‘ä¸‹ä¼ é€’æ•°æ®ï¼›ä¼ é€’å‡½æ•°çš„ç›®çš„æ˜¯ä¸ºäº†ä»ä¸‹å‘ä¸Šä¼ é€’æ•°æ®ã€‚</p> <h2 id="åˆ›å»ºvue3çš„-å…¨å±€å®ä¾‹åŒ–"><a href="#åˆ›å»ºvue3çš„-å…¨å±€å®ä¾‹åŒ–" class="header-anchor">#</a> åˆ›å»ºVue3çš„ <code>å…¨å±€å®ä¾‹åŒ–</code></h2> <ul><li>Vue3è„šæ‰‹æ¶æ¢è¿›ä¸‹ åœ¨ <code>main.js</code>æ–‡ä»¶å¤¹é‡Œé¢ è®¾ç½®å…¨å±€æ–¹æ³•
<ul><li><code>createApp(App)</code> æ˜¯Vue3çš„å…¨å±€æ–¹æ³•å®ä¾‹</li></ul></li> <li>Vue3çš„å…¨å±€ apiæ–¹æ³•å®˜æ–¹ç¤ºä¾‹ <a href="https://cn.vuejs.org/v2/api/#%E5%85%A8%E5%B1%80-API" target="_blank" rel="noopener noreferrer">å®˜æ–¹Vueå…¨å±€æ–¹æ³•<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>Vue2çš„å…¨å±€æ–¹æ³• Vue3ä¹Ÿå¯ä»¥ç”¨ ä½†æ˜¯éœ€è¦ä»<code>createApp(App)</code> è°ƒç”¨</li></ul></li> <li>å…¨å±€å®ä¾‹åŒ– é€šå¸¸è¢«ç”¨äºå®ä¾‹åŒ– æ’ä»¶ å’Œ è‡ªå®šä¹‰æ–¹æ³•</li></ul> <blockquote><p>main.js è®¾ç½®å…¨å±€æ–¹æ³•</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è¿™ç§å¯¼å…¥apiçš„æ–¹æ³•å¯ä»¥å‡å°‘æ‰“åŒ…åçš„ä½“ç§¯(æŒ‰éœ€å¯¼å…¥)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

<span class="token comment">// è®¾ç½®Vue3çš„å…¨å±€æ–¹æ³•å®ä¾‹</span>
<span class="token comment">// ä»£æ›¿äº†Vue2çš„ Vue.çš„å…¨å±€æ–¹æ³•</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

<span class="token comment">// å…¨å±€è¿‡æ»¤å™¨æ–¹æ³•</span>
app<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// å…¨å±€æ··å…¥mixin(Vue3 åªæ¨èå…¨å±€)</span>
app<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Vue3çš„æŒ‚è½½å®ä¾‹åŒ–å¯¹è±¡çš„æ–¹æ³• .use()æ–¹æ³•ç”¨äºé…ç½®æ’ä»¶</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="vue3è‡ªå®šä¹‰æ’ä»¶æœºåˆ¶-install"><a href="#vue3è‡ªå®šä¹‰æ’ä»¶æœºåˆ¶-install" class="header-anchor">#</a> Vue3è‡ªå®šä¹‰æ’ä»¶æœºåˆ¶ <code>install</code></h2> <p><a href="https://v3.cn.vuejs.org/guide/plugins.html#%E6%8F%92%E4%BB%B6" target="_blank" rel="noopener noreferrer">Vue3æ’ä»¶æœºåˆ¶å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>ç›®æ ‡ï¼šç†Ÿæ‚‰Vueçš„æ’ä»¶æœºåˆ¶ï¼ˆé’ˆå¯¹Vueæ ¸å¿ƒè§„åˆ™çš„ä¸€ç§æ‰©å±•æœºåˆ¶ï¼‰</p></blockquote> <ul><li>Vue3é…ç½®å…¨å±€æ’ä»¶æ˜¯ app. (Vue2æ˜¯ Vue.)</li> <li>Vue3è®¾ç½®æ’ä»¶çš„æ—¶å€™ è®¾ç½®æ’ä»¶çš„Vueç»„ä»¶éœ€è¦ è®¾ç½®<code>name</code>å±æ€§</li></ul> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/kaSbDBwVJC32TEh.png" alt="image-20210722165649300"></p> <h3 id="è®¾ç½®vue3è‡ªå®šä¹‰æ’ä»¶-install"><a href="#è®¾ç½®vue3è‡ªå®šä¹‰æ’ä»¶-install" class="header-anchor">#</a> <strong>è®¾ç½®Vue3è‡ªå®šä¹‰æ’ä»¶ <code>install</code></strong></h3> <p><a href="https://v3.cn.vuejs.org/guide/plugins.html#%E6%8F%92%E4%BB%B6" target="_blank" rel="noopener noreferrer">Vue3æ’ä»¶æœºåˆ¶å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>ç¬¬ä¸€æ­¥ æŠŠå†™å¥½çš„Vueç»„ä»¶ è®¾ç½®ä¸ºæ’ä»¶</p></blockquote> <ul><li><p>æŠŠå†™å¥½çš„Vueç»„ä»¶ åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ ç»Ÿä¸€è®¾ç½®ä¸ºæ’ä»¶</p></li> <li><p>è®¾ç½®æ’ä»¶çš„Vueç»„ä»¶éœ€è¦ è®¾ç½®<code>name</code>å±æ€§</p> <ul><li><code>app.component</code> è®¾ç½®æ’ä»¶çš„åç§° éœ€è¦å’Œ ç»„ä»¶å†…éƒ¨è®¾ç½®çš„nameåç§°ä¸€è‡´</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å¯¼å…¥éœ€è¦è®¾ç½®ä¸ºæ’ä»¶çš„Vueç»„ä»¶</span>
<span class="token keyword">import</span> XtxSkeleton <span class="token keyword">from</span> <span class="token string">'./xtx-skeleton.vue'</span>

<span class="token comment">// è‡ªå®šä¹‰ä¸€ä¸ªæ’ä»¶å¯¼å‡º</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é…ç½®å…¨å±€æ’ä»¶ app.component è®¾ç½®æ’ä»¶çš„åç§° éœ€è¦å’Œ ç»„ä»¶å†…éƒ¨è®¾ç½®çš„nameåç§°ä¸€è‡´</span>
    <span class="token comment">// appè¡¨ç¤ºVueå…¨å±€æ’ä»¶çš„å®ä¾‹å¯¹è±¡ (Vue2æ˜¯Vue. Vue3æ˜¯app.)</span>
  app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>XtxSkeleton<span class="token punctuation">.</span>name<span class="token punctuation">,</span> XtxSkeleton<span class="token punctuation">)</span> <span class="token comment">// (å¯¼å…¥ç»„ä»¶çš„åç§°çš„nameå.name,æ’ä»¶çš„åç§°)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>ç¬¬äºŒæ­¥ å®ä¾‹åŒ–æ’ä»¶ è®©å…¶èƒ½åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨</p></blockquote> <ul><li>å…¥å£æ–‡ä»¶ä¸€èˆ¬æ˜¯ <code>main.js</code></li> <li>é€šè¿‡ <code>.use(æ’ä»¶åç§°)</code> å®ä¾‹åŒ–è¯¥æ’ä»¶</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å¯¼å…¥å®ä¾‹åŒ–çš„Vue3</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token comment">// å¯¼å…¥è‡ªå®šä¹‰æ’ä»¶çš„é…ç½®æ–‡ä»¶ è®©å…¶å®ä¾‹åŒ– å¯åœ¨ç»„ä»¶å†…ä½¿ç”¨</span>
<span class="token keyword">import</span> XtxUI <span class="token keyword">from</span> <span class="token string">'./components/library/index'</span>

<span class="token comment">// åœ¨createApp(App)åé¢ .use()å¯¼å…¥è‡ªå®šä¹‰çš„æ’ä»¶</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>XtxUI<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre></div><blockquote><p>ç¬¬ä¸‰æ­¥ å®ä¾‹åŒ–æ’ä»¶å æ— éœ€å¯¼å…¥ ç›´æ¥åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨</p></blockquote> <ul><li>æ— éœ€å¯¼å…¥ ç›´æ¥åœ¨<code>template</code> æ¨¡æ¿ä¸­è°ƒç”¨æ’ä»¶å³å¯(å¯¼å…¥é…ç½®çš„æ’ä»¶åç§°)</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-banner<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ç›´æ¥å¯¼å…¥æ’ä»¶å³å¯ å¯ä»¥åœ¨é‡Œé¢ç»‘å®šå‚æ•° --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxSkeleton</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ³¨æ„:</p> <p>â€‹	å¦‚æœéœ€è¦ç»™æ’ä»¶ä¼ é€’å‚æ•° é€šå¸¸ä¼šåŠ¨æ€ç»‘å®šæ•°æ®<code>:</code> ( åŠ¨æ€ç»‘å®šåŸºæœ¬ç±»å‹çš„ä¼ å…¥æ’ä»¶çš„æ•°æ® å¯ä¿è¯æ’ä»¶éœ€æ±‚çš„æ•°æ®ç±»å‹)</p> <h3 id="æ‰¹é‡å¯¼å…¥vueæ’ä»¶æ–¹æ³•"><a href="#æ‰¹é‡å¯¼å…¥vueæ’ä»¶æ–¹æ³•" class="header-anchor">#</a> <strong>æ‰¹é‡å¯¼å…¥Vueæ’ä»¶æ–¹æ³•</strong></h3> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/QCNwM1VujSiFLZs.png" alt="image-20210725010517653"></p> <ul><li>é€‚ç”¨äº æ‰€æœ‰æ’ä»¶éƒ½é›†åˆåœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ (index.jsé‡Œé¢)</li> <li>é€šè¿‡<code>require</code>æ–¹æ³•ç­›é€‰æ’ä»¶ ç„¶å<code>importFn</code>è¿›è¡Œæ‰¹é‡å¯¼å…¥æ’ä»¶æ–¹æ³• ç„¶åæ‰¹é‡<code>component</code>å®ä¾‹åŒ–Vueæ’ä»¶</li> <li>æ— éœ€<code>import</code>å¯¼å…¥</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// -------------------------------------- æ‰¹é‡å¯¼å…¥Vueæ’ä»¶</span>
<span class="token comment">// å‚æ•°ä¸€ï¼šä»å“ªä¸ªç›®å½•ä¸­è¯»å–æ–‡ä»¶</span>
<span class="token comment">// å‚æ•°äºŒï¼šæ˜¯å¦è¯»å–å­ç›®å½•ä¸­çš„æ–‡ä»¶ï¼štrueè¯»å–å­ç›®å½•ï¼Œfalseä¸è¯»å–å­ç›®å½•</span>
<span class="token comment">// å‚æ•°ä¸‰ï¼šè¯»å–æ–‡ä»¶çš„åŒ¹é…è§„åˆ™</span>
<span class="token keyword">const</span> importFn <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
<span class="token comment">// è‡ªå®šä¹‰ä¸€ä¸ªæ’ä»¶æ–¹æ³•å¯¼å‡º</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‰¹é‡æ³¨å†Œ -------------------------------------------------------------------</span>
    <span class="token comment">// è‡ªåŠ¨åŒ–æ‰¹é‡æ³¨å†Œå…¨å±€ç»„ä»¶</span>
    importFn<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">componentPath</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// componentPathè¡¨ç¤ºå…¶ä¸­ä¸€ä¸ªç»„ä»¶çš„è·¯å¾„</span>
      <span class="token comment">// æ ¹æ®è·¯å¾„å¯¼å…¥ç»„ä»¶</span>
      <span class="token comment">// è¿”å›å€¼componentè¡¨ç¤ºç»„ä»¶çš„å®ä¾‹å¯¹è±¡</span>
      <span class="token keyword">const</span> component <span class="token operator">=</span> <span class="token function">importFn</span><span class="token punctuation">(</span>componentPath<span class="token punctuation">)</span><span class="token punctuation">.</span>default
      <span class="token comment">// æ³¨å†Œå…¨å±€ç»„å±€</span>
      app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>component<span class="token punctuation">.</span>name<span class="token punctuation">,</span> component<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="vue3çš„-mixinæ··å…¥"><a href="#vue3çš„-mixinæ··å…¥" class="header-anchor">#</a> Vue3çš„ <code>mixin</code>æ··å…¥</h2> <blockquote><p><strong>æ€»ç»“ï¼š</strong> åœ¨vue2.0ä¸­ä¸€äº›å¯å¤ç”¨çš„é€»è¾‘å¯ä»¥ä½¿ç”¨mixinæ¥å°è£…ï¼Œé˜²æ­¢ç›¸åŒé€»è¾‘çš„ä»£ç åœ¨ç»„ä»¶ä¸­å­˜åœ¨å†—ä½™ã€‚vue3.0çš„ç»„åˆAPIå¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå°±ä¸åœ¨æ¨èä½¿ç”¨mixinäº†ã€‚</p> <p>æ³¨æ„ï¼šå®é™…ä¸Šç»„åˆAPIçš„æ¨¡å¼æ›¿ä»£äº†mixinçš„åº”ç”¨åœºæ™¯ã€‚</p></blockquote> <ul><li><p>mixin å…¨å±€æ··å…¥çš„ç‰¹æ€§æ˜¯ æ‰€æœ‰çš„å…¶ä»–ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨</p></li> <li><p>Vue3 å¦‚æœæƒ³åœ¨ç”Ÿå‘½å‘¨æœŸä¸­è§¦å‘å…¨å±€æ··å…¥ ä¸èƒ½ç”¨Vue3çš„å£°æ˜å‘¨æœŸ éœ€è¦å†™Vue2çš„ <code>created()</code>å£°æ˜å‘¨æœŸä¸­</p></li> <li><p>Vue3ä¸­æœ‰ç»„åˆapi ä¸æ¨èä½¿ç”¨ å±€éƒ¨æ··å…¥ å…¨å±€æ··å…¥å¯ä»¥ä½¿ç”¨</p></li></ul> <blockquote><p>å…¨å±€æ··å…¥ä¾‹å­</p></blockquote> <ul><li>è„šæ‰‹æ¶ç¯å¢ƒä¸‹ <code>main.js</code>æ–‡ä»¶ è®¾ç½®å…¨å±€æ··å…¥</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.jsè®¾ç½®å…¨å±€æ··å…¥</span>

<span class="token comment">// è¿™ç§å¯¼å…¥apiçš„æ–¹æ³•å¯ä»¥å‡å°‘æ‰“åŒ…åçš„ä½“ç§¯(æŒ‰éœ€å¯¼å…¥)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

<span class="token comment">// è®¾ç½®Vue3çš„å…¨å±€æ–¹æ³•å®ä¾‹</span>
<span class="token comment">// ä»£æ›¿äº† Vue2çš„ Vue.çš„å…¨å±€æ–¹æ³•</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

<span class="token comment">// è®¾ç½®å…¨å±€æ··å…¥mixin</span>
app<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®å…¨å±€æ··å…¥çš„methodsæ–¹æ³•</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">sayHello</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä½ å¥½'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Vue3çš„æŒ‚è½½å®ä¾‹åŒ–å¯¹è±¡çš„æ–¹æ³• .use()æ–¹æ³•ç”¨äºé…ç½®æ’ä»¶</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre></div><ul><li>Vueæ–‡ä»¶ä¸­ å¯¼å…¥å…¨å±€æ··å…¥æ–¹æ³•</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ç›´æ¥ç»™ç‚¹å‡»äº‹ä»¶ç»‘å®šæ··å…¥ ç‚¹å‡»åè§¦å‘æ··å…¥ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sayHello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å…¨å±€æ··å…¥æŒ‰é’®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// Vue3 åœ¨å£°æ˜å‘¨æœŸä¸­å¯¼å…¥æ··å…¥æ–¹æ³• (ä¸è¦ç”¨Vue3çš„å£°æ˜å‘¨æœŸæ–¹æ³•)</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><strong>æ€»ç»“ï¼š</strong> åœ¨vue2.0ä¸­ä¸€äº›å¯å¤ç”¨çš„é€»è¾‘å¯ä»¥ä½¿ç”¨mixinsæ¥å°è£…ï¼Œé˜²æ­¢ç›¸åŒé€»è¾‘çš„ä»£ç åœ¨ç»„ä»¶ä¸­å­˜åœ¨å†—ä½™ã€‚ä½†æ˜¯vue3.0çš„ç»„åˆAPIå¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå°±ä¸åœ¨æ¨èä½¿ç”¨mixinsäº†ã€‚</p> <p>æ³¨æ„ï¼šå®é™…ä¸Šç»„åˆAPIçš„æ¨¡å¼æ›¿ä»£äº†mixinçš„åº”ç”¨åœºæ™¯ã€‚</p> <h2 id="vue3-promise-æ‰æ¥å£æ–¹æ³•"><a href="#vue3-promise-æ‰æ¥å£æ–¹æ³•" class="header-anchor">#</a> Vue3 <code>promise</code> æ‰æ¥å£æ–¹æ³•</h2> <ul><li>Vue3 <code>promise</code>çš„æ‰æ¥å£ èµ‹å€¼æ–¹æ³•( è·å–æœåŠ¡å™¨çš„æ•°æ®)</li></ul> <blockquote><p><code>promise</code> æ‰æ¥å£æ–¹æ³• (ä¸ä¼ å‚)</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token comment">// å¯¼å…¥Vue3 refæ–¹æ³•</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-demi'</span>
<span class="token comment">// å¯¼å…¥è·å–æ•°æ®çš„æ¥å£api</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> findBanner <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../../api/home'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'HomeBanner'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ›å»ºä¸€ä¸ªrefå“åº”å¼ æ¥æ”¶æœåŠ¡å™¨çš„æ•°æ® (refå¯ä»¥å­˜æ•°ç»„)</span>
    <span class="token keyword">const</span> slides <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// å‚¨å­˜è·å–åˆ°çš„æœåŠ¡å™¨æ•°æ®</span>
    <span class="token function">findBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">ret</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœè·å–æˆåŠŸ æŠŠæœåŠ¡å™¨çš„æ•°æ® å‚¨å­˜èµ·æ¥</span>
      slides<span class="token punctuation">.</span>value <span class="token operator">=</span> ret<span class="token punctuation">.</span>result
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœè·å–å¤±è´¥ æ‰“å°é”™è¯¯</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> slides <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><blockquote><p><code>promise</code> æ‰æ¥å£æ–¹æ³• (ä¼ å‚)</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// promise æ‰æ¥å£æ–¹æ³• (ä¼ å‚)</span>
<span class="token function">findBanner</span><span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">ret</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœè·å–æˆåŠŸ æŠŠæœåŠ¡å™¨çš„æ•°æ® å‚¨å­˜èµ·æ¥</span>
      slides<span class="token punctuation">.</span>value <span class="token operator">=</span> ret<span class="token punctuation">.</span>result
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœè·å–å¤±è´¥ æ‰“å°é”™è¯¯</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> slides <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ€»ç»“:</p> <ol><li>åŸºäº<code>promise</code>æ–¹å¼ è·å–æœåŠ¡å™¨çš„æ•°æ®</li></ol> <h2 id="vue3-v-slot-æ’æ§½è®¾ç½®"><a href="#vue3-v-slot-æ’æ§½è®¾ç½®" class="header-anchor">#</a> Vue3 <code>v-slot</code> æ’æ§½è®¾ç½®</h2> <ul><li>æ’æ§½ï¼Œæˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹ç”µè„‘çš„ä¸»æ¿ï¼Œä¸»æ¿ä¸Šé¢æœ‰å¾ˆå¤šæ’æ§½ï¼Œè€Œæ¯ä¸ªæ’æ§½å¯èƒ½å¯¹åº”äº†ä¸åŒçš„é…ç½®ï¼Œé‚£ä¹ˆåœ¨vueä¸­ï¼Œä¹Ÿå¯ä»¥è¿™ä¹ˆæ¥ç†è§£ï¼Œå„ä¸ªæ’æ§½æœ‰å„ä¸ªæ’æ§½çš„åŠŸèƒ½ï¼Œå®ƒä»¬ç›¸äº’ç‹¬ç«‹ï¼Œå¯ç”¨äºç»„ä»¶ä¹‹é—´é€šä¿¡ã€‚</li> <li>Vue3ä¸­ä¹Ÿæ”¯æŒ <code>v-slot</code> å¹¶ä¸”æ”¯æŒå…¶ç®€å†™ <code>#</code> <ul><li><code>v-slot</code> å’Œ <code>#</code> æ˜¯å…·åæ’æ§½
<ul><li>å…·åæ’æ§½ å¯¼å…¥çš„æ—¶å€™ éœ€è¦ <code>&lt;slot name=&quot;å…·åæ’æ§½åç§°&quot; /&gt;</code></li></ul></li> <li><code>&lt;slot /&gt;</code> æ˜¯é»˜è®¤æ’æ§½
<ul><li>é»˜è®¤æ’æ§½ å¯¼å…¥çš„æ—¶å€™ ç›´æ¥<code>&lt;slot /&gt;</code></li></ul></li></ul></li></ul> <p><font color="#ff3040">åœ¨åŒä¸€ç»„ä»¶ä¸­ è®¾ç½®äº†ä¸€éƒ¨åˆ†å…·åæ’æ§½ å‰©ä¸‹çš„éƒ¨åˆ†ä¼šè‡ªåŠ¨ä¸ºé»˜è®¤æ’æ§½</font></p> <blockquote><p>æ’æ§½ä¾‹å­</p></blockquote> <ul><li>è®¾ç½®ä½œç”¨åŸŸæ’æ§½ (å…·å å’Œ é»˜è®¤)</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-new<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HomePanel</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æ–°é²œå¥½ç‰©<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sub-title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æ–°é²œå‡ºç‚‰ å“è´¨é è°±<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- å…·åæ’æ§½çš„æ•°æ® --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxMore</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- é»˜è®¤æ’æ§½çš„æ•°æ® --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in goods<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`/product/${item.id}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.picture<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="&amp;yen;">&amp;yen;</span>{{item.price}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HomePanel</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
import { ref } from 'vue'
// å¯¼å…¥è°ƒç”¨æ’æ§½çš„æ¨¡æ¿
import HomePanel from './home-pannel.vue'
import { findNew } from '@/api/home'
export default {
  name: 'HomeNew',
  // ä½¿ç”¨å¯¼å…¥çš„æ’æ§½æ¨¡æ¿
  components: { HomePanel },
  setup () {
    const goods = ref([])
    findNew().then(data =&gt; {
      goods.value = data.result
    })
    return { goods }
  }
}
</code></pre></div><ul><li>åœ¨æ’æ§½ç»„ä»¶ä¸­ å¯¼å…¥å…·åæ’æ§½å’Œé»˜è®¤æ’æ§½ è¿›è¡Œæ•°æ®åŠ å·¥</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- å¥½ç‰©æ¨èçš„æ•´ä½“ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-panel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>head<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">&gt;</span></span>{{ subTitle }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- å…·åæ’æ§½ï¼šç”¨äºå¡«å……å³ä¾§å†…å®¹(å¥½ç‰©æ¨èæ•´ä½“ä¸Šé¢å³ä¾§çš„æŸ¥çœ‹å…¨éƒ¨)--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- é»˜è®¤æ’æ§½: (å¥½ç‰©æ¨èæ•´ä½“ä¸‹é¢å•†å“å†…å®¹) --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue3-çš„åŠ¨ç”»è¿‡åº¦-transition"><a href="#vue3-çš„åŠ¨ç”»è¿‡åº¦-transition" class="header-anchor">#</a> Vue3 çš„åŠ¨ç”»è¿‡åº¦ <code>Transition</code></h2> <p><a href="https://v3.cn.vuejs.org/api/built-in-components.html#transition" target="_blank" rel="noopener noreferrer">Vueçš„åŠ¨ç”»ä»‹ç»<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p><strong>ç›®æ ‡ï¼š</strong> çŸ¥é“vueä¸­å¦‚ä½•ä½¿ç”¨åŠ¨ç”»ï¼ŒçŸ¥é“Transitionç»„ä»¶ä½¿ç”¨ã€‚</p></blockquote> <p><img src="https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/iqIeRO7NyjCQD1m.png" alt="1616576876892"></p> <ul><li>Vueæä¾›çš„ä¸€ä¸ªæ ‡ç­¾ <code>&lt;Transition name=&quot;ç±»å&quot;&gt;&lt;/Transition&gt;</code> æŠŠéœ€è¦åŠ¨ç”»æ•ˆæœçš„å†…å®¹ åŒ…ä½ è®©å…¶æ‹¥æœ‰åŠ¨ç”»æ•ˆæœ</li> <li>name æä¾›çš„æ ·å¼ç»‘å®šç±»å éœ€è¦ç»‘å®šcssæ ·å¼ æ‰èƒ½ç”Ÿæ•ˆåŠ¨ç”»æ•ˆæœ( æ¨èç»‘å®šåˆ°å…¨å±€æ ·å¼ è®¾ç½®è¿‡åº¦æ•ˆæœæ˜¾ç¤ºéšè— )</li> <li>VueåŠ¨ç”»æœ‰å…­ä¸ªç±»(éƒ½éœ€è¦è®¾ç½®)
<ul><li>ç¦»å¼€å‰ ç¦»å¼€å</li> <li>æ˜¾ç¤ºå‰ æ˜¾ç¤ºå</li> <li>åŠ¨ç”»å‰ åŠ¨ç”»å</li></ul></li> <li>å¤šä¸ªtransitionä½¿ç”¨ä¸åŒåŠ¨ç”»ï¼Œä¿®æ”¹nameå±æ€§å³å¯ã€‚</li> <li>åŠ¨ç”»è¿‡åº¦ä¼šè¢«ç¼“å­˜ ç›¸åŒçš„ç»„ä»¶ åªä¼šæ‰§è¡Œä¸€æ¬¡åŠ¨ç”» éœ€è¦åŠ¨æ€ç»‘å®š <code>:key</code> è®©å…¶å˜ä¸ºä¸åŒç»„ä»¶</li></ul> <blockquote><p>ä½¿ç”¨æ¡ˆä¾‹</p></blockquote> <ul><li>Vueæ¨¡æ¿ç»‘å®š <code>&lt;Transition name=&quot;ç±»å&quot;&gt;&lt;/Transition&gt;</code> è®¾ç½®åŠ¨ç”»</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- ç»‘å®šåŠ¨ç”»æ¨¡æ¿ nameæ˜¯æ ·å¼ç»‘å®šç±» --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fade<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- è¿™é‡Œå¡«å……éœ€è¦åŠ¨ç”»çš„å†…å®¹ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
            è¿‡åº¦åŠ¨ç”»çš„æ•ˆæœ
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Transition</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>css åŠ¨ç”»æ•ˆæœè®¾ç½®
<ul><li>å¯ä»¥å†™åœ¨ style ä½†æ˜¯æ¨èå†™åœ¨å…¨å±€æ ·å¼æ–‡ä»¶ä¸­ å…¨å±€è®¾ç½®</li> <li>ä¸­é—´è¿‡åº¦ç»†èŠ‚ å¯ä»¥åªè®¾ç½® è¿›å…¥çš„æ—¶å€™</li></ul></li></ul> <div class="language-less extra-class"><pre class="language-less"><code><span class="token comment">// è¿™é‡Œæ˜¯Vueçš„è¿‡åº¦åŠ¨ç”»æ•ˆæœ(nameåæ˜¯fade)</span>

<span class="token comment">//å¼€å§‹æ—¶å€™çš„æ•ˆæœ(é»˜è®¤æ˜¯ opacity: 1;)</span>
<span class="token selector">.fade-enter-to,
.fade-leave-from</span> <span class="token punctuation">{</span>
  <span class="token comment">// è®¾ç½®ä¸ºéšè—</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä¸­é—´çš„è¿‡åº¦ç»†èŠ‚</span>
.fade<span class="token operator">-</span>enter<span class="token operator">-</span>active<span class="token punctuation">,</span> <span class="token comment">//è¿›å…¥çš„æ—¶å€™</span>
.fade<span class="token operator">-</span>leave<span class="token operator">-</span>active <span class="token comment">// ç¦»å¼€çš„æ—¶å€™(é€šå¸¸ä¸è®¾ç¦»å¼€æ ·å¼)</span>
<span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token comment">// è®¾ç½®åŠ¨ç”»è¿‡åº¦æ˜¾ç¤ºæ•ˆæœ</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.5s 0.2s<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç»“æŸçš„æ—¶å€™</span>
<span class="token selector">.fade-enter-from,
.fade-leave-to</span> <span class="token punctuation">{</span>
  <span class="token comment">// è®¾ç½®ä¸ºæ˜¾ç¤º</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>æ³¨æ„ï¼šå¤šä¸ªtransitionä½¿ç”¨ä¸åŒåŠ¨ç”»ï¼Œå¯ä»¥æ·»åŠ nameå±æ€§ï¼Œnameå±æ€§çš„å€¼æ›¿æ¢vå³å¯ã€‚</p> <h3 id="è¿‡åº¦åŠ¨ç”»æ‰§è¡Œé¡ºåº-mode"><a href="#è¿‡åº¦åŠ¨ç”»æ‰§è¡Œé¡ºåº-mode" class="header-anchor">#</a> <strong>è¿‡åº¦åŠ¨ç”»æ‰§è¡Œé¡ºåº <code>mode</code></strong></h3> <ul><li><strong>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿›å…¥åŠ¨ç”»å’Œç¦»å¼€åŠ¨ç”»æ˜¯åŒæ—¶è¿›è¡Œçš„ã€‚</strong></li> <li>å¯ä»¥é€šè¿‡<code>mode</code>è®¾ç½®è¿‡åº¦åŠ¨ç”»çš„æ‰§è¡Œé¡ºåº
<ul><li><code>mode='out-in'</code> <strong>å…ˆç¦»å¼€åè¿›å…¥</strong></li> <li><code>mode='n-out'</code> å…ˆè¿›å…¥åç¦»å¼€</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- è®¾ç½®å…ˆç¦»å¼€åè¿›å…¥ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>class-name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>out-in<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!-- éœ€è¦åŠ¨ç”»æ•ˆæœçš„å†…å®¹ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vu3-è‡ªå®šä¹‰å®ä¾‹åŒ–æ–¹æ³•mounted"><a href="#vu3-è‡ªå®šä¹‰å®ä¾‹åŒ–æ–¹æ³•mounted" class="header-anchor">#</a> Vu3 è‡ªå®šä¹‰å®ä¾‹åŒ–æ–¹æ³•<code>mounted</code></h2> <p><a href="https://v3.cn.vuejs.org/api/options-lifecycle-hooks.html#mounted" target="_blank" rel="noopener noreferrer">mountedè‡ªå®šä¹‰å®ä¾‹åŒ–æ–¹æ³•ä»‹ç»<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>Vueæ”¯æŒè‡ªå®šä¹‰æ’ä»¶ ä¹Ÿæ”¯æŒè‡ªå®šä¹‰å®ä¾‹åŒ–æ–¹æ³•
<ul><li><code>mounted</code>è®¾ç½®è‡ªå®šä¹‰æ–¹æ³•å éœ€è¦<code>install</code>å¯¼å‡ºè‡ªå®šä¹‰æ–¹æ³• (<code>install</code> ä¹Ÿå¯ä»¥å¯¼å‡ºæ’ä»¶)</li> <li>1å¯¼å‡ºæ–¹æ³•å é€šè¿‡ å…¥å£æ–‡ä»¶ <code>use.()</code>å®ä¾‹åŒ–è‡ªå®šä¹‰æ–¹æ³•</li> <li>Vueè‡ªå®šä¹‰å®ä¾‹åŒ–æ–¹æ³•åœ¨æ¨¡æ¿ä½¿ç”¨æ—¶å€™éœ€è¦ <code>v-æ–¹æ³•åç§°</code></li></ul></li> <li>Vue2è‡ªå®šä¹‰å®ä¾‹åŒ–æ–¹æ³•æ˜¯ <code>Vue.</code> Vue3è‡ªå®šä¹‰å®ä¾‹åŒ–æ–¹æ³•æ˜¯ <code>app.</code></li> <li>ä»£æ›¿<code>:src</code> åŠ¨æ€ç»‘å®šå›¾ç‰‡è·¯å¾„æ–¹æ³•</li></ul> <p><a href="">æ‡’åŠ è½½å›¾ç‰‡çš„è‡ªå®šä¹‰å®ä¾‹åŒ–æ–¹æ³•æ¡ˆä¾‹</a></p> <h2 id="vue3ä¸­çš„-vue-router"><a href="#vue3ä¸­çš„-vue-router" class="header-anchor">#</a> Vue3ä¸­çš„ <code>Vue Router</code></h2> <ul><li>Vue3çš„ Vue Router ä¹Ÿéœ€è¦æŒ‰éœ€å¯¼å…¥ æ‰èƒ½ä½¿ç”¨routerçš„api</li> <li><code>import { useStore } from 'vuex'</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å¯¼å…¥Vue routeræ–¹æ³•</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
 <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// å®ä¾‹åŒ–Vue routeræ–¹æ³•</span>
    <span class="token comment">// routeç›¸å½“äºä¹‹å‰çš„this.$route</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// è·å–åŠ¨æ€è·¯ç”±ä¼ æ¥çš„idå€¼</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="vue3-åŠ¨æ€è·¯ç”±-æºå¸¦idè®¾ç½®"><a href="#vue3-åŠ¨æ€è·¯ç”±-æºå¸¦idè®¾ç½®" class="header-anchor">#</a> <strong>Vue3 åŠ¨æ€è·¯ç”± æºå¸¦idè®¾ç½®</strong></h3> <ul><li>routerè·¯ç”±ç»„ä»¶é…ç½®
<ul><li>åŠ¨æ€è·¯ç”±é€šå¸¸æ˜¯äºŒçº§ç»„ä»¶ <code>children</code></li> <li><code>path</code>æ˜¯è®¾ç½®è·¯ç”±åœ°å€ æ ¹æ®åŠ¨æ€åœ°å€åç¼€è·å–ä¼ é€’çš„æ•°æ® <code>componen</code>é…ç½®è·¯ç”±ç»„ä»¶</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å£°æ˜å¸¸é‡çš„æ–¹å¼æŒ‰éœ€é…ç½®è·¯ç”±</span>
<span class="token comment">// å¯¼å…¥ä¸€çº§è·¯ç”±ç»„ä»¶</span>
<span class="token keyword">const</span> <span class="token function-variable function">Layout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/layout'</span><span class="token punctuation">)</span>
<span class="token comment">// å¯¼å…¥äºŒçº§è·¯ç”±ç»„ä»¶(åŠ¨æ€è·¯ç”±)</span>
<span class="token keyword">const</span> <span class="token function-variable function">FirstCategory</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/category/index'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// ä¸€çº§è·¯ç”±åœ°å€</span>
    path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token comment">// å¯¼å…¥ä¸€çº§è·¯ç”±ç»„ä»¶</span>
    component<span class="token operator">:</span> Layout<span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// é…ç½®äºŒçº§è·¯ç”±(åŠ¨æ€è·¯ç”±)è·¯å¾„æºå¸¦å…¶idå€¼ å¹¶ä¸”å¯¼å…¥ç»„ä»¶</span>
      <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/category/:id'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> FirstCategory <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="é…ç½®åŠ¨æ€è·¯ç”±ä¼ å€¼"><a href="#é…ç½®åŠ¨æ€è·¯ç”±ä¼ å€¼" class="header-anchor">#</a> <strong>é…ç½®åŠ¨æ€è·¯ç”±ä¼ å€¼</strong></h3> <ul><li>ä¸€çº§è·¯ç”±æºå¸¦idé…ç½®åŠ¨æ€è·¯ç”±
<ul><li>åŸºäº<code>&lt;RouterLink&gt;</code>è·³è½¬æ–¹å¼(ç±»ä¼¼äºaæ ‡ç­¾)</li> <li>ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ä¼ é€’åŠ¨æ€è·¯ç”±å‚æ•°</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!-- RouterLinkè·³è½¬é…ç½®åŠ¨æ€è·¯ç”±æ•°æ® ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸² --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub in item.children<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub.id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`/category/sub/${sub.id}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          {{ æˆ‘æ˜¯åŠ¨æ€è·¯ç”± }}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>äºŒçº§è·¯ç”±æ¥æ”¶ä¸€çº§è·¯ç”±è·³è½¬ä¼ å…¥çš„åŠ¨æ€è·¯ç”±æ•°æ®
<ul><li>Vue3çš„ Vue Router ä¹Ÿéœ€è¦æŒ‰éœ€å¯¼å…¥ æ‰èƒ½ä½¿ç”¨routerçš„api</li> <li><code>import { useStore } from 'vuex'</code></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å¯¼å…¥Vue routeræ–¹æ³•</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
 <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// å®ä¾‹åŒ–Vue routeræ–¹æ³•</span>
    <span class="token comment">// routeç›¸å½“äºä¹‹å‰çš„this.$route</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// è·å–åŠ¨æ€è·¯ç”±ä¼ æ¥çš„idå€¼</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="åˆ‡æ¢è·¯ç”±åæ»šåŠ¨åˆ°é¡¶éƒ¨"><a href="#åˆ‡æ¢è·¯ç”±åæ»šåŠ¨åˆ°é¡¶éƒ¨" class="header-anchor">#</a> <strong>åˆ‡æ¢è·¯ç”±åæ»šåŠ¨åˆ°é¡¶éƒ¨</strong></h3> <ul><li>åªè¦åˆ‡æ¢è·¯ç”±ç»„ä»¶(åˆ‡æ¢åœ°å€) å°±ä¼šé»˜è®¤æ»šåˆ°é¡¶éƒ¨(ä¸€çº§äºŒçº§éƒ½ä¼šè§¦å‘)</li> <li><code>scrollBehavior ()</code> æ–¹æ³•å¯ä»¥è®¾ç½®æ»šåˆ°é¡¶éƒ¨</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è®¾ç½®Vue routerå®ä¾‹åŒ–</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// è®¾ç½®hashè·¯å¾„æ–¹å¼</span>
  history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// æ˜ å°„ routeré…ç½®çš„è·¯ç”±(é…ç½®çš„è·¯ç”±ç»„ä»¶)</span>
  routes<span class="token punctuation">,</span>
  <span class="token comment">// Vue routerçš„åˆ‡æ¢è·¯ç”± æ»šåŠ¨åˆ°é¡¶éƒ¨</span>
  <span class="token function">scrollBehavior</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// x: 0, y: 0 // vue2</span>
      <span class="token comment">// leftæ§åˆ¶é¡µé¢æ°´å¹³æ–¹å‘æ»šåŠ¨</span>
      <span class="token comment">// topæ§åˆ¶å‚ç›´æ–¹å‘æ»šåŠ¨</span>
      left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// å¯¼å‡ºrouterå®ä¾‹åŒ–å¯¹è±¡</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre></div><h3 id="å¤„ç†è·³è½¬ç»†èŠ‚"><a href="#å¤„ç†è·³è½¬ç»†èŠ‚" class="header-anchor">#</a> <strong>å¤„ç†è·³è½¬ç»†èŠ‚</strong></h3> <blockquote><p>ç›®çš„: åœ¨è·¯ç”±è·³è½¬çš„æ—¶å€™ï¼Œä¼˜åŒ–è·³è½¬çš„ç»†èŠ‚ã€‚</p></blockquote> <p>å¤§è‡´éœ€æ±‚ï¼š</p> <ul><li>é€šè¿‡<code>watch</code>ç›‘å¬å˜åŒ– ä»è€Œè·å–ç›¸åº”çš„æ•°æ® ä¼šå¯¼è‡´éæœ¬çº§è·¯ç”±è§¦å‘<code>watch</code>(<code>watch</code>æ— æ³•åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€çº§äºŒçº§)</li> <li>åˆ‡æ¢åˆ°äºŒçº§ç±»ç›®è·¯ç”±çš„æ—¶å€™ä¹Ÿæœ‰IDï¼Œä½†æ˜¯ä¹Ÿè§¦å‘äº†<code>watch</code>å¯¼è‡´å‘é€äº†è¯·æ±‚ï¼Œéœ€è¦å¤„ç†ã€‚</li> <li>é€šè¿‡<code>indexOf</code> æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨äºŒçº§è·¯ç”± å¦‚æœå­˜åœ¨ <code>return</code>å‡ºå»</li></ul> <blockquote><p>æ¡ˆä¾‹: å¤„ç†watch ç­›é€‰äºŒçº§è·¯ç”±</p></blockquote> <ul><li>åˆ¤æ–­æ˜¯å¦å­˜åœ¨<code>/category/sub</code>äºŒçº§è·¯ç”± å¦‚æœå­˜åœ¨ ç­›é€‰å‡ºå» ä¸è°ƒç”¨æ¥å£æ–¹æ³•
<ul><li>é€šè¿‡<code>indexOf</code> æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨äºŒçº§è·¯ç”± å¦‚æœå­˜åœ¨ returnå‡ºå»</li></ul></li></ul> <div class="language-JS extra-class"><pre class="language-js"><code>    <span class="token comment">// è·å–ä¸€çº§åˆ†ç±»ç›¸å…³çš„å•†å“æ•°æ®</span>
    <span class="token keyword">const</span> goods <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// åªè¦è·¯ç”±å‚æ•°params.idå€¼å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘ä¾¦å¬ï¼ˆä¸€çº§å’ŒäºŒçº§åˆ†ç±»éƒ½æ˜¯åŠ¨æ€è·¯ç”±ï¼‰</span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// ç›‘æ§è·¯ç”±çš„å˜åŠ¨ è·å–è·¯ç”±ç›¸åº”çš„æ•°æ®</span>
      <span class="token comment">// å±è”½æ‰äºŒçº§åˆ†ç±»è·¯ç”±å‚æ•°çš„å˜åŒ–</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      <span class="token comment">// è¿›è¡ŒæŸ¥è¯¢ å¦‚æœæŸ¥è¯¢åˆ°'/category/sub' å°±è®©å…¶return(æŸ¥ä¸åˆ°æ˜¯-1 æŸ¥åˆ°æ˜¯1)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'/category/sub'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
      <span class="token function">findTopCategory</span><span class="token punctuation">(</span>newId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        goods<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>children
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">// é¡µé¢åŠ è½½æ—¶å€™ å¯åŠ¨watch</span>
      immediate<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>**æ€»ç»“ï¼š**è·³è½¬çš„æ—¶å€™éœ€è¦æ³¨æ„äº›ç»†èŠ‚</p> <h2 id="vue3çš„nexttick-domèŠ‚ç‚¹åŠ è½½å®Œæ¯•åæ‰§è¡Œ"><a href="#vue3çš„nexttick-domèŠ‚ç‚¹åŠ è½½å®Œæ¯•åæ‰§è¡Œ" class="header-anchor">#</a> Vue3çš„<code>nextTick(()=&gt;{})</code> DomèŠ‚ç‚¹åŠ è½½å®Œæ¯•åæ‰§è¡Œ</h2> <ul><li><strong>å½“æ•°æ®æ›´æ–°äº†ï¼Œåœ¨domä¸­æ¸²æŸ“å®Œæ¯•åï¼Œè‡ªåŠ¨æ‰§è¡Œ<code>nextTick()</code>é‡Œé¢çš„ä»£ç ï¼Œ</strong></li> <li>åœ¨Vue3ä¸­ éœ€è¦æŒ‰éœ€å¯¼å…¥<code>nextTick</code>æ‰å¯ä»¥ä½¿ç”¨</li> <li>é€šå¸¸å…ˆç½®ç©ºæ•°æ®(null) ç„¶åé€šè¿‡<code>nextTick()</code>é‡æ–°èµ‹å€¼ å®ç°å“åº”å¼æ•°æ®
<ul><li>ä¿è¯ä¹‹å‰çš„æ•°æ®å…ˆæ¸…ç©ºï¼Œç„¶åï¼Œå†é‡æ–°èµ‹å€¼æ–°çš„æ•°æ®</li></ul></li></ul> <blockquote><p>ä½¿ç”¨æ¡ˆä¾‹:</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// é€šè¿‡watch ç›‘æ§æ˜¯å¦åˆ‡æ¢è·¯ç”± å¦‚æœåˆ‡æ¢è·¯ç”±é‡æ–°è·å–æ•°æ®</span>
  <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// åªç›‘æ§å½“å‰é¡µé¢çš„è·¯ç”±</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>path <span class="token operator">!==</span> <span class="token string">'/product/'</span> <span class="token operator">+</span> newId<span class="token punctuation">)</span> <span class="token keyword">return</span>
     <span class="token comment">// è°ƒç”¨æ¥å£è·å–æ–°çš„ä¿¡æ¯æ•°æ®</span>
    <span class="token function">findGoods</span><span class="token punctuation">(</span>newId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// å…ˆç½®ç©ºä¹‹å‰çš„æ•°æ®</span>
      goodDetail<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token comment">// ç„¶åé€šè¿‡nextTick()ç»„ä»·åŠ è½½å®Œæˆåæ‰§è¡Œ è·å–æ•°æ®</span>
      <span class="token comment">// ä¿è¯ä¹‹å‰çš„å•†å“æ•°æ®å…ˆæ¸…ç©ºï¼Œç„¶åï¼Œå†é‡æ–°èµ‹å€¼æ–°çš„æ•°æ®</span>
      <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token comment">// æŠŠæ–°çš„ä¿¡æ¯æ•°æ®å‚¨å­˜</span>
        goodDetail<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">.</span>result
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    immediate<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="vue3-ç»„åˆæ–¹å¼-æ‹†åˆ†ç»„ä»¶"><a href="#vue3-ç»„åˆæ–¹å¼-æ‹†åˆ†ç»„ä»¶" class="header-anchor">#</a> Vue3 ç»„åˆæ–¹å¼ æ‹†åˆ†ç»„ä»¶</h2> <ul><li>å¦‚æœä¸€ä¸ªç»„ä»¶ä¸­ æœ‰å¤šä¸ªåŠŸèƒ½å…¨éƒ¨å†™åœ¨<code>setup()</code>é‡Œ ä¸æ–¹ä¾¿ç»´æŠ¤ æ‰€ä»¥æŠŠæ¯ä¸ªåŠŸèƒ½æ‹†åˆ†å‡ºæ¥ å†å¯¼å…¥</li> <li>ç®€åŒ–<code>setup()</code>ä¸­çš„ä»£ç ï¼Œæ–¹ä¾¿ä»£ç çš„é‡ç”¨å’ŒåæœŸçš„ç»´æŠ¤</li> <li>æ‹†åˆ†çš„åç§° å’Œ å¯¼å…¥çš„åç§° ä¸è¦ä¸€è‡´ (ä¸èƒ½é‡å)</li></ul> <blockquote><p>æ— éœ€ä¼ å‚çš„æ‹†åˆ†</p></blockquote> <ul><li>æ— éœ€è®¾ç½®å‚æ•° ç›´æ¥æ‹†åˆ†å³å¯</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// æŠŠä¸€ä¸ªåŠŸèƒ½å…¨éƒ¨ä»£ç æ‹†åˆ†</span>
    <span class="token keyword">const</span> <span class="token function-variable function">useGoods</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token comment">// åŠŸèƒ½çš„å…¨éƒ¨ä»£ç (å‡è®¾æœ‰)</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'XtxGoodsPage'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> GoodsRelevant<span class="token punctuation">,</span> GoodsImage <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// å¯¼å…¥æ‹†åˆ†çš„ä»£ç </span>
    <span class="token comment">// ç®€åŒ–setupä¸­çš„ä»£ç ï¼Œæ–¹ä¾¿ä»£ç çš„é‡ç”¨å’ŒåæœŸçš„ç»´æŠ¤</span>
    <span class="token keyword">const</span> goodsDetail <span class="token operator">=</span> <span class="token function">useGoods</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// returnå‡ºå»å¯¼å…¥çš„æ‹†åˆ†ä»£ç </span>
    <span class="token comment">// è¿™é‡Œæ˜¯templateæ¨¡æ¿ä¸­éœ€è¦çš„æ•°æ®</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> goodsDetail <span class="token punctuation">}</span> 

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>éœ€è¦ä¼ å‚çš„æ‹†åˆ†</p></blockquote> <ul><li>æœ‰æ—¶å€™éœ€è¦è·å–çˆ¶ç»„ä»¶ä¼ æ¥çš„å€¼ <code>props</code> å’Œ <code>setup()</code>æ–¹æ³•(å­—ä¸²ç¬¦ <code>emit</code>)å°±éœ€è¦ä¼ å‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token comment">// æŠŠä¸€ä¸ªåŠŸèƒ½å…¨éƒ¨ä»£ç æ‹†åˆ†</span>
    <span class="token comment">// æ¥æ”¶æ‹†åˆ†åçš„å‚æ•°</span>
    <span class="token keyword">const</span> <span class="token function-variable function">useGoods</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span>emit</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token comment">// åŠŸèƒ½çš„å…¨éƒ¨ä»£ç (å‡è®¾æœ‰)</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'XtxGoodsPage'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> GoodsRelevant<span class="token punctuation">,</span> GoodsImage <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span><span class="token punctuation">{</span>emit<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ç»“æ„èµ‹å€¼ emit </span>
     <span class="token comment">// å¯¼å…¥æ‹†åˆ†çš„ä»£ç </span>
     <span class="token comment">// å¦‚æœéœ€è¦ä¼ å‚ éœ€è¦è®¾ç½®å‚æ•° </span>
    <span class="token keyword">const</span> goodsDetail <span class="token operator">=</span> <span class="token function">useGoods</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span>emit<span class="token punctuation">)</span>
    <span class="token comment">// returnå‡ºå»å¯¼å…¥çš„æ‹†åˆ†ä»£ç </span>
    <span class="token comment">// è¿™é‡Œæ˜¯templateæ¨¡æ¿ä¸­éœ€è¦çš„æ•°æ®</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> goodsDetail <span class="token punctuation">}</span> 

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h2 id="vue3-é‡ç½®å¯¹è±¡æ–¹æ³•"><a href="#vue3-é‡ç½®å¯¹è±¡æ–¹æ³•" class="header-anchor">#</a> Vue3 é‡ç½®å¯¹è±¡æ–¹æ³•</h2> <ul><li>Vue2ä¸­ å¯ä»¥ç”¨<code>$options</code>æ¥é‡ç½®å¯¹è±¡é‡Œé¢å†…å®¹</li> <li>åœ¨Vue3ä¸­ä¸èƒ½ä½¿ç”¨<code>$options</code> æ‰€ä»¥éœ€è¦éå† æ¥é‡ç½®å¯¹è±¡é‡Œé¢çš„æ•°æ®
<ul><li>é€šè¿‡ <code>for in</code> æ¥å®ç°é‡ç½®å¯¹è±¡é‡Œé¢çš„æ•°æ®</li></ul></li></ul> <blockquote><p>é‡ç½®å¯¹è±¡æ–¹æ³•æ¡ˆä¾‹</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">// éœ€è¦é‡ç½®çš„å¯¹è±¡æ•°æ®</span>
    <span class="token keyword">const</span> changeResult <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      provinceCode<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      provinceName<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      cityCode<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      cityName<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      countyCode<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      countyName<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      fullLocation<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token comment">// æ‰“å¼€å¼¹çª—æ—¶ï¼Œé‡ç½®æ•°æ®</span>
    <span class="token keyword">const</span> <span class="token function-variable function">toggle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> changeResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// keyæ˜¯å±æ€§å(é”®)</span>
        changeResult<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
</code></pre></div><h2 id="vue3çš„æ·±åº¦é€‰æ‹©å™¨-deep"><a href="#vue3çš„æ·±åº¦é€‰æ‹©å™¨-deep" class="header-anchor">#</a> Vue3çš„æ·±åº¦é€‰æ‹©å™¨ <code>:deep()</code></h2> <ul><li>æ·±åº¦é€‰æ‹©å™¨é€šå¸¸ä½œç”¨äºä¿®æ”¹å°è£…å¥½ç»„ä»¶çš„æ ·å¼ è¦†ç›–ç»„ä»¶ä¹‹å‰çš„æ ·å¼</li> <li>Vue3çš„æ·±åº¦é€‰æ‹©å™¨ <code>:deep(ç±»å)</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// Vue3ä¸­æ·±åº¦é€‰æ‹©å™¨ä½¿ç”¨è§„åˆ™ :deep(ç±»å)</span>
   <span class="token operator">:</span><span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">.</span>xtx<span class="token operator">-</span>carousel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    height<span class="token operator">:</span> <span class="token number">380</span>px<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
</code></pre></div><h2 id="vue3ç»„ä»¶çš„æ§åˆ¶component"><a href="#vue3ç»„ä»¶çš„æ§åˆ¶component" class="header-anchor">#</a> Vue3ç»„ä»¶çš„æ§åˆ¶<code>component</code></h2> <ul><li>Vue.jsæ˜¯ç”±å¤šä¸ªç»„ä»¶(component)ç»„åˆè€Œæˆçš„</li> <li><code>&lt;component :is=''&gt;&lt;/component&gt;</code> ç›¸å½“äºæœ‰ ç›´æ¥å¯¼å…¥ç»„ä»¶ ä¸æ˜¯åŠ¨æ€çš„ å¯ä»¥å®ç°åˆ‡æ¢ä¸åŒçš„ç»„ä»¶(æ˜¾ç¤ºä¸éšè—)
<ul><li><code>:is</code> æ˜¯åŠ¨æ€ç»‘å®šå¯¼å…¥çš„ç»„ä»¶å</li></ul></li> <li>é€šå¸¸å¯ä»¥ç”¨ <code>component</code>æ¥å®ç°é€‰é¡¹å¡åŠŸèƒ½</li> <li>æ­¤æ–¹æ³•å¯ä»¥ä»£æ›¿ <code>v-if</code>æ¥å®ç°ç»„ä»¶çš„æ˜¾ç¤ºä¸éšè—</li></ul> <blockquote><p>ç‚¹å‡»å åŠ¨æ€åˆ‡æ¢ç»„ä»¶</p></blockquote> <ul><li>è®¾ç½®ç‚¹å‡»äº‹ä»¶ æºå¸¦éœ€è¦åˆ‡æ¢çš„ç»„ä»¶åç§° å®ç°ç‚¹å‡»å åˆ‡æ¢ç›¸åº”çš„ç»„ä»¶
<ul><li>åˆ‡æ¢åŸç†: ç‚¹å‡»å è·å–ä¼ æ¥çš„ç»„ä»¶åå‚æ•° èµ‹å€¼ç»™æ§åˆ¶ç»„ä»¶åˆ‡æ¢çš„å˜é‡ å®ç°åŠ¨æ€åˆ‡æ¢ç»„ä»¶</li></ul></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- è®¾ç½®ç‚¹å‡»äº‹ä»¶ æºå¸¦éœ€è¦åˆ‡æ¢çš„ç»„ä»¶åç§° å®ç°ç‚¹å‡»å åˆ‡æ¢ç›¸åº”çš„ç»„ä»¶ --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>toggle(<span class="token punctuation">&quot;</span>GoodsDetail<span class="token punctuation">&quot;</span>)<span class="token punctuation">'</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å•†å“è¯¦æƒ…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>toggle(<span class="token punctuation">&quot;</span>GoodsComment<span class="token punctuation">&quot;</span>)<span class="token punctuation">'</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å•†å“è¯„ä»·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>componentName<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// å¯¼å…¥æ¨¡æ‹Ÿè¦åŠ¨æ€åˆ‡æ¢çš„ç»„ä»¶</span>
<span class="token keyword">import</span> GoodsDetail <span class="token keyword">from</span> <span class="token string">'./goods-detail.vue'</span>
<span class="token keyword">import</span> GoodsComment <span class="token keyword">from</span> <span class="token string">'./goods-comment.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'GoodsTabs'</span><span class="token punctuation">,</span>
    <span class="token comment">// å¯¼å…¥æ¨¡æ‹Ÿåˆ‡æ¢çš„ç»„ä»¶</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> GoodsDetail<span class="token punctuation">,</span> GoodsComment <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//  å½“å‰ç»„ä»¶çš„åç§°(é»˜è®¤æ˜¾ç¤ºçš„ç»„ä»¶)</span>
    <span class="token keyword">const</span> componentName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'GoodsDetail'</span><span class="token punctuation">)</span>
    <span class="token comment">// ç‚¹å‡»å è·å–ä¼ æ¥çš„ç»„ä»¶åå‚æ•° èµ‹å€¼ç»™æ§åˆ¶ç»„ä»¶åˆ‡æ¢çš„å˜é‡ å®ç°åŠ¨æ€åˆ‡æ¢ç»„ä»¶</span>
    <span class="token keyword">const</span> <span class="token function-variable function">toggle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// æŠŠç‚¹å‡»æºå¸¦çš„ç»„ä»¶åèµ‹å€¼ç»™ æ§åˆ¶ç»„ä»¶åˆ‡æ¢çš„å˜é‡</span>
      componentName<span class="token punctuation">.</span>value <span class="token operator">=</span> name
    <span class="token punctuation">}</span>
   <span class="token comment">// æŠŠæ§åˆ¶ç»„ä»¶åˆ‡æ¢çš„å˜é‡è¿”å›</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> toggle<span class="token punctuation">,</span> componentName <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue3åœ¨æ¨¡æ¿å†…è®¾ç½®æ ·å¼-style"><a href="#vue3åœ¨æ¨¡æ¿å†…è®¾ç½®æ ·å¼-style" class="header-anchor">#</a> Vue3åœ¨æ¨¡æ¿å†…è®¾ç½®æ ·å¼ <code>:style</code></h2> <ul><li>Vue3çš„æ¨¡æ¿ å¯ä»¥ç›´æ¥ç»‘å®šäº‹ä»¶ ä¸éœ€è¦ <code>.native</code>å¯ä»¥ç›´æ¥ç»‘å®šäº‹ä»¶</li> <li><code>:style</code>å¯ä»¥ç›´æ¥åœ¨æ¨¡æ¿ä¸Š è®¾ç½®æ ·å¼(é«˜æƒé‡) äº‹ä»¶ç›‘å¬ä¹Ÿæ”¯æŒ</li> <li>å¯ä»¥åœ¨å¯¼å…¥çš„ç»„ä»¶ä¸Š ç›´æ¥è®¾ç½®<code>:style</code></li></ul> <blockquote><p>ç®€å•æ¡ˆä¾‹</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- å¯¼å…¥çš„ç»„ä»¶ä¸Šé¢ç»‘å®šçš„åŸç”Ÿå±æ€§ä¼šè‡ªåŠ¨ç»‘å®šåˆ°ç»„ä»¶çš„æ ¹èŠ‚ç‚¹ä¸Š --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxButton</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{marginTop: <span class="token punctuation">&quot;</span>20px<span class="token punctuation">&quot;</span>}<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>primary<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>åŠ å…¥è´­ç‰©è½¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>XtxButton</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue3æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„å›ºå®šå€¼-éåŠ¨æ€å€¼-attrs"><a href="#vue3æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„å›ºå®šå€¼-éåŠ¨æ€å€¼-attrs" class="header-anchor">#</a> Vue3æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„å›ºå®šå€¼(éåŠ¨æ€å€¼) <code>attrs</code></h2> <ul><li><code>props</code>å¯ä»¥æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„ åŠ¨æ€æ•°æ®</li> <li><code>attrs</code>å¯ä»¥æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„ å›ºå®šæ•°æ® å°±ç®—ç”¨åŠ¨æ€ç»‘å®š ä»–ä¹Ÿæ˜¯æ¥æ”¶å›ºå®šæ•°æ®</li> <li><code>attrs</code> è°ƒç”¨æ–¹å¼å’Œ <code>emit</code>ä¸€æ · éœ€è¦<code>setup()</code> å‚æ•°2ä¸­ç»“æ„èµ‹å€¼ä¸­å¾—åˆ°è¯¥æ–¹æ³•
<ul><li><code>attrs.çˆ¶ç»„ä»¶ä¼ å‚çš„åç§°</code> æ¥è·å–çˆ¶ç»„ä»¶ä¼ æ¥çš„æ•°æ®
<ul><li><code>attrs['å¸¦-çš„çˆ¶ç»„ä»¶ä¼ å‚çš„åç§°']</code>å¦‚æœçˆ¶ç»„ä»¶ä¼ å‚çš„åç§°æºå¸¦ <code>-</code> éœ€è¦è¿™æ ·è®¾ç½®</li></ul></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span><span class="token punctuation">{</span>attrs<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ™®é€šçˆ¶ç»„ä»¶ä¼ å‚çš„åç§°</span>
  <span class="token keyword">const</span> ret <span class="token operator">=</span> attrs<span class="token punctuation">.</span>çˆ¶ç»„ä»¶ä¼ å‚çš„åç§°
  <span class="token comment">// å¸¦-çš„çˆ¶ç»„ä»¶ä¼ å‚çš„åç§°</span>
  <span class="token keyword">const</span> ret <span class="token operator">=</span> attrs<span class="token punctuation">[</span><span class="token string">'å¸¦-çš„çˆ¶ç»„ä»¶ä¼ å‚çš„åç§°'</span><span class="token punctuation">]</span>
  
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="vue3è®¾ç½®vueè™šæ‹Ÿdomæ–¹æ³•-createvnode"><a href="#vue3è®¾ç½®vueè™šæ‹Ÿdomæ–¹æ³•-createvnode" class="header-anchor">#</a> Vue3è®¾ç½®Vueè™šæ‹ŸDomæ–¹æ³• <code>createVNode()</code></h2> <ul><li>ä¸€èˆ¬çš„ç»„ä»¶ éƒ½åªèƒ½åœ¨<code>template</code>æ¨¡æ¿ä¸­ä½¿ç”¨ åœ¨<code>setup()</code>å¾ˆéš¾è°ƒç”¨ å¦‚æœå¸Œæœ›æ’ä»¶èƒ½åƒæ–¹æ³•ä¸€æ · åœ¨<code>setup()</code>ä¸­ä½¿ç”¨ å°±éœ€è¦è®¾ç½®ä¸ºè™šæ‹ŸDomæ–¹æ³•å®ç°åŠŸèƒ½ å¹¶ä¸”æ”¯æŒ<code>props</code>ä¼ å‚</li> <li>é€šè¿‡ä¼šæŠŠä¸€äº› å…¨å±€å¼¹çª— è®¾ç½®ä¸ºè™šæ‹ŸDomæ–¹æ³•</li> <li><code>createVNode()</code> å…·æœ‰ä¸¤ä¸ªå‚æ•°
<ul><li>å‚æ•°1 è¡¨ç¤ºå¯¼å…¥çš„ç»„ä»¶(éœ€è¦è™šæ‹ŸåŒ–çš„ç»„ä»¶)</li> <li>å‚æ•°2 è¡¨ç¤ºä¼ é€’ç»™ç»„ä»¶çš„propså€¼(è™šæ‹ŸDomçš„å‚æ•°)</li></ul></li> <li>å¦‚æœè®¾ç½®å…¨å±€å¼¹çª—æ•ˆæœ éœ€è¦é…åˆ <code>render()</code>å‡½æ•° æŠŠ<code>createVNode()</code>è®¾ç½®çš„è™šæ‹ŸDom å¯¼å…¥å…¨å±€(window)çš„div</li></ul> <h3 id="åˆ›å»ºä¸€ä¸ªå…¨å±€å¼¹çª—çš„vueè™šæ‹Ÿdomæ–¹æ³•"><a href="#åˆ›å»ºä¸€ä¸ªå…¨å±€å¼¹çª—çš„vueè™šæ‹Ÿdomæ–¹æ³•" class="header-anchor">#</a> <strong>åˆ›å»ºä¸€ä¸ªå…¨å±€å¼¹çª—çš„Vueè™šæ‹ŸDomæ–¹æ³•</strong></h3> <blockquote><p>ç›®çš„ï¼šåœ¨æ¥å£è¯·æ±‚æŠ¥é”™çš„æ—¶å€™ç»™ç”¨æˆ·è¿›è¡Œæç¤º</p></blockquote> <p>å¼¹çª—è™šæ‹ŸDomåŠŸèƒ½åˆ†æï¼š</p> <ul><li>è®¾ç½®ä¸€ä¸ªå…·æœ‰å¼¹çª—æ•ˆæœçš„æ™®é€šç»„ä»¶(æ ·å¼ æ§åˆ¶å‚æ•°)</li> <li>å°†è¯¥ç»„ä»¶è®¾ç½®ä¸ºçš„Vueè™šæ‹ŸDomæ–¹æ³•
<ul><li>ä½¿ç”¨<code>createVNode()</code> æ–¹æ³•æŠŠç»„ä»¶è®¾ç½®ä¸ºVueè™šæ‹ŸDomæ–¹æ³•</li> <li>éœ€è¦é…åˆ <code>render()</code>å‡½æ•° æŠŠ<code>createVNode()</code>è®¾ç½®çš„è™šæ‹ŸDom å¯¼å…¥å…¨å±€(window)çš„div
<ul><li>è¿™æ ·è°ƒç”¨çš„æ—¶å€™ ä»¥å…¨å±€windowä¸ºåŸºå‡†å¼¹çª— è€Œéç»„ä»¶å†…éƒ¨å¼¹çª—</li></ul></li></ul></li> <li>åœ¨Vueç»„ä»¶ä¸­ è°ƒç”¨è¯¥Vueè™šæ‹ŸDomæ–¹æ³• å¹¶ä¸”è®¾ç½®å‚æ•°</li></ul> <blockquote><p>å…¨å±€å¼¹çª—çš„Vueè™šæ‹ŸDomæ–¹æ³• å®ç°æ­¥éª¤</p></blockquote> <ol><li><p>è®¾ç½®ä¸€ä¸ªå…·æœ‰å¼¹çª—æ•ˆæœçš„æ™®é€šç»„ä»¶(æ ·å¼ å‚æ•°)</p> <ul><li><p>å¼¹çª—ç»„ä»¶åæ˜¯<code>xtx-message.vue</code> (æ¨¡æ‹Ÿ)</p> <p>(è¿™é‡Œå‡è®¾å¼¹çª—æ ·å¼ å°±ä¸å†™äº†)</p></li></ul></li> <li><p>æŠŠå¼¹çª—ç»„ä»¶è®¾ç½®ä¸ºVueçš„è™šæ‹ŸDomæ–¹æ³•</p> <ul><li>ä½¿ç”¨<code>createVNode()</code> æ–¹æ³•æŠŠç»„ä»¶è®¾ç½®ä¸ºVueçš„è™šæ‹ŸDomæ–¹æ³•</li> <li>éœ€è¦é…åˆ <code>render()</code>å‡½æ•° æŠŠ<code>createVNode()</code>è®¾ç½®çš„è™šæ‹ŸDom å¯¼å…¥å…¨å±€(window)çš„div
<ul><li>è¿™æ ·è°ƒç”¨çš„æ—¶å€™ ä»¥å…¨å±€windowä¸ºåŸºå‡†å¼¹çª— è€Œéç»„ä»¶å†…éƒ¨å¼¹çª—</li></ul></li></ul></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å¯¼å…¥å¼¹çª—æ•ˆæœæ’ä»¶</span>
<span class="token keyword">import</span> XtxMessage <span class="token keyword">from</span> <span class="token string">'../../utils/xtx-message.vue'</span>

<span class="token comment">// å¯¼å…¥Vue3ä½¿ç”¨çš„æ–¹æ³•</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createVNode<span class="token punctuation">,</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token comment">// åˆ›å»ºä¸€ä¸ªå…¨å±€ç»„ä»¶çš„div(è¿™æ ·è°ƒç”¨çš„æ—¶å€™ ä»¥å…¨å±€windowä¸ºåŸºå‡†å¼¹çª— è€Œéç»„ä»¶å†…éƒ¨å¼¹çª—)</span>
<span class="token comment">// åŠ¨æ€åˆ›å»ºä¸€ä¸ªdivï¼Œç„¶åæ·»åŠ åˆ°é¡µé¢çš„bodyé‡Œé¢ï¼Œç”¨äºæ”¾ç½®æç¤ºç»„ä»¶</span>
<span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'xtx-message-container'</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> type <span class="token operator">=</span> <span class="token string">'success'</span><span class="token punctuation">,</span> text <span class="token operator">=</span> <span class="token string">'error'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¿™é‡Œéœ€è¦æŠŠXtxMessageç»„ä»¶å¡«å……åˆ°ä¸Šè¿°çš„divå½“ä¸­</span>
  <span class="token comment">// createVNodeç”¨äºå°†ç»„ä»¶æ¸²æŸ“ä¸ºè™šæ‹ŸèŠ‚ç‚¹</span>
  <span class="token comment">// å‚æ•°ä¸€è¡¨ç¤ºå¯¼å…¥çš„ç»„ä»¶</span>
  <span class="token comment">// å‚æ•°äºŒè¡¨ç¤ºä¼ é€’ç»™ç»„ä»¶çš„propså±æ€§(æ’ä»¶çš„å‚æ•°)</span>
  <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">createVNode</span><span class="token punctuation">(</span>XtxMessage<span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> text <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// éœ€è¦æŠŠvnodeå¡«å……åˆ°divé‡Œé¢</span>
  <span class="token comment">// Vue2ä¸­renderå‡½æ•°æ˜¯é€‰é¡¹ï¼Œç”¨æ¥ç”Ÿæˆç»„ä»¶çš„æ¨¡æ¿</span>
  <span class="token comment">// Vue3ä¸­renderå‡½æ•°æ˜¯å¯¼å…¥çš„</span>
  <span class="token function">render</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> div<span class="token punctuation">)</span>
  <span class="token comment">// 3ç§’åæŠŠXtxMessageç»„ä»¶è¿›è¡Œéšè—(å…¶å®å°±æ˜¯æŠŠdivä¸­ç»„ä»¶é”€æ¯)</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ¸…ç©ºdivé‡Œé¢çš„å†…å®¹</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> div<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// -----------------------------------------</span>
<span class="token comment">// åœ¨setup()ä¸­ä½¿ç”¨æ–¹æ³•</span>
<span class="token comment">// Message({type: 'success', text: 'ç™»å½•å¤±è´¥'})</span>

</code></pre></div><ol start="3"><li>åœ¨Vueç»„ä»¶çš„<code>setup()</code>ä¸­ä½¿ç”¨
<ul><li>å…ˆå¯¼å…¥è®¾ç½®çš„ å¼¹çª—è™šæ‹ŸDomæ–¹æ³•</li> <li>ç„¶ååœ¨<code>setup()</code>ä¸­ä½¿ç”¨è¯¥å¼¹çª—è™šæ‹ŸDomæ–¹æ³•</li></ul></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//å¯¼å…¥å°è£…çš„ å¼¹çª—è™šæ‹ŸDomæ–¹æ³•</span>
<span class="token keyword">import</span> Message <span class="token keyword">from</span> <span class="token string">'@/components/library/Message.js'</span>
<span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token comment">// setup ()é‡Œé¢ç›´æ¥è°ƒç”¨å³å¯</span>
  	<span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'ç™»å½•å¤±è´¥'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>æ€»ç»“ï¼š</p> <ol><li>åŸºäºç»„ä»¶æ¸²æŸ“è™šæ‹ŸèŠ‚ç‚¹ï¼šcreateVNodeæ–¹æ³•</li> <li>æ¸²æŸ“VNodeåˆ°æŒ‡å®šä½ç½®:  render(vnode, dom)</li></ol> <h2 id="vue3ä¸­åˆ›å»ºåŸå‹é“¾å¯¹è±¡-vue2ä¸­çš„-this-æ–¹æ³•å"><a href="#vue3ä¸­åˆ›å»ºåŸå‹é“¾å¯¹è±¡-vue2ä¸­çš„-this-æ–¹æ³•å" class="header-anchor">#</a> Vue3ä¸­åˆ›å»ºåŸå‹é“¾å¯¹è±¡ (Vue2ä¸­çš„ this.$æ–¹æ³•å)</h2> <ul><li><p>åœ¨Vue3ä¸­ä¹Ÿæ”¯æŒåˆ›å»ºåŸå‹é“¾å¯¹è±¡ å¹¶ä¸”æ”¯æŒè°ƒç”¨ é€šè¿‡<code>app.config.globalProperties</code>æ¥åˆ›å»º ç„¶åé€šè¿‡<code>use()</code>å®ä¾‹</p> <ul><li>Vue2ä¸­ä½¿ç”¨åŸå‹é“¾å¯¹è±¡æ–¹æ³•æ˜¯ this.$æ–¹æ³•å ä½†æ˜¯åœ¨Vue3ä¸­çš„<code>setup()</code>ä¸­ä¸èƒ½ä½¿ç”¨ <code>this</code> å’Œ <code>$</code></li></ul></li> <li><p><font color="#ff3040">æ³¨æ„: åˆ›å»ºåŸå‹é“¾å¯¹è±¡çš„æ–¹æ³• éœ€è¦å…ˆåˆ›å»ºè™šæ‹ŸDomæ–¹æ³• ç„¶åæ‰èƒ½åˆ›å»ºåŸå‹é“¾å¯¹è±¡(è¯¦çœ‹31)</font></p></li> <li><p>åˆ›å»ºåŸå‹é“¾å¯¹è±¡çš„æ–¹æ³•</p> <ul><li><code>app.config.globalProperties.$è¦åˆ›å»ºçš„åŸå‹é“¾æ–¹æ³•å = åˆ›å»ºçš„è™šæ‹ŸDomæ–¹æ³•</code></li></ul></li> <li><p>é€šå¸¸åœ¨ <code>main.js</code>å…¥å£æ–‡ä»¶åˆ›å»ºVue3åŸå‹é“¾å¯¹è±¡æ–¹æ³•</p> <p>å‘½åå¯ä»¥ä¸ç”¨<code>$</code>ä½†æ˜¯ä¸€èˆ¬éƒ½ä¼šé»˜è®¤æœ‰<code>$</code></p></li></ul> <blockquote><p>åˆ›å»ºæ–¹æ³•</p></blockquote> <ul><li>åœ¨ <code>main.js</code>å…¥å£æ–‡ä»¶åˆ›å»ºVue3åŸå‹é“¾å¯¹è±¡æ–¹æ³•</li> <li>é€šè¿‡<code>app.config.globalProperties</code>æ¥åˆ›å»º ç„¶åé€šè¿‡<code>use()</code>å®ä¾‹</li> <li><font color="#ff3040">æ³¨æ„: åˆ›å»ºåŸå‹é“¾å¯¹è±¡çš„æ–¹æ³• éœ€è¦å…ˆåˆ›å»ºè™šæ‹ŸDomæ–¹æ³• ç„¶åæ‰èƒ½åˆ›å»ºåŸå‹é“¾å¯¹è±¡(è¯¦çœ‹31)</font></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å¯¼å…¥å®ä¾‹åŒ–çš„Vue3</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token comment">// å¯¼å…¥Vue3è¦æ·»åŠ çš„åŸå‹é“¾æ–¹æ³•(éœ€è¦å…ˆåˆ›å»ºè™šæ‹ŸDomæ–¹æ³•)</span>
<span class="token keyword">import</span> Message <span class="token keyword">from</span> <span class="token string">'./components/library/Message.js'</span>
<span class="token comment">// åˆ›å»ºVue3è¦æ·»åŠ çš„åŸå‹é“¾æ–¹æ³•</span>
<span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€šè¿‡config.globalPropertiesç»™å…¶æ·»åŠ åŸå‹é“¾æ–¹æ³•</span>
    <span class="token comment">// app.config.globalProperties.$è¦åˆ›å»ºçš„åŸå‹é“¾æ–¹æ³•å = åˆ›å»ºçš„è™šæ‹ŸDomæ–¹æ³•</span>
    app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$message <span class="token operator">=</span> Message
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// åˆ›å»ºä¸€ä¸ªvueåº”ç”¨å®ä¾‹(.use() å¯ä»¥å®ä¾‹åŒ–å¯¼å…¥)</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>å¦‚æœæƒ³ä½¿ç”¨åŸå‹é“¾å¯¹è±¡æ–¹æ³• éœ€è¦é€šè¿‡<code>getCurrentInstance()</code>ä½¿ç”¨åŸå‹é“¾å¯¹è±¡æ–¹æ³• æ¥ä½¿ç”¨ (å¾€ä¸‹çœ‹33)</p></blockquote> <h2 id="vue3ä¸­ä½¿ç”¨åŸå‹é“¾å¯¹è±¡æ–¹æ³•-getcurrentinstance"><a href="#vue3ä¸­ä½¿ç”¨åŸå‹é“¾å¯¹è±¡æ–¹æ³•-getcurrentinstance" class="header-anchor">#</a> Vue3ä¸­ä½¿ç”¨åŸå‹é“¾å¯¹è±¡æ–¹æ³• <code>getCurrentInstance()</code></h2> <ul><li>åœ¨Vue3çš„<code>setup()</code>ä¸­ æ— æ³•ä½¿ç”¨ <code>this.$</code>æ–¹æ³•(åŒ…æ‹¬æ¨¡æ¿templateä¸­çš„<code>$</code>)
<ul><li>å¦‚æœéœ€è¦ä½¿ç”¨Vue3çš„ this.$æ–¹æ³• å°±éœ€è¦é€šè¿‡<code>getCurrentInstance()</code> Vue3æ–¹æ³•æ¥å®ç°(éœ€è¦å®ä¾‹åŒ–)
<ul><li><code>å®ä¾‹åŒ–åç§°.proxy.$åŸå‹é“¾æ–¹æ³•å()</code></li></ul></li></ul></li></ul> <blockquote><p>è·å–åŸå‹é“¾å¯¹è±¡æ¡ˆä¾‹</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// å¯¼å…¥getCurrentInstance ä½¿ç”¨åŸå‹é“¾å¯¹è±¡æ–¹æ³•</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getCurrentInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token comment">// åœ¨setup()ä¸­ä½¿ç”¨</span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// å®ä¾‹åŒ– getCurrentInstance ä½¿ç”¨åŸå‹é“¾å¯¹è±¡æ–¹æ³•</span>
     <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token comment">// è°ƒç”¨Vue3çš„åŸå‹é“¾å¯¹è±¡æ–¹æ³• å®ä¾‹åŒ–åç§°.proxy.$åŸå‹é“¾æ–¹æ³•å()</span>
    instance<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'åŠ å…¥æˆåŠŸ'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue-router-ä¸¤ç§è·³è½¬æ–¹æ³•-pathå’Œfullpath"><a href="#vue-router-ä¸¤ç§è·³è½¬æ–¹æ³•-pathå’Œfullpath" class="header-anchor">#</a> Vue-router ä¸¤ç§è·³è½¬æ–¹æ³• <code>path</code>å’Œ<code>fullPath</code></h2> <ul><li><code>fullPath</code>æ˜¯è·¯ç”±å…¨åœ°å€ å¸¦å‚æ•°</li> <li><code>path</code>æ˜¯è·¯å¾„ï¼Œä¸å¸¦å‚æ•°</li></ul> <blockquote><p>è·³è½¬æ¡ˆä¾‹(æºå¸¦å‚æ•°)</p></blockquote> <p>å¦‚ï¼š192.168.0.1/index?page=1</p> <ul><li><code>fullPath</code>ä¸º/index?page=1</li> <li><code>path</code>ä¸º/index</li></ul></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2022/1/26 ä¸‹åˆ4:47:25</span></div></footer> <!----> <!----> <!----></main> <!----></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div><APlayer audio="" fixed="true" mini="true" theme="#647ea0" loop="loop" order="list" preload="auto" volume="0.3" mutex="true" lrc-type="0" list-folded="true" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div id="goTop" class="hide-cat" data-v-bf92849a></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      æ¬¢è¿æ¥åˆ° LKaiLi
    </div> <div class="operation" style="right:90px;bottom:40px;display:none;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:none;" data-v-5775ee02></i></div> <canvas id="banniang" width="120" height="322" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    çœ‹æ¿å¨˜
  </div></div></div></div>
    <script src="/assets/js/app.2e49fa50.js" defer></script><script src="/assets/js/5.e6fb2106.js" defer></script><script src="/assets/js/1.0bb3dd52.js" defer></script><script src="/assets/js/30.5412368d.js" defer></script>
  </body>
</html>

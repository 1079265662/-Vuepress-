---
title: Vue2相关的内容
date: 2022-03-26
cover: https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/wallhaven-3zexp3.jpg
tags:
 - Vue
categories: Vue

---

::: tip 介绍
Vue2中组件相关的内容<br>
:::

<!-- more -->

## Vue2 组件的内容

* Vue的特性就是组件化十分的完善好用 通常可以设置传值`props` 并且使用插槽 `slot`

> 组件

* 组件需要设置`props` 来接收父组件传递的值 并且`props`可以设置默认值和类型 
* 组件同过`this.$emi` 给外部传值
* 组件可以设置具名插槽和默认插槽 推荐具名插槽`<slot name="" />` 实现组件的高度自定义 
  * 调用组件的页面 可以通过插槽 直接在组件中添加一些内容 十分的方便

```vue
<template>
  <div>
      <!-- 如果有值传入 -->
    <template v-if="deptList">
      <div v-for="(item,index) in deptList" :key="index" class="permission_check">
          <div slot="reference" :class="['permission_check_box',PermissionChange === index ? 'backgroundTrue' : 'backgroundFalse']" @click="changePermission(index,item)">
            <span class="textlimit">{{ item.name }}</span>
            <!-- 插槽 右侧自定义内容 -->
            <slot name="context" />
          </div>
      </div>
    </template>
      <!-- 如果没值传入 -->
    <template v-else>
      <div class="nullclass">暂无数据</div>
    </template>
  </div>
</template>
<script>
export default {
  name: 'PermissionCheck',
  props: {
    // 接收渲染的数组
    deptList: {
      type: Array,
      default: null
    },
    // 接收默认索引
    defaultIndex: {
      type: Number,
      default: -1
    },
  },
  data () {
    return {
      // 当前选中的索引
      PermissionChange: this.defaultIndex
    }
  },
  methods: {
    // 修改事件
    changePermission (index, item) {
      // 判断是否选中同一个
      if (this.PermissionChange === index) return
      this.PermissionChange = index
      // 传递修改的参数
      this.$emit('item', item)
    }
  }
}
</script>
<style lang="scss" scoped>
.permission_check {
  margin-bottom: -20px;
  margin-top: 20px;
  .permission_check_box {
    height: 50px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding: 0px 20px;
    cursor: pointer;
    transition: $transition;
    &:hover {
      background: $boxHover;
    }
  }
  .backgroundTrue {
    background: $boxCheck;
  }
  .backgroundFalse {
    background: #fff;
  }
  .textlimit {
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }
}
.nullclass {
  color: #909399;
  font-size: 12px;
  text-align: center;
}
</style>

```

> 调用组件

* 调用组件并且传值 注意要导入组件哦
  * `:` 来给组件传递数值
  * `@` 来接收组件用`this.$emi`传来的数值
  * `v-slot:` 来使用组件的插槽

```vue
<template>
  <div>
  	<permissioncheck :dept-list="deptList" @item="getItem">
		<!-- 使用组件的插槽 -->
		<template v-slot:context>
			<div>
				123
			</div>
		</template>
	</permissioncheck>
  </div>
</template>
<script>
// 注册选择栏
import permissioncheck from './components/permission-check'
export default {
  components:{
    permissioncheck
  }
}
</script>
```

> 组件的效果

![image-20220326205826701](https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/image-20220326205826701.png)

## 父子传值修饰符`.sync`

* 父组件和子组件对相同的值进行修改 不需要使用`:`和`@` 我们可以二合一 用`.sync`来代替
* 通常是用的的地方是 弹出层的显示与隐藏效果

> 父组件

* 假设我们`addass`组件的`visible`值 父组件和子组件都需要修改 这时候我们给父组件添加`.sync`

```vue
    <addass :visible.sync="visible" /> 
```

> 子组件

* 子组件通过`update:` 来修改`visible`值 实现`.sync`的双向绑定

```js
     this.$emit('update:visible', false)
```
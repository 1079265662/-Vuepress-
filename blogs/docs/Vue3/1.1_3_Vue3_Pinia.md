---
title: Vue3ä½¿ç”¨Piniaå…¨å±€çŠ¶æ€ç®¡ç†
date: 2022-08-31
cover: https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/202208311831885.jpg
tags:
 - Vue3
 - Pinia
categories: Vue3
---

::: tip ä»‹ç»
Vue3ä½¿ç”¨Piniaå…¨å±€çŠ¶æ€ç®¡ç†<br>
:::

<!-- more -->

## ä»€ä¹ˆæ˜¯Pinia

Piniaæ˜¯Vueç”Ÿæ€é‡ŒVuexçš„ä»£æ›¿è€…ï¼Œä¸€ä¸ªå…¨æ–°Vueçš„çŠ¶æ€ç®¡ç†åº“ã€‚åœ¨Vue3æˆä¸ºæ­£å¼ç‰ˆä»¥åï¼Œå°¤é›¨æºªå¼ºåŠ¿æ¨èçš„é¡¹ç›®å°±æ˜¯Piniaã€‚é‚£å…ˆæ¥çœ‹çœ‹Piniaæ¯”Vuexå¥½çš„åœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯Piniaçš„äº”å¤§ä¼˜åŠ¿ã€‚

* å¯ä»¥å¯¹Vue2å’ŒVue3åšåˆ°å¾ˆå¥½çš„æ”¯æŒï¼Œä¹Ÿå°±æ˜¯è€é¡¹ç›®ä¹Ÿå¯ä»¥ä½¿ç”¨Piniaã€‚
* æŠ›å¼ƒäº†Mutationsçš„æ“ä½œï¼Œåªæœ‰stateã€getterså’Œactions.æå¤§çš„ç®€åŒ–äº†çŠ¶æ€ç®¡ç†åº“çš„ä½¿ç”¨ï¼Œè®©ä»£ç ç¼–å†™æ›´åŠ å®¹æ˜“ç›´è§‚ã€‚
* ä¸éœ€è¦åµŒå¥—æ¨¡å—ï¼Œç¬¦åˆVue3çš„Composition api ï¼Œè®©ä»£ç æ›´åŠ æ‰å¹³åŒ–ã€‚
* å®Œæ•´çš„TypeScriptæ”¯æŒã€‚Vue3ç‰ˆæœ¬çš„ä¸€å¤§ä¼˜åŠ¿å°±æ˜¯å¯¹TypeScriptçš„æ”¯æŒï¼Œæ‰€ä»¥Piniaä¹Ÿåšåˆ°äº†å®Œæ•´çš„æ”¯æŒã€‚å¦‚æœä½ å¯¹Vuexå¾ˆç†Ÿæ‚‰çš„åŒ–ï¼Œä¸€å®šçŸ¥é“Vuexå¯¹TSçš„è¯­æ³•æ”¯æŒä¸æ˜¯å®Œæ•´çš„ï¼ˆç»å¸¸è¢«åæ§½ï¼‰ã€‚
* ä»£ç æ›´åŠ ç®€æ´ï¼Œå¯ä»¥å®ç°å¾ˆå¥½çš„ä»£ç è‡ªåŠ¨åˆ†å‰²ã€‚Vue2çš„æ—¶ä»£ï¼Œå†™ä»£ç éœ€è¦æ¥å›ç¿»æ»šå±å¹•å±å¹•æ‰¾å˜é‡ï¼Œéå¸¸çš„éº»çƒ¦ï¼ŒVue3çš„`Composition api`å®Œç¾äº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ å¯ä»¥å®ç°ä»£ç è‡ªåŠ¨åˆ†å‰²ï¼Œpiniaä¹ŸåŒæ ·ç»§æ‰¿äº†è¿™ä¸ªä¼˜ç‚¹ã€‚

## åˆ›å»ºPinia ä»“åº“

* é€šè¿‡[create-vue](https://github.com/vuejs/create-vue) åˆ›å»ºä¸€ä¸ªVue3é¡¹ç›® å¹¶å‹¾é€‰Pinia å°±å¯ä»¥ç›´æ¥ä½¿ç”¨

![image-20220830113303942](https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/202208301133086.png)

## åˆ›å»ºä¸€ä¸ªstate

* å’ŒVuexç±»ä¼¼ Piniaæ‹¥æœ‰:
  * `id` ä»“åº“çš„åç§° ä½œä¸ºå”¯ä¸€æ ‡è¯†
  * `state` å£°æ˜çŠ¶æ€å‚¨å­˜æ•°æ® (ç›¸å½“äºdataå‚¨å­˜æ•°æ®)
  * `getters`  è®¡ç®—çŠ¶æ€å˜åŒ– (ç›¸å½“äºwatchç›‘å¬æ•°æ®å˜åŒ–)
  * `actions `è¿›è¡Œä¸€äº›æ–¹æ³•é€»è¾‘å¤„ç† (ç›¸å½“äºmethodsæ–¹æ³•)
* ä¸Vuexæ¯” Piniaå–æ¶ˆäº†ç¹ççš„ åŒæ­¥å¼‚æ­¥é€»è¾‘å¤„ç† æ‰€ä»¥çš„é€»è¾‘æ€§æ–¹æ³•åªéœ€è¦`actions ` ç»Ÿä¸€å¤„ç†å³å¯

> åˆ›å»ºä¸€ä¸ªPiniaä»“åº“å¹¶ä½¿ç”¨

* å’ŒVuexä¸€æ · åœ¨`src`ä¸‹ åˆ›å»ºä¸€ä¸ª`stores`æ–‡ä»¶ ä½œä¸ºä»“åº“æ–‡ä»¶å¤¹

![img](https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/202208311826404.png)

* åˆ›å»ºæ–‡ä»¶å éœ€è¦å¼•å…¥Piniaä»“åº“çš„æ–¹æ³• è¿›è¡Œåˆ›å»º

```tsx
// 1. å®šä¹‰çŠ¶æ€å®¹å™¨å’Œæ•°æ®
// 2. å®šä¹‰å®¹å™¨ä¸­çš„state (å…¨å±€æ•°æ®çŠ¶æ€/å‚¨å­˜)
// 3. ä»“åº“ä¸­çš„actionçš„ä½¿ç”¨

// å¼•å…¥piniaä»“åº“(å®¹å™¨)
import { defineStore } from 'pinia'

export const useCounterStore = defineStore({
  // ç»™ä»“åº“èµ·ä¸€ä¸ªåç§°(å”¯ä¸€æ ‡è¯†)
  id: 'counter',
  // å£°æ˜çŠ¶æ€å‚¨å­˜æ•°æ® (ç›¸å½“äºdataå‚¨å­˜æ•°æ®)
  state: () => ({
    counter: 666
  }),
  // è®¡ç®—çŠ¶æ€å˜åŒ– (ç›¸å½“äºwatchç›‘å¬æ•°æ®å˜åŒ–)
  getters: {},
  //  è¿›è¡Œä¸€äº›æ–¹æ³•é€»è¾‘å¤„ç† (ç›¸å½“äºmethodsæ–¹æ³•)
  actions: {}
})

```

* å®šä¹‰`state`ä¹Ÿå¯ä»¥é€šè¿‡`return`è®¾ç½®æ•°æ®
  * ğŸ“•å®˜æ–¹æ¨èä½¿ç”¨ç®­å¤´å‡½æ•°(`()=>{}`)è·å¾—æ›´å¥½çš„ç±»å‹æ¨æ–­


```tsx
export const useCounterStore = defineStore({
  id: 'counter',
  state: () => {
	// é€šè¿‡returnçš„æ–¹å¼å®šä¹‰state
    return {
      counter: 123
    }
  },
  getters: {
    doubleCount: (state) => state.counter * 2
  },
  actions: {
    increment() {
      this.counter++
    }
  }
```

* åœ¨Vueæ–‡ä»¶ä¸­ è¿›è¡Œå¯¼å…¥Piniaä»“åº“ å°±å¯ä»¥ä½¿ç”¨å•¦

```vue
<template>
  <main>{{ store.counter }}</main>
</template>
<script lang="ts" setup>
// å¯¼å…¥pinia
import { useCounterStore } from '@/stores/counter'
// å®ä¾‹åŒ–pinia
const store = useCounterStore()
console.log(store)
</script>
```

* æƒ³åœ¨`template` è§£æ„ä½¿ç”¨`store`ä¸­çš„å€¼ å¯ä»¥é€šè¿‡å®˜æ–¹æä¾›çš„[storeToRefs](https://pinia.vuejs.org/api/modules/pinia.html#storetorefs) è¿›è¡Œè§£æ„(ç±»ä¼¼äºVue3ä¸­çš„`toRefs()`
  * ä¸è¦ç›´æ¥è§£æ„ ç›´æ¥è§£æ„ä¼šé€ æˆæ•°æ®å¤±å»å“åº”å¼

```vue
<template>
  <main>{{ counter }}</main>
</template>
<script lang="ts" setup>
// å¯¼å…¥piniaçš„storeToRefsè§£æ„æ–¹æ³•
import { storeToRefs } from 'pinia'
// å¯¼å…¥å…¨å±€ä»“åº“
import { useCounterStore } from '@/stores/counter'
// å®ä¾‹åŒ–pinia
const store = useCounterStore()
// è§£æ„æ•°æ®
const { counter } = storeToRefs(store)
</script>
```

* ä½¿ç”¨Vue3çš„[toRefs()](https://cn.vuejs.org/api/reactivity-utilities.html#torefs) ä¹Ÿå¯ä»¥è¿›è¡Œè§£æ„æ“ä½œ ä½†æ˜¯ä¸çŸ¥é“å…¼å®¹æ€§æ€æ · å»ºè®®è¿˜æ˜¯ä½¿ç”¨Piniaæä¾›çš„`storeToRefs`å§

```vue
<template>
  <main>{{ counter }}</main>
</template>
<script lang="ts" setup>
// ä½¿ç”¨Vue3çš„toRefsè§£æ„æ•°æ®
import { toRefs } from 'vue'
// å¯¼å…¥å…¨å±€ä»“åº“
import { useCounterStore } from '@/stores/counter'
// å®ä¾‹åŒ–pinia
const store = useCounterStore()
// è§£æ„æ•°æ®
const { counter } = toRefs(store)
</script>

```

* å…¶å®åœ¨`Vuex`ä¸­ï¼Œç›´æ¥è§£æ„æ•°æ®ä¹Ÿæ˜¯ä¸å¯ä»¥çš„ã€‚

## ä¿®æ”¹çŠ¶æ€æ•°æ®(state)æ–¹å¼

* ä¿®æ”¹`state` æ€»å…±æœ‰å››ç§æ–¹å¼ 
  * å‰ä¸¤ç§ é€‚åˆç®€å•æ— é€»è¾‘è¾ƒå°‘çš„ä¿®æ”¹
  * ç¬¬ä¸‰ç§ é€‚åˆé€»è¾‘æ€§å¤šæ•°æ®çš„ä¿®æ”¹
  * ç¬¬å››ç§ æ˜¯å†™åœ¨`actions` ä¹Ÿå°±æ˜¯Piniaä¸­ é€‚åˆå…¨å±€å¤ç”¨æ€§çš„é€»è¾‘ä¿®æ”¹

### **æ–¹å¼1 ç›´æ¥å£°æ˜æ–¹æ³•ä¿®æ”¹**

* å¯ä»¥åœ¨Vueä¸­ç›´æ¥ä¿®æ”¹`state`çš„å€¼ è¿™ç§æ–¹æ³•æœ€ç®€å• ä½†æ˜¯åªé€‚åˆä¿®æ”¹å•ä¸€æ•°æ®
  * é€‚åˆç®€å•æ— é€»è¾‘è¾ƒå°‘çš„ä¿®æ”¹

```vue
<template>
  <main>{{ counter }}</main>
  <div>
    <button @click="changeCounter">ä¿®æ”¹å†…å®¹</button>
  </div>
</template>
<script lang="ts" setup>
import { storeToRefs } from 'pinia'
import { useCounterStore } from '@/stores/counter'
//å¯¼å…¥Pinia
const store = useCounterStore()
// ä¿®æ”¹Piniaçš„å…¨å±€çŠ¶æ€
const changeCounter = () => {
  //ä¿®æ”¹Piniaçš„å€¼
  store.counter++
}
// è§£æ„æ•°æ®
const { counter } = storeToRefs(store)
</script>

```

### **æ–¹å¼2  $patchä¿®æ”¹å¤šæ¡æ•°æ®**

* ` store.$patch({})` å¯ä»¥ä¿®æ”¹å¤šæ¡æ•°æ® è¿™ç§ä¿®æ”¹æ–¹å¼ æœ‰ç‚¹ç±»ä¼¼äºå¾®ä¿¡å°ç¨‹åº`this.setData()`æ–¹æ³• å¯ä»¥è¿›è¡Œæ‰¹é‡æ— é€»è¾‘æ€§çš„ä¿®æ”¹
  * é€‚åˆç®€å•æ— é€»è¾‘è¾ƒå°‘çš„ä¿®æ”¹

```vue
<template>
  <main>
    {{ counter }}
    {{ message }}
  </main>
  <div>
    <button @click="changeCounter">ä¿®æ”¹å†…å®¹</button>
  </div>
</template>
<script lang="ts" setup>
import { storeToRefs } from 'pinia'
import { useCounterStore } from '@/stores/counter'
//å¯¼å…¥Pinia
const store = useCounterStore()
// ä¿®æ”¹Piniaçš„å…¨å±€çŠ¶æ€
const changeCounter = () => {
  // é€šè¿‡$patch è¿›è¡Œä¿®æ”¹
  store.$patch({
    counter: store.counter + 2,
    message: 'hello'
  })
}
// è§£æ„æ•°æ®
const { counter, message } = storeToRefs(store)
</script>

```

### **æ–¹å¼3  $patchè¿›è¡Œå‡½æ•°çš„å½¢å¼ä¿®æ”¹æ•°æ®**

* ` store.$patch((state) => {})` è¿™æ—¶å€™çš„stateå°±æ˜¯`store`ä»“åº“é‡Œçš„`state`ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨å‡½æ•°é‡Œæ”¹å˜ä»»ä½•çŠ¶æ€æ•°æ®çš„å€¼ã€‚
  * é€‚åˆé€»è¾‘æ€§å¤šæ•°æ®çš„ä¿®æ”¹

```vue
<template>
  <main>
    {{ counter }}
    {{ message }}
  </main>
  <div>
    <button @click="changeCounter">ä¿®æ”¹å†…å®¹</button>
  </div>
</template>
<script lang="ts" setup>
import { storeToRefs } from 'pinia'
import { useCounterStore } from '@/stores/counter'
//å¯¼å…¥Pinia
const store = useCounterStore()
// ä¿®æ”¹Piniaçš„å…¨å±€çŠ¶æ€
const changeCounter = () => {
  // é€šè¿‡$patchå‡½æ•°çš„æ–¹å¼è¿›è¡Œä¿®æ”¹
  store.$patch((state) => {
    state.counter++
    state.message = 'hello'
  })
}
// è§£æ„æ•°æ®
const { counter, message } = storeToRefs(store)
</script>

```

### **æ–¹å¼4 åœ¨actionsä¸­å£°æ˜æ–¹æ³• å†è°ƒç”¨actions**

* å¯ä»¥å…ˆåœ¨`store`é‡Œï¼Œå®šä¹‰å¥½`actions`ä¸­çš„å‡½æ•°ï¼Œç„¶ååœ¨ç»„ä»¶é‡Œå†è°ƒç”¨å‡½æ•°ã€‚
* åœ¨ç”¨`actions`çš„æ—¶å€™ï¼Œä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå› ä¸ºç®­å¤´å‡½æ•°ç»‘å®šæ˜¯å¤–éƒ¨çš„`this`ã€‚
* åœ¨Piniaå†…éƒ¨ä¸­ å¯ä»¥ç”¨thisæ¥è°ƒç”¨`state`çš„å€¼ æœ‰ç‚¹ç±»ä¼¼äº`class`ä¸­çš„`this`
  * é€‚åˆå…¨å±€å¤ç”¨æ€§çš„é€»è¾‘ä¿®æ”¹

> å…ˆåœ¨Piniaä¸­å®šä¹‰actionsæ–¹æ³•

```tsx
// å¼•å…¥piniaä»“åº“(å®¹å™¨)
import { defineStore } from 'pinia'

export const useCounterStore = defineStore({
  id: 'counter',
  state: () => {
   return {
        counter: 123,
        message: 'ä½ å¥½'
    }
  },
  getters: {},
  //  è¿›è¡Œä¸€äº›æ–¹æ³•é€»è¾‘å¤„ç† (ç›¸å½“äºmethodsæ–¹æ³•)
  actions: {
      // åœ¨Piniaä¸­å¤„ç†é€»è¾‘
    changeStore() {
      this.counter++
      this.message = 'hello'
    }
  }
```

> åœ¨Vueä¸­ä½¿ç”¨

```vue
<template>
  <main>
    {{ counter }}
    {{ message }}
  </main>
  <div>
    <button @click="changeCounter">ä¿®æ”¹å†…å®¹</button>
  </div>
</template>
<script lang="ts" setup>
import { storeToRefs } from 'pinia'
import { useCounterStore } from '@/stores/counter'
//å¯¼å…¥Pinia
const store = useCounterStore()
// å£°æ˜ä¸€ä¸ªæ–¹æ³•
const changeCounter = () => {
// ç›´æ¥è°ƒç”¨Piniaä¸­çš„actionså£°æ˜çš„æ–¹æ³•
  store.changeStore()
}
// è§£æ„æ•°æ®
const { counter, message } = storeToRefs(store)
</script>

```

## Piniaä¸­çš„getters

* Piniaä¸­çš„`getters`å’ŒVueä¸­çš„è®¡ç®—å±æ€§å‡ ä¹ä¸€æ ·ï¼Œå°±æ˜¯åœ¨è·å–`state`çš„å€¼æ—¶ä½œä¸€äº›å¤„ç†ã€‚
* åœ¨Vueä¸­ ç›´æ¥è°ƒç”¨`getters`æ–¹æ³• å¯¹`state`æ•°æ®è¿›è¡Œå¤„ç†

> å…ˆåœ¨Piniaä¸­å®šä¹‰gettersæ–¹æ³•

```tsx
// å¼•å…¥piniaä»“åº“(å®¹å™¨)
import { defineStore } from 'pinia'

export const useCounterStore = defineStore({
  id: 'counter',
  state: () => {
    return {
      message: 'å¤§å®¶å¥½å•Š'
    }
  },
  // è®¡ç®—çŠ¶æ€å˜åŒ– (ç›¸å½“äºwatchç›‘å¬æ•°æ®å˜åŒ–)
  getters: {
    // å¤„ç†stateçš„å€¼
    changeMessage(state) {
      return (state.message = state.message + 'æˆ‘æ˜¯å°åˆ˜')
    }
  },
  actions: {}
})

```

> åœ¨Vueä¸­ä½¿ç”¨

```vue
<template>
  <main>{{ changeMessage }}</main>
</template>
<script lang="ts" setup>
import { storeToRefs } from 'pinia'
import { useCounterStore } from '@/stores/counter'
//å¯¼å…¥Pinia
const store = useCounterStore()
// è§£æ„æ•°æ® ä½¿ç”¨å¤„ç†åçš„stateæ•°æ®
const { changeMessage } = storeToRefs(store)
</script>

```

### **gettersçš„ç¼“å­˜ç‰¹æ€§**

* `getters`æ˜¯æœ‰ç¼“å­˜ç‰¹æ€§çš„ ä¹Ÿå°±æ˜¯è¯´ å¦‚æœ`state`çš„å€¼å’ŒåŸæ¥ä¸€æ · é‚£ä¹ˆå°†ä¸ä¼šè¿›è¡Œè°ƒç”¨ 
  * æ¯”å¦‚åœ¨æ¨¡æ¿ä¸­å¤šæ¬¡ç”¨åˆ°åŒæ ·çš„`getters`æ–¹æ³• ä¸”`state`ä¸å˜ é‚£ä¹ˆ`getters`åªä¼šè°ƒç”¨ä¸€æ¬¡
* `getters`çš„æ•°æ®æ˜¯å“åº”å¼æ•°æ® å¦‚æœå¯¹åº”çš„`state`å€¼æ”¹å˜ é‚£ä¹ˆ`getters`ä¹Ÿä¼šéšç€è°ƒç”¨ä¸€æ¬¡ï¼Œæ¸…é™¤ä»¥å‰çš„æ•°æ®ç¼“å­˜

```vue
<template>
<!-- getterså…·å¤‡å“åº”å¼ æ•°æ®ä¿®æ”¹å ä¼šæ›´æ–° -->
  <main>{{ changeMessage }}</main>
  <div>
    <button @click="changeState">ä¿®æ”¹state</button>
  </div>
</template>
<script lang="ts" setup>
import { storeToRefs } from 'pinia'
import { useCounterStore } from '@/stores/counter'
//å¯¼å…¥Pinia
const store = useCounterStore()
//ä¿®æ”¹stateçš„å€¼
const changeState = () => {
  store.message = 'hello'
}
// è§£æ„æ•°æ® ä½¿ç”¨å¤„ç†åçš„stateæ•°æ®
const { changeMessage } = storeToRefs(store)
</script>

```

## å…³äºPiniaçš„thisä½¿ç”¨

* `actions`å’Œ`getters` éƒ½å¯ä»¥ä½¿ç”¨`this` å› ä¸ºä»–æŒ‡å‘çš„æ˜¯å½“å‰æ–‡ä»¶Piniaçš„å…¨å±€ ä¸è¿‡å¦‚æœä½ ç”¨TSå½“ä½ `getters`ä¸ç©¿å‚ å°±ä¼šå‡ºç°TSæŠ¥é”™
  * å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ—¶TSï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬ä¸ä¼ `state`, TypeScriptæ˜¯æ— æ³•è‡ªåŠ¨æ¨åˆ°å‡ºæ¥è¿”å›çš„æ•°æ®ç±»å‹çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¦æ ‡æ˜è¿”å›ç±»å‹ å°±ä¸ä¼šæç¤ºé”™è¯¯äº†ã€‚

```ts
  getters: {
    // å¤„ç†stateçš„å€¼
    changeMessage(): string {
      return (this.message = this.message + 'æˆ‘æ˜¯å°åˆ˜')
    }
  },
```

## å¤šä¸ªæ–‡ä»¶Storeè°ƒç”¨

* æ–‡ä»¶Aæƒ³ç”¨æ–‡ä»¶Bçš„`state` é‚£ä¹ˆè®¾è®¡åˆ°å¤šä¸ª`Store`ä»“åº“çš„ä½¿ç”¨ é€šå¸¸æˆ‘ä»¬åªéœ€è¦`import`å¼•å…¥ä½¿ç”¨å³å¯
  * <font color =#ff3040>æ³¨æ„: æ¯ä¸ª`Store`ä»“åº“çš„`ID`è¦æ˜¯å”¯ä¸€çš„ã€‚å¹¶ä¸”å¼•å…¥çš„`Store`ä»“åº“æ˜¯ä¸€ä¸ªå‡½æ•°æ–¹æ³•ä¸æ˜¯å±æ€§!</font>

> å®šä¹‰ä¸€ä¸ªä»“åº“B

```tsx
import { defineStore } from 'pinia'

export const userInfo = defineStore({
    // ä»“åº“idæ˜¯å”¯ä¸€çš„
  id: 'userInfo',
  state: () => {
    return {
      myNmae: 'å°åˆ˜'
    }
  }
})

```

> åœ¨ä»“åº“Aä¸­å¼•ç”¨ä»“åº“B

* <font color =#ff3040>æ³¨æ„: æ¯ä¸ª`Store`ä»“åº“çš„`ID`è¦æ˜¯å”¯ä¸€çš„ã€‚å¹¶ä¸”å¼•å…¥çš„`Store`ä»“åº“æ˜¯ä¸€ä¸ªå‡½æ•°æ–¹æ³•ä¸æ˜¯å±æ€§!</font>

```tsx
import { defineStore } from 'pinia'
// å¼•å…¥ä»“åº“B
import { userInfo } from './user'

export const useCounterStore = defineStore({
    // ä»“åº“idæ˜¯å”¯ä¸€çš„
  id: 'counter',
  state: () => {
    return {
      message: 'æˆ‘çš„åå­—å«'
    }
  },
  getters: {
    // æ•°æ®è°ƒç”¨çš„æ—¶å€™è¿›è¡Œå¤„ç†
    changeMessage(): string {
      // ä½¿ç”¨ä»“åº“Bçš„å†…å®¹
      return this.message + userInfo().myNmae // å¼•å…¥çš„å…¶ä»–Storeæ˜¯ä¸€ä¸ªå‡½æ•°æ–¹æ³•
    }
  },
  actions: {}
})

```

## åœ¨è°ƒè¯•å·¥å…·ä¸­æŸ¥çœ‹Pinia

* å¦‚æœæˆ‘ä»¬å®‰è£…äº†Vueæµè§ˆå™¨æ’ä»¶ æˆ‘ä»¬ç›´æ¥æ‰“å¼€æŸ¥çœ‹å³å¯
* è¿™æ—¶å€™åœ¨ä¸ŠåŠéƒ¨åˆ†æœ‰ä¸€ä¸ªé¢æ¿ï¼Œé»˜è®¤æ˜¾ç¤ºæ˜¯`Components`,ç‚¹å‡»åï¼Œä¹Ÿå¯ä»¥é€‰æ‹©`Pinia`ã€‚è¿™æ—¶å€™ç‚¹å‡»`Pinia`å°±å¯ä»¥çœ‹åˆ°storeé‡Œè¾¹çš„`stateã€getters...`ç­‰ä¿¡æ¯äº†ã€‚

![image-20220902171504843](https://jinyanlong-1305883696.cos.ap-hongkong.myqcloud.com/202209021715892.png)

## å‚è€ƒæ–‡çŒ®

[Piniaå…¥é—¨è§†é¢‘æ•™ç¨‹ å…¨æ–°ä¸€ä»£çŠ¶æ€ç®¡ç†å·¥å…·Pinia -Vue3å…¨å®¶æ¡¶ç³»åˆ—](https://jspang.com/article/82#toc33)
